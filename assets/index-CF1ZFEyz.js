(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function L_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function GE(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var n=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(a){var o=Object.getOwnPropertyDescriptor(r,a);Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:function(){return r[a]}})}),n}var wh={exports:{}},yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function $E(){if(qv)return yl;qv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var h in o)h!=="key"&&(u[h]=o[h])}else u=o;return o=u.ref,{$$typeof:r,type:a,key:d,ref:o!==void 0?o:null,props:u}}return yl.Fragment=e,yl.jsx=n,yl.jsxs=n,yl}var Fv;function QE(){return Fv||(Fv=1,wh.exports=$E()),wh.exports}var p=QE(),Th={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function KE(){if(Gv)return Pe;Gv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.iterator;function R(_){return _===null||typeof _!="object"?null:(_=E&&_[E]||_["@@iterator"],typeof _=="function"?_:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,L={};function z(_,M,Q){this.props=_,this.context=M,this.refs=L,this.updater=Q||D}z.prototype.isReactComponent={},z.prototype.setState=function(_,M){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,M,"setState")},z.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function F(){}F.prototype=z.prototype;function Y(_,M,Q){this.props=_,this.context=M,this.refs=L,this.updater=Q||D}var ne=Y.prototype=new F;ne.constructor=Y,B(ne,z.prototype),ne.isPureReactComponent=!0;var re=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function N(_,M,Q,W,ae,ce){return Q=ce.ref,{$$typeof:r,type:_,key:M,ref:Q!==void 0?Q:null,props:ce}}function O(_,M){return N(_.type,M,void 0,void 0,void 0,_.props)}function A(_){return typeof _=="object"&&_!==null&&_.$$typeof===r}function S(_){var M={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(Q){return M[Q]})}var j=/\/+/g;function k(_,M){return typeof _=="object"&&_!==null&&_.key!=null?S(""+_.key):M.toString(36)}function C(){}function Z(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(C,C):(_.status="pending",_.then(function(M){_.status==="pending"&&(_.status="fulfilled",_.value=M)},function(M){_.status==="pending"&&(_.status="rejected",_.reason=M)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function me(_,M,Q,W,ae){var ce=typeof _;(ce==="undefined"||ce==="boolean")&&(_=null);var le=!1;if(_===null)le=!0;else switch(ce){case"bigint":case"string":case"number":le=!0;break;case"object":switch(_.$$typeof){case r:case e:le=!0;break;case b:return le=_._init,me(le(_._payload),M,Q,W,ae)}}if(le)return ae=ae(_),le=W===""?"."+k(_,0):W,re(ae)?(Q="",le!=null&&(Q=le.replace(j,"$&/")+"/"),me(ae,M,Q,"",function(Oe){return Oe})):ae!=null&&(A(ae)&&(ae=O(ae,Q+(ae.key==null||_&&_.key===ae.key?"":(""+ae.key).replace(j,"$&/")+"/")+le)),M.push(ae)),1;le=0;var ye=W===""?".":W+":";if(re(_))for(var Se=0;Se<_.length;Se++)W=_[Se],ce=ye+k(W,Se),le+=me(W,M,Q,ce,ae);else if(Se=R(_),typeof Se=="function")for(_=Se.call(_),Se=0;!(W=_.next()).done;)W=W.value,ce=ye+k(W,Se++),le+=me(W,M,Q,ce,ae);else if(ce==="object"){if(typeof _.then=="function")return me(Z(_),M,Q,W,ae);throw M=String(_),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return le}function $(_,M,Q){if(_==null)return _;var W=[],ae=0;return me(_,W,"","",function(ce){return M.call(Q,ce,ae++)}),W}function w(_){if(_._status===-1){var M=_._result;M=M(),M.then(function(Q){(_._status===0||_._status===-1)&&(_._status=1,_._result=Q)},function(Q){(_._status===0||_._status===-1)&&(_._status=2,_._result=Q)}),_._status===-1&&(_._status=0,_._result=M)}if(_._status===1)return _._result.default;throw _._result}var ge=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)};function G(){}return Pe.Children={map:$,forEach:function(_,M,Q){$(_,function(){M.apply(this,arguments)},Q)},count:function(_){var M=0;return $(_,function(){M++}),M},toArray:function(_){return $(_,function(M){return M})||[]},only:function(_){if(!A(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},Pe.Component=z,Pe.Fragment=n,Pe.Profiler=o,Pe.PureComponent=Y,Pe.StrictMode=a,Pe.Suspense=y,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(_){return V.H.useMemoCache(_)}},Pe.cache=function(_){return function(){return _.apply(null,arguments)}},Pe.cloneElement=function(_,M,Q){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var W=B({},_.props),ae=_.key,ce=void 0;if(M!=null)for(le in M.ref!==void 0&&(ce=void 0),M.key!==void 0&&(ae=""+M.key),M)!q.call(M,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&M.ref===void 0||(W[le]=M[le]);var le=arguments.length-2;if(le===1)W.children=Q;else if(1<le){for(var ye=Array(le),Se=0;Se<le;Se++)ye[Se]=arguments[Se+2];W.children=ye}return N(_.type,ae,void 0,void 0,ce,W)},Pe.createContext=function(_){return _={$$typeof:d,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:u,_context:_},_},Pe.createElement=function(_,M,Q){var W,ae={},ce=null;if(M!=null)for(W in M.key!==void 0&&(ce=""+M.key),M)q.call(M,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ae[W]=M[W]);var le=arguments.length-2;if(le===1)ae.children=Q;else if(1<le){for(var ye=Array(le),Se=0;Se<le;Se++)ye[Se]=arguments[Se+2];ae.children=ye}if(_&&_.defaultProps)for(W in le=_.defaultProps,le)ae[W]===void 0&&(ae[W]=le[W]);return N(_,ce,void 0,void 0,null,ae)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(_){return{$$typeof:h,render:_}},Pe.isValidElement=A,Pe.lazy=function(_){return{$$typeof:b,_payload:{_status:-1,_result:_},_init:w}},Pe.memo=function(_,M){return{$$typeof:g,type:_,compare:M===void 0?null:M}},Pe.startTransition=function(_){var M=V.T,Q={};V.T=Q;try{var W=_(),ae=V.S;ae!==null&&ae(Q,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(G,ge)}catch(ce){ge(ce)}finally{V.T=M}},Pe.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Pe.use=function(_){return V.H.use(_)},Pe.useActionState=function(_,M,Q){return V.H.useActionState(_,M,Q)},Pe.useCallback=function(_,M){return V.H.useCallback(_,M)},Pe.useContext=function(_){return V.H.useContext(_)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(_,M){return V.H.useDeferredValue(_,M)},Pe.useEffect=function(_,M,Q){var W=V.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(_,M)},Pe.useId=function(){return V.H.useId()},Pe.useImperativeHandle=function(_,M,Q){return V.H.useImperativeHandle(_,M,Q)},Pe.useInsertionEffect=function(_,M){return V.H.useInsertionEffect(_,M)},Pe.useLayoutEffect=function(_,M){return V.H.useLayoutEffect(_,M)},Pe.useMemo=function(_,M){return V.H.useMemo(_,M)},Pe.useOptimistic=function(_,M){return V.H.useOptimistic(_,M)},Pe.useReducer=function(_,M,Q){return V.H.useReducer(_,M,Q)},Pe.useRef=function(_){return V.H.useRef(_)},Pe.useState=function(_){return V.H.useState(_)},Pe.useSyncExternalStore=function(_,M,Q){return V.H.useSyncExternalStore(_,M,Q)},Pe.useTransition=function(){return V.H.useTransition()},Pe.version="19.1.0",Pe}var $v;function Or(){return $v||($v=1,Th.exports=KE()),Th.exports}var U=Or();const za=L_(U);var Ah={exports:{}},vl={},xh={exports:{}},Rh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function YE(){return Qv||(Qv=1,function(r){function e($,w){var ge=$.length;$.push(w);e:for(;0<ge;){var G=ge-1>>>1,_=$[G];if(0<o(_,w))$[G]=w,$[ge]=_,ge=G;else break e}}function n($){return $.length===0?null:$[0]}function a($){if($.length===0)return null;var w=$[0],ge=$.pop();if(ge!==w){$[0]=ge;e:for(var G=0,_=$.length,M=_>>>1;G<M;){var Q=2*(G+1)-1,W=$[Q],ae=Q+1,ce=$[ae];if(0>o(W,ge))ae<_&&0>o(ce,W)?($[G]=ce,$[ae]=ge,G=ae):($[G]=W,$[Q]=ge,G=Q);else if(ae<_&&0>o(ce,ge))$[G]=ce,$[ae]=ge,G=ae;else break e}}return w}function o($,w){var ge=$.sortIndex-w.sortIndex;return ge!==0?ge:$.id-w.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();r.unstable_now=function(){return d.now()-h}}var y=[],g=[],b=1,E=null,R=3,D=!1,B=!1,L=!1,z=!1,F=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function re($){for(var w=n(g);w!==null;){if(w.callback===null)a(g);else if(w.startTime<=$)a(g),w.sortIndex=w.expirationTime,e(y,w);else break;w=n(g)}}function V($){if(L=!1,re($),!B)if(n(y)!==null)B=!0,q||(q=!0,k());else{var w=n(g);w!==null&&me(V,w.startTime-$)}}var q=!1,N=-1,O=5,A=-1;function S(){return z?!0:!(r.unstable_now()-A<O)}function j(){if(z=!1,q){var $=r.unstable_now();A=$;var w=!0;try{e:{B=!1,L&&(L=!1,Y(N),N=-1),D=!0;var ge=R;try{t:{for(re($),E=n(y);E!==null&&!(E.expirationTime>$&&S());){var G=E.callback;if(typeof G=="function"){E.callback=null,R=E.priorityLevel;var _=G(E.expirationTime<=$);if($=r.unstable_now(),typeof _=="function"){E.callback=_,re($),w=!0;break t}E===n(y)&&a(y),re($)}else a(y);E=n(y)}if(E!==null)w=!0;else{var M=n(g);M!==null&&me(V,M.startTime-$),w=!1}}break e}finally{E=null,R=ge,D=!1}w=void 0}}finally{w?k():q=!1}}}var k;if(typeof ne=="function")k=function(){ne(j)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Z=C.port2;C.port1.onmessage=j,k=function(){Z.postMessage(null)}}else k=function(){F(j,0)};function me($,w){N=F(function(){$(r.unstable_now())},w)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function($){switch(R){case 1:case 2:case 3:var w=3;break;default:w=R}var ge=R;R=w;try{return $()}finally{R=ge}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function($,w){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ge=R;R=$;try{return w()}finally{R=ge}},r.unstable_scheduleCallback=function($,w,ge){var G=r.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?G+ge:G):ge=G,$){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=ge+_,$={id:b++,callback:w,priorityLevel:$,startTime:ge,expirationTime:_,sortIndex:-1},ge>G?($.sortIndex=ge,e(g,$),n(y)===null&&$===n(g)&&(L?(Y(N),N=-1):L=!0,me(V,ge-G))):($.sortIndex=_,e(y,$),B||D||(B=!0,q||(q=!0,k()))),$},r.unstable_shouldYield=S,r.unstable_wrapCallback=function($){var w=R;return function(){var ge=R;R=w;try{return $.apply(this,arguments)}finally{R=ge}}}}(Rh)),Rh}var Kv;function XE(){return Kv||(Kv=1,xh.exports=YE()),xh.exports}var Ch={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function WE(){if(Yv)return dn;Yv=1;var r=Or();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,g,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:y,containerInfo:g,implementation:b}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,dn.createPortal=function(y,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(y,g,null,b)},dn.flushSync=function(y){var g=d.T,b=a.p;try{if(d.T=null,a.p=2,y)return y()}finally{d.T=g,a.p=b,a.d.f()}},dn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(y,g))},dn.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},dn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var b=g.as,E=h(b,g.crossOrigin),R=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?a.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:R,fetchPriority:D}):b==="script"&&a.d.X(y,{crossOrigin:E,integrity:R,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},dn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=h(g.as,g.crossOrigin);a.d.M(y,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(y)},dn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,E=h(b,g.crossOrigin);a.d.L(y,b,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},dn.preloadModule=function(y,g){if(typeof y=="string")if(g){var b=h(g.as,g.crossOrigin);a.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(y)},dn.requestFormReset=function(y){a.d.r(y)},dn.unstable_batchedUpdates=function(y,g){return y(g)},dn.useFormState=function(y,g,b){return d.H.useFormState(y,g,b)},dn.useFormStatus=function(){return d.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var Xv;function ZE(){if(Xv)return Ch.exports;Xv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ch.exports=WE(),Ch.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function JE(){if(Wv)return vl;Wv=1;var r=XE(),e=Or(),n=ZE();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function h(t){if(u(t)!==t)throw Error(a(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(a(188));return i!==t?null:t}for(var s=t,l=i;;){var f=s.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){s=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===s)return h(f),t;if(m===l)return h(f),i;m=m.sibling}throw Error(a(188))}if(s.return!==l.return)s=f,l=m;else{for(var x=!1,I=f.child;I;){if(I===s){x=!0,s=f,l=m;break}if(I===l){x=!0,l=f,s=m;break}I=I.sibling}if(!x){for(I=m.child;I;){if(I===s){x=!0,s=m,l=f;break}if(I===l){x=!0,l=m,s=f;break}I=I.sibling}if(!x)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,E=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),S=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Z(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case z:return"Profiler";case L:return"StrictMode";case V:return"Suspense";case q:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case D:return"Portal";case ne:return(t.displayName||"Context")+".Provider";case Y:return(t._context.displayName||"Context")+".Consumer";case re:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:Z(t.type)||"Memo";case O:i=t._payload,t=t._init;try{return Z(t(i))}catch{}}return null}var me=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},G=[],_=-1;function M(t){return{current:t}}function Q(t){0>_||(t.current=G[_],G[_]=null,_--)}function W(t,i){_++,G[_]=t.current,t.current=i}var ae=M(null),ce=M(null),le=M(null),ye=M(null);function Se(t,i){switch(W(le,i),W(ce,t),W(ae,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?yv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=yv(i),t=vv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(ae),W(ae,t)}function Oe(){Q(ae),Q(ce),Q(le)}function ke(t){t.memoizedState!==null&&W(ye,t);var i=ae.current,s=vv(i,t.type);i!==s&&(W(ce,t),W(ae,s))}function ze(t){ce.current===t&&(Q(ae),Q(ce)),ye.current===t&&(Q(ye),dl._currentValue=ge)}var He=Object.prototype.hasOwnProperty,Ve=r.unstable_scheduleCallback,je=r.unstable_cancelCallback,Ge=r.unstable_shouldYield,ht=r.unstable_requestPaint,Re=r.unstable_now,mt=r.unstable_getCurrentPriorityLevel,pt=r.unstable_ImmediatePriority,gt=r.unstable_UserBlockingPriority,xt=r.unstable_NormalPriority,Wn=r.unstable_LowPriority,Zn=r.unstable_IdlePriority,di=r.log,or=r.unstable_setDisableYieldValue,yt=null,Ue=null;function Lt(t){if(typeof di=="function"&&or(t),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(yt,t)}catch{}}var cn=Math.clz32?Math.clz32:ea,iu=Math.log,Af=Math.LN2;function ea(t){return t>>>=0,t===0?32:31-(iu(t)/Af|0)|0}var ta=256,na=4194304;function Jn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Xa(t,i,s){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var I=l&134217727;return I!==0?(l=I&~m,l!==0?f=Jn(l):(x&=I,x!==0?f=Jn(x):s||(s=I&~t,s!==0&&(f=Jn(s))))):(I=l&~m,I!==0?f=Jn(I):x!==0?f=Jn(x):s||(s=l&~t,s!==0&&(f=Jn(s)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,s=i&-i,m>=s||m===32&&(s&4194048)!==0)?i:f}function ra(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function fo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(){var t=ta;return ta<<=1,(ta&4194048)===0&&(ta=256),t}function mo(){var t=na;return na<<=1,(na&62914560)===0&&(na=4194304),t}function jr(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function Mr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function po(t,i,s,l,f,m){var x=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var I=t.entanglements,H=t.expirationTimes,te=t.hiddenUpdates;for(s=x&~s;0<s;){var ue=31-cn(s),de=1<<ue;I[ue]=0,H[ue]=-1;var ie=te[ue];if(ie!==null)for(te[ue]=null,ue=0;ue<ie.length;ue++){var se=ie[ue];se!==null&&(se.lane&=-536870913)}s&=~de}l!==0&&lr(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~i))}function lr(t,i,s){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-cn(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function go(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var l=31-cn(s),f=1<<l;f&i|t[l]&i&&(t[l]|=i),s&=~f}}function hi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Wa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mi(){var t=w.p;return t!==0?t:(t=window.event,t===void 0?32:Vv(t.type))}function au(t,i){var s=w.p;try{return w.p=t,i()}finally{w.p=s}}var vt=Math.random().toString(36).slice(2),zt="__reactFiber$"+vt,Dt="__reactProps$"+vt,Ln="__reactContainer$"+vt,yo="__reactEvents$"+vt,xf="__reactListeners$"+vt,pi="__reactHandles$"+vt,su="__reactResources$"+vt,ia="__reactMarker$"+vt;function gi(t){delete t[zt],delete t[Dt],delete t[yo],delete t[xf],delete t[pi]}function kr(t){var i=t[zt];if(i)return i;for(var s=t.parentNode;s;){if(i=s[Ln]||s[zt]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=Sv(t);t!==null;){if(s=t[zt])return s;t=Sv(t)}return i}t=s,s=t.parentNode}return null}function ur(t){if(t=t[zt]||t[Ln]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function cr(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function vn(t){var i=t[su];return i||(i=t[su]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(t){t[ia]=!0}var vo=new Set,Za={};function er(t,i){Pr(t,i),Pr(t+"Capture",i)}function Pr(t,i){for(Za[t]=i,t=0;t<i.length;t++)vo.add(i[t])}var ou=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},aa={};function uu(t){return He.call(aa,t)?!0:He.call(lu,t)?!1:ou.test(t)?aa[t]=!0:(lu[t]=!0,!1)}function yi(t,i,s){if(uu(i))if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+s)}}function fr(t,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+s)}}function en(t,i,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(i,s,""+l)}}var sa,cu;function Vr(t){if(sa===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);sa=i&&i[1]||"",cu=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sa+t+cu}var Ja=!1;function es(t,i){if(!t||Ja)return"";Ja=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(se){var ie=se}Reflect.construct(t,[],de)}else{try{de.call()}catch(se){ie=se}t.call(de.prototype)}}else{try{throw Error()}catch(se){ie=se}(de=t())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(se){if(se&&ie&&typeof se.stack=="string")return[se.stack,ie.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],I=m[1];if(x&&I){var H=x.split(`
`),te=I.split(`
`);for(f=l=0;l<H.length&&!H[l].includes("DetermineComponentFrameRoot");)l++;for(;f<te.length&&!te[f].includes("DetermineComponentFrameRoot");)f++;if(l===H.length||f===te.length)for(l=H.length-1,f=te.length-1;1<=l&&0<=f&&H[l]!==te[f];)f--;for(;1<=l&&0<=f;l--,f--)if(H[l]!==te[f]){if(l!==1||f!==1)do if(l--,f--,0>f||H[l]!==te[f]){var ue=`
`+H[l].replace(" at new "," at ");return t.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",t.displayName)),ue}while(1<=l&&0<=f);break}}}finally{Ja=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Vr(s):""}function _o(t){switch(t.tag){case 26:case 27:case 5:return Vr(t.type);case 16:return Vr("Lazy");case 13:return Vr("Suspense");case 19:return Vr("SuspenseList");case 0:case 15:return es(t.type,!1);case 11:return es(t.type.render,!1);case 1:return es(t.type,!0);case 31:return Vr("Activity");default:return""}}function ts(t){try{var i="";do i+=_o(t),t=t.return;while(t);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function _n(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Rf(t){var i=bo(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,m=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(x){l=""+x,m.call(this,x)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ns(t){t._valueTracker||(t._valueTracker=Rf(t))}function Eo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),l="";return t&&(l=bo(t)?t.checked?"true":"false":t.value),t=l,t!==s?(i.setValue(t),!0):!1}function oa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Cf=/[\n"\\]/g;function jt(t){return t.replace(Cf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Cn(t,i,s,l,f,m,x,I){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),i!=null?x==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+_n(i)):t.value!==""+_n(i)&&(t.value=""+_n(i)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),i!=null?vi(t,x,_n(i)):s!=null?vi(t,x,_n(s)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?t.name=""+_n(I):t.removeAttribute("name")}function la(t,i,s,l,f,m,x,I){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),i!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;s=s!=null?""+_n(s):"",i=i!=null?""+_n(i):s,I||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=I?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x)}function vi(t,i,s){i==="number"&&oa(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Lr(t,i,s,l){if(t=t.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=i.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&l&&(t[s].defaultSelected=!0)}else{for(s=""+_n(s),i=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function st(t,i,s){if(i!=null&&(i=""+_n(i),i!==t.value&&(t.value=i),s==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=s!=null?""+_n(s):""}function ua(t,i,s,l){if(i==null){if(l!=null){if(s!=null)throw Error(a(92));if(me(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),i=s}s=_n(i),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function zn(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var ca=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fu(t,i,s){var l=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,s):typeof s!="number"||s===0||ca.has(i)?i==="float"?t.cssFloat=s:t[i]=(""+s).trim():t[i]=s+"px"}function So(t,i,s){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&s[f]!==l&&fu(t,f,l)}else for(var m in i)i.hasOwnProperty(m)&&fu(t,m,i[m])}function wo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Of=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rs(t){return Of.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var zr=null;function Un(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ur=null,Br=null;function To(t){var i=ur(t);if(i&&(t=i.stateNode)){var s=t[Dt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Cn(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+jt(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var l=s[i];if(l!==t&&l.form===t.form){var f=l[Dt]||null;if(!f)throw Error(a(90));Cn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<s.length;i++)l=s[i],l.form===t.form&&Eo(l)}break e;case"textarea":st(t,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&Lr(t,!!s.multiple,i,!1)}}}var dr=!1;function du(t,i,s){if(dr)return t(i,s);dr=!0;try{var l=t(i);return l}finally{if(dr=!1,(Ur!==null||Br!==null)&&(ac(),Ur&&(i=Ur,t=Br,Br=Ur=null,To(i),t)))for(i=0;i<t.length;i++)To(t[i])}}function fa(t,i){var s=t.stateNode;if(s===null)return null;var l=s[Dt]||null;if(l===null)return null;s=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,i,typeof s));return s}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bn=!1;if(tr)try{var da={};Object.defineProperty(da,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",da,da),window.removeEventListener("test",da,da)}catch{Bn=!1}var hr=null,_i=null,Hr=null;function Ao(){if(Hr)return Hr;var t,i=_i,s=i.length,l,f="value"in hr?hr.value:hr.textContent,m=f.length;for(t=0;t<s&&i[t]===f[t];t++);var x=s-t;for(l=1;l<=x&&i[s-l]===f[m-l];l++);return Hr=f.slice(t,1<l?1-l:void 0)}function mr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function pr(){return!0}function xo(){return!1}function Gt(t){function i(s,l,f,m,x){this._reactName=s,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var I in t)t.hasOwnProperty(I)&&(s=t[I],this[I]=s?s(m):m[I]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?pr:xo,this.isPropagationStopped=xo,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),i}var nt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},is=Gt(nt),ha=b({},nt,{view:0,detail:0}),hu=Gt(ha),as,ss,gr,ma=b({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ya,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gr&&(gr&&t.type==="mousemove"?(as=t.screenX-gr.screenX,ss=t.screenY-gr.screenY):ss=as=0,gr=t),as)},movementY:function(t){return"movementY"in t?t.movementY:ss}}),Hn=Gt(ma),mu=b({},ma,{dataTransfer:0}),If=Gt(mu),pa=b({},ha,{relatedTarget:0}),os=Gt(pa),Ro=b({},nt,{animationName:0,elapsedTime:0,pseudoElement:0}),ls=Gt(Ro),pu=b({},nt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),us=Gt(pu),Df=b({},nt,{data:0}),Co=Gt(Df),ga={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function No(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=yu[t])?!!i[t]:!1}function ya(){return No}var vu=b({},ha,{key:function(t){if(t.key){var i=ga[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=mr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ya,charCode:function(t){return t.type==="keypress"?mr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cs=Gt(vu),_u=b({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oo=Gt(_u),qr=b({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ya}),bu=Gt(qr),Eu=b({},nt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Su=Gt(Eu),wu=b({},ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fs=Gt(wu),bn=b({},nt,{newState:0,oldState:0}),Tu=Gt(bn),Au=[9,13,27,32],yr=tr&&"CompositionEvent"in window,c=null;tr&&"documentMode"in document&&(c=document.documentMode);var v=tr&&"TextEvent"in window&&!c,T=tr&&(!yr||c&&8<c&&11>=c),P=" ",J=!1;function oe(t,i){switch(t){case"keyup":return Au.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ve(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ke=!1;function Ut(t,i){switch(t){case"compositionend":return ve(i);case"keypress":return i.which!==32?null:(J=!0,P);case"textInput":return t=i.data,t===P&&J?null:t;default:return null}}function Ye(t,i){if(Ke)return t==="compositionend"||!yr&&oe(t,i)?(t=Ao(),Hr=_i=hr=null,Ke=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return T&&i.locale!=="ko"?null:i.data;default:return null}}var $t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!$t[t.type]:i==="textarea"}function Fr(t,i,s,l){Ur?Br?Br.push(l):Br=[l]:Ur=l,i=fc(i,"onChange"),0<i.length&&(s=new is("onChange","change",null,s,l),t.push({event:s,listeners:i}))}var tn=null,vr=null;function Io(t){dv(t,0)}function xu(t){var i=cr(t);if(Eo(i))return t}function jp(t,i){if(t==="change")return i}var Mp=!1;if(tr){var jf;if(tr){var Mf="oninput"in document;if(!Mf){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),Mf=typeof kp.oninput=="function"}jf=Mf}else jf=!1;Mp=jf&&(!document.documentMode||9<document.documentMode)}function Pp(){tn&&(tn.detachEvent("onpropertychange",Vp),vr=tn=null)}function Vp(t){if(t.propertyName==="value"&&xu(vr)){var i=[];Fr(i,vr,t,Un(t)),du(Io,i)}}function E2(t,i,s){t==="focusin"?(Pp(),tn=i,vr=s,tn.attachEvent("onpropertychange",Vp)):t==="focusout"&&Pp()}function S2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xu(vr)}function w2(t,i){if(t==="click")return xu(i)}function T2(t,i){if(t==="input"||t==="change")return xu(i)}function A2(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Nn=typeof Object.is=="function"?Object.is:A2;function Do(t,i){if(Nn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),l=Object.keys(i);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var f=s[l];if(!He.call(i,f)||!Nn(t[f],i[f]))return!1}return!0}function Lp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zp(t,i){var s=Lp(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=i&&l>=i)return{node:s,offset:i-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Lp(s)}}function Up(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Up(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Bp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=oa(t.document);i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=oa(t.document)}return i}function kf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var x2=tr&&"documentMode"in document&&11>=document.documentMode,ds=null,Pf=null,jo=null,Vf=!1;function Hp(t,i,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Vf||ds==null||ds!==oa(l)||(l=ds,"selectionStart"in l&&kf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),jo&&Do(jo,l)||(jo=l,l=fc(Pf,"onSelect"),0<l.length&&(i=new is("onSelect","select",null,i,s),t.push({event:i,listeners:l}),i.target=ds)))}function va(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var hs={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},Lf={},qp={};tr&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function _a(t){if(Lf[t])return Lf[t];if(!hs[t])return t;var i=hs[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in qp)return Lf[t]=i[s];return t}var Fp=_a("animationend"),Gp=_a("animationiteration"),$p=_a("animationstart"),R2=_a("transitionrun"),C2=_a("transitionstart"),N2=_a("transitioncancel"),Qp=_a("transitionend"),Kp=new Map,zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zf.push("scrollEnd");function nr(t,i){Kp.set(t,i),er(i,[t])}var Yp=new WeakMap;function qn(t,i){if(typeof t=="object"&&t!==null){var s=Yp.get(t);return s!==void 0?s:(i={value:t,source:i,stack:ts(i)},Yp.set(t,i),i)}return{value:t,source:i,stack:ts(i)}}var Fn=[],ms=0,Uf=0;function Ru(){for(var t=ms,i=Uf=ms=0;i<t;){var s=Fn[i];Fn[i++]=null;var l=Fn[i];Fn[i++]=null;var f=Fn[i];Fn[i++]=null;var m=Fn[i];if(Fn[i++]=null,l!==null&&f!==null){var x=l.pending;x===null?f.next=f:(f.next=x.next,x.next=f),l.pending=f}m!==0&&Xp(s,f,m)}}function Cu(t,i,s,l){Fn[ms++]=t,Fn[ms++]=i,Fn[ms++]=s,Fn[ms++]=l,Uf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Bf(t,i,s,l){return Cu(t,i,s,l),Nu(t)}function ps(t,i){return Cu(t,null,null,i),Nu(t)}function Xp(t,i,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var f=!1,m=t.return;m!==null;)m.childLanes|=s,l=m.alternate,l!==null&&(l.childLanes|=s),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&i!==null&&(f=31-cn(s),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=s|536870912),m):null}function Nu(t){if(50<il)throw il=0,Qd=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var gs={};function O2(t,i,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,i,s,l){return new O2(t,i,s,l)}function Hf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gr(t,i){var s=t.alternate;return s===null?(s=On(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Wp(t,i){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,i=s.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Ou(t,i,s,l,f,m){var x=0;if(l=t,typeof t=="function")Hf(t)&&(x=1);else if(typeof t=="string")x=DE(t,s,ae.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=On(31,s,i,f),t.elementType=A,t.lanes=m,t;case B:return ba(s.children,f,m,i);case L:x=8,f|=24;break;case z:return t=On(12,s,i,f|2),t.elementType=z,t.lanes=m,t;case V:return t=On(13,s,i,f),t.elementType=V,t.lanes=m,t;case q:return t=On(19,s,i,f),t.elementType=q,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:case ne:x=10;break e;case Y:x=9;break e;case re:x=11;break e;case N:x=14;break e;case O:x=16,l=null;break e}x=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=On(x,s,i,f),i.elementType=t,i.type=l,i.lanes=m,i}function ba(t,i,s,l){return t=On(7,t,l,i),t.lanes=s,t}function qf(t,i,s){return t=On(6,t,null,i),t.lanes=s,t}function Ff(t,i,s){return i=On(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ys=[],vs=0,Iu=null,Du=0,Gn=[],$n=0,Ea=null,$r=1,Qr="";function Sa(t,i){ys[vs++]=Du,ys[vs++]=Iu,Iu=t,Du=i}function Zp(t,i,s){Gn[$n++]=$r,Gn[$n++]=Qr,Gn[$n++]=Ea,Ea=t;var l=$r;t=Qr;var f=32-cn(l)-1;l&=~(1<<f),s+=1;var m=32-cn(i)+f;if(30<m){var x=f-f%5;m=(l&(1<<x)-1).toString(32),l>>=x,f-=x,$r=1<<32-cn(i)+f|s<<f|l,Qr=m+t}else $r=1<<m|s<<f|l,Qr=t}function Gf(t){t.return!==null&&(Sa(t,1),Zp(t,1,0))}function $f(t){for(;t===Iu;)Iu=ys[--vs],ys[vs]=null,Du=ys[--vs],ys[vs]=null;for(;t===Ea;)Ea=Gn[--$n],Gn[$n]=null,Qr=Gn[--$n],Gn[$n]=null,$r=Gn[--$n],Gn[$n]=null}var En=null,wt=null,tt=!1,wa=null,_r=!1,Qf=Error(a(519));function Ta(t){var i=Error(a(418,""));throw Po(qn(i,t)),Qf}function Jp(t){var i=t.stateNode,s=t.type,l=t.memoizedProps;switch(i[zt]=t,i[Dt]=l,s){case"dialog":Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":case"embed":Fe("load",i);break;case"video":case"audio":for(s=0;s<sl.length;s++)Fe(sl[s],i);break;case"source":Fe("error",i);break;case"img":case"image":case"link":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"input":Fe("invalid",i),la(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ns(i);break;case"select":Fe("invalid",i);break;case"textarea":Fe("invalid",i),ua(i,l.value,l.defaultValue,l.children),ns(i)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||l.suppressHydrationWarning===!0||gv(i.textContent,s)?(l.popover!=null&&(Fe("beforetoggle",i),Fe("toggle",i)),l.onScroll!=null&&Fe("scroll",i),l.onScrollEnd!=null&&Fe("scrollend",i),l.onClick!=null&&(i.onclick=dc),i=!0):i=!1,i||Ta(t)}function eg(t){for(En=t.return;En;)switch(En.tag){case 5:case 13:_r=!1;return;case 27:case 3:_r=!0;return;default:En=En.return}}function Mo(t){if(t!==En)return!1;if(!tt)return eg(t),tt=!0,!1;var i=t.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||uh(t.type,t.memoizedProps)),s=!s),s&&wt&&Ta(t),eg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(i===0){wt=ir(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++;t=t.nextSibling}wt=null}}else i===27?(i=wt,ki(t.type)?(t=hh,hh=null,wt=t):wt=i):wt=En?ir(t.stateNode.nextSibling):null;return!0}function ko(){wt=En=null,tt=!1}function tg(){var t=wa;return t!==null&&(xn===null?xn=t:xn.push.apply(xn,t),wa=null),t}function Po(t){wa===null?wa=[t]:wa.push(t)}var Kf=M(null),Aa=null,Kr=null;function bi(t,i,s){W(Kf,i._currentValue),i._currentValue=s}function Yr(t){t._currentValue=Kf.current,Q(Kf)}function Yf(t,i,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===s)break;t=t.return}}function Xf(t,i,s,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var I=m;m=f;for(var H=0;H<i.length;H++)if(I.context===i[H]){m.lanes|=s,I=m.alternate,I!==null&&(I.lanes|=s),Yf(m.return,s,t),l||(x=null);break e}m=I.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(a(341));x.lanes|=s,m=x.alternate,m!==null&&(m.lanes|=s),Yf(x,s,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Vo(t,i,s,l){t=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(a(387));if(x=x.memoizedProps,x!==null){var I=f.type;Nn(f.pendingProps.value,x.value)||(t!==null?t.push(I):t=[I])}}else if(f===ye.current){if(x=f.alternate,x===null)throw Error(a(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(dl):t=[dl])}f=f.return}t!==null&&Xf(i,t,s,l),i.flags|=262144}function ju(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function xa(t){Aa=t,Kr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return ng(Aa,t)}function Mu(t,i){return Aa===null&&xa(t),ng(t,i)}function ng(t,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Kr===null){if(t===null)throw Error(a(308));Kr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Kr=Kr.next=i;return s}var I2=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(s){return s()})}},D2=r.unstable_scheduleCallback,j2=r.unstable_NormalPriority,Ht={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new I2,data:new Map,refCount:0}}function Lo(t){t.refCount--,t.refCount===0&&D2(j2,function(){t.controller.abort()})}var zo=null,Zf=0,_s=0,bs=null;function M2(t,i){if(zo===null){var s=zo=[];Zf=0,_s=eh(),bs={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Zf++,i.then(rg,rg),i}function rg(){if(--Zf===0&&zo!==null){bs!==null&&(bs.status="fulfilled");var t=zo;zo=null,_s=0,bs=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function k2(t,i){var s=[],l={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<s.length;f++)(0,s[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),l}var ig=$.S;$.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&M2(t,i),ig!==null&&ig(t,i)};var Ra=M(null);function Jf(){var t=Ra.current;return t!==null?t:ft.pooledCache}function ku(t,i){i===null?W(Ra,Ra.current):W(Ra,i.pool)}function ag(){var t=Jf();return t===null?null:{parent:Ht._currentValue,pool:t}}var Uo=Error(a(460)),sg=Error(a(474)),Pu=Error(a(542)),ed={then:function(){}};function og(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Vu(){}function lg(t,i,s){switch(s=t[s],s===void 0?t.push(i):s!==i&&(i.then(Vu,Vu),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,cg(t),t;default:if(typeof i.status=="string")i.then(Vu,Vu);else{if(t=ft,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,cg(t),t}throw Bo=i,Uo}}var Bo=null;function ug(){if(Bo===null)throw Error(a(459));var t=Bo;return Bo=null,t}function cg(t){if(t===Uo||t===Pu)throw Error(a(483))}var Ei=!1;function td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Si(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wi(t,i,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(rt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Nu(t),Xp(t,null,s),i}return Cu(t,l,i,s),Nu(t)}function Ho(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,go(t,s)}}function rd(t,i){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var f=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var x={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,s=s.next}while(s!==null);m===null?f=m=i:m=m.next=i}else f=m=i;s={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}var id=!1;function qo(){if(id){var t=bs;if(t!==null)throw t}}function Fo(t,i,s,l){id=!1;var f=t.updateQueue;Ei=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var H=I,te=H.next;H.next=null,x===null?m=te:x.next=te,x=H;var ue=t.alternate;ue!==null&&(ue=ue.updateQueue,I=ue.lastBaseUpdate,I!==x&&(I===null?ue.firstBaseUpdate=te:I.next=te,ue.lastBaseUpdate=H))}if(m!==null){var de=f.baseState;x=0,ue=te=H=null,I=m;do{var ie=I.lane&-536870913,se=ie!==I.lane;if(se?(Xe&ie)===ie:(l&ie)===ie){ie!==0&&ie===_s&&(id=!0),ue!==null&&(ue=ue.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ne=t,xe=I;ie=i;var ut=s;switch(xe.tag){case 1:if(Ne=xe.payload,typeof Ne=="function"){de=Ne.call(ut,de,ie);break e}de=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=xe.payload,ie=typeof Ne=="function"?Ne.call(ut,de,ie):Ne,ie==null)break e;de=b({},de,ie);break e;case 2:Ei=!0}}ie=I.callback,ie!==null&&(t.flags|=64,se&&(t.flags|=8192),se=f.callbacks,se===null?f.callbacks=[ie]:se.push(ie))}else se={lane:ie,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ue===null?(te=ue=se,H=de):ue=ue.next=se,x|=ie;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;se=I,I=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);ue===null&&(H=de),f.baseState=H,f.firstBaseUpdate=te,f.lastBaseUpdate=ue,m===null&&(f.shared.lanes=0),Ii|=x,t.lanes=x,t.memoizedState=de}}function fg(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function dg(t,i){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)fg(s[t],i)}var Es=M(null),Lu=M(0);function hg(t,i){t=ni,W(Lu,t),W(Es,i),ni=t|i.baseLanes}function ad(){W(Lu,ni),W(Es,Es.current)}function sd(){ni=Lu.current,Q(Es),Q(Lu)}var Ti=0,Le=null,ot=null,Mt=null,zu=!1,Ss=!1,Ca=!1,Uu=0,Go=0,ws=null,P2=0;function Ct(){throw Error(a(321))}function od(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!Nn(t[s],i[s]))return!1;return!0}function ld(t,i,s,l,f,m){return Ti=m,Le=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=t===null||t.memoizedState===null?Xg:Wg,Ca=!1,m=s(l,f),Ca=!1,Ss&&(m=pg(i,s,l,f)),mg(t),m}function mg(t){$.H=$u;var i=ot!==null&&ot.next!==null;if(Ti=0,Mt=ot=Le=null,zu=!1,Go=0,ws=null,i)throw Error(a(300));t===null||Qt||(t=t.dependencies,t!==null&&ju(t)&&(Qt=!0))}function pg(t,i,s,l){Le=t;var f=0;do{if(Ss&&(ws=null),Go=0,Ss=!1,25<=f)throw Error(a(301));if(f+=1,Mt=ot=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}$.H=q2,m=i(s,l)}while(Ss);return m}function V2(){var t=$.H,i=t.useState()[0];return i=typeof i.then=="function"?$o(i):i,t=t.useState()[0],(ot!==null?ot.memoizedState:null)!==t&&(Le.flags|=1024),i}function ud(){var t=Uu!==0;return Uu=0,t}function cd(t,i,s){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~s}function fd(t){if(zu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}zu=!1}Ti=0,Mt=ot=Le=null,Ss=!1,Go=Uu=0,ws=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Le.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function kt(){if(ot===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var i=Mt===null?Le.memoizedState:Mt.next;if(i!==null)Mt=i,ot=t;else{if(t===null)throw Le.alternate===null?Error(a(467)):Error(a(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Mt===null?Le.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function dd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(t){var i=Go;return Go+=1,ws===null&&(ws=[]),t=lg(ws,t,i),i=Le,(Mt===null?i.memoizedState:Mt.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?Xg:Wg),t}function Bu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $o(t);if(t.$$typeof===ne)return fn(t)}throw Error(a(438,String(t)))}function hd(t){var i=null,s=Le.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var l=Le.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=dd(),Le.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(t),l=0;l<t;l++)s[l]=S;return i.index++,s}function Xr(t,i){return typeof i=="function"?i(t):i}function Hu(t){var i=kt();return md(i,ot,t)}function md(t,i,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}i.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{i=f.next;var I=x=null,H=null,te=i,ue=!1;do{var de=te.lane&-536870913;if(de!==te.lane?(Xe&de)===de:(Ti&de)===de){var ie=te.revertLane;if(ie===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),de===_s&&(ue=!0);else if((Ti&ie)===ie){te=te.next,ie===_s&&(ue=!0);continue}else de={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},H===null?(I=H=de,x=m):H=H.next=de,Le.lanes|=ie,Ii|=ie;de=te.action,Ca&&s(m,de),m=te.hasEagerState?te.eagerState:s(m,de)}else ie={lane:de,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},H===null?(I=H=ie,x=m):H=H.next=ie,Le.lanes|=de,Ii|=de;te=te.next}while(te!==null&&te!==i);if(H===null?x=m:H.next=I,!Nn(m,t.memoizedState)&&(Qt=!0,ue&&(s=bs,s!==null)))throw s;t.memoizedState=m,t.baseState=x,t.baseQueue=H,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function pd(t){var i=kt(),s=i.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,f=s.pending,m=i.memoizedState;if(f!==null){s.pending=null;var x=f=f.next;do m=t(m,x.action),x=x.next;while(x!==f);Nn(m,i.memoizedState)||(Qt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),s.lastRenderedState=m}return[m,l]}function gg(t,i,s){var l=Le,f=kt(),m=tt;if(m){if(s===void 0)throw Error(a(407));s=s()}else s=i();var x=!Nn((ot||f).memoizedState,s);x&&(f.memoizedState=s,Qt=!0),f=f.queue;var I=_g.bind(null,l,f,t);if(Qo(2048,8,I,[t]),f.getSnapshot!==i||x||Mt!==null&&Mt.memoizedState.tag&1){if(l.flags|=2048,Ts(9,qu(),vg.bind(null,l,f,s,i),null),ft===null)throw Error(a(349));m||(Ti&124)!==0||yg(l,i,s)}return s}function yg(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=Le.updateQueue,i===null?(i=dd(),Le.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function vg(t,i,s,l){i.value=s,i.getSnapshot=l,bg(i)&&Eg(t)}function _g(t,i,s){return s(function(){bg(i)&&Eg(t)})}function bg(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!Nn(t,s)}catch{return!0}}function Eg(t){var i=ps(t,2);i!==null&&kn(i,t,2)}function gd(t){var i=Tn();if(typeof t=="function"){var s=t;if(t=s(),Ca){Lt(!0);try{s()}finally{Lt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:t},i}function Sg(t,i,s,l){return t.baseState=s,md(t,ot,typeof l=="function"?l:Xr)}function L2(t,i,s,l,f){if(Gu(t))throw Error(a(485));if(t=i.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};$.T!==null?s(!0):m.isTransition=!1,l(m),s=i.pending,s===null?(m.next=i.pending=m,wg(i,m)):(m.next=s.next,i.pending=s.next=m)}}function wg(t,i){var s=i.action,l=i.payload,f=t.state;if(i.isTransition){var m=$.T,x={};$.T=x;try{var I=s(f,l),H=$.S;H!==null&&H(x,I),Tg(t,i,I)}catch(te){yd(t,i,te)}finally{$.T=m}}else try{m=s(f,l),Tg(t,i,m)}catch(te){yd(t,i,te)}}function Tg(t,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Ag(t,i,l)},function(l){return yd(t,i,l)}):Ag(t,i,s)}function Ag(t,i,s){i.status="fulfilled",i.value=s,xg(i),t.state=s,i=t.pending,i!==null&&(s=i.next,s===i?t.pending=null:(s=s.next,i.next=s,wg(t,s)))}function yd(t,i,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=s,xg(i),i=i.next;while(i!==l)}t.action=null}function xg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Rg(t,i){return i}function Cg(t,i){if(tt){var s=ft.formState;if(s!==null){e:{var l=Le;if(tt){if(wt){t:{for(var f=wt,m=_r;f.nodeType!==8;){if(!m){f=null;break t}if(f=ir(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){wt=ir(f.nextSibling),l=f.data==="F!";break e}}Ta(l)}l=!1}l&&(i=s[0])}}return s=Tn(),s.memoizedState=s.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rg,lastRenderedState:i},s.queue=l,s=Qg.bind(null,Le,l),l.dispatch=s,l=gd(!1),m=Sd.bind(null,Le,!1,l.queue),l=Tn(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,s=L2.bind(null,Le,f,m,s),f.dispatch=s,l.memoizedState=t,[i,s,!1]}function Ng(t){var i=kt();return Og(i,ot,t)}function Og(t,i,s){if(i=md(t,i,Rg)[0],t=Hu(Xr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=$o(i)}catch(x){throw x===Uo?Pu:x}else l=i;i=kt();var f=i.queue,m=f.dispatch;return s!==i.memoizedState&&(Le.flags|=2048,Ts(9,qu(),z2.bind(null,f,s),null)),[l,m,t]}function z2(t,i){t.action=i}function Ig(t){var i=kt(),s=ot;if(s!==null)return Og(i,s,t);kt(),i=i.memoizedState,s=kt();var l=s.queue.dispatch;return s.memoizedState=t,[i,l,!1]}function Ts(t,i,s,l){return t={tag:t,create:s,deps:l,inst:i,next:null},i=Le.updateQueue,i===null&&(i=dd(),Le.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,i.lastEffect=t),t}function qu(){return{destroy:void 0,resource:void 0}}function Dg(){return kt().memoizedState}function Fu(t,i,s,l){var f=Tn();l=l===void 0?null:l,Le.flags|=t,f.memoizedState=Ts(1|i,qu(),s,l)}function Qo(t,i,s,l){var f=kt();l=l===void 0?null:l;var m=f.memoizedState.inst;ot!==null&&l!==null&&od(l,ot.memoizedState.deps)?f.memoizedState=Ts(i,m,s,l):(Le.flags|=t,f.memoizedState=Ts(1|i,m,s,l))}function jg(t,i){Fu(8390656,8,t,i)}function Mg(t,i){Qo(2048,8,t,i)}function kg(t,i){return Qo(4,2,t,i)}function Pg(t,i){return Qo(4,4,t,i)}function Vg(t,i){if(typeof i=="function"){t=t();var s=i(t);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Lg(t,i,s){s=s!=null?s.concat([t]):null,Qo(4,4,Vg.bind(null,i,t),s)}function vd(){}function zg(t,i){var s=kt();i=i===void 0?null:i;var l=s.memoizedState;return i!==null&&od(i,l[1])?l[0]:(s.memoizedState=[t,i],t)}function Ug(t,i){var s=kt();i=i===void 0?null:i;var l=s.memoizedState;if(i!==null&&od(i,l[1]))return l[0];if(l=t(),Ca){Lt(!0);try{t()}finally{Lt(!1)}}return s.memoizedState=[l,i],l}function _d(t,i,s){return s===void 0||(Ti&1073741824)!==0?t.memoizedState=i:(t.memoizedState=s,t=qy(),Le.lanes|=t,Ii|=t,s)}function Bg(t,i,s,l){return Nn(s,i)?s:Es.current!==null?(t=_d(t,s,l),Nn(t,i)||(Qt=!0),t):(Ti&42)===0?(Qt=!0,t.memoizedState=s):(t=qy(),Le.lanes|=t,Ii|=t,i)}function Hg(t,i,s,l,f){var m=w.p;w.p=m!==0&&8>m?m:8;var x=$.T,I={};$.T=I,Sd(t,!1,i,s);try{var H=f(),te=$.S;if(te!==null&&te(I,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ue=k2(H,l);Ko(t,i,ue,Mn(t))}else Ko(t,i,l,Mn(t))}catch(de){Ko(t,i,{then:function(){},status:"rejected",reason:de},Mn())}finally{w.p=m,$.T=x}}function U2(){}function bd(t,i,s,l){if(t.tag!==5)throw Error(a(476));var f=qg(t).queue;Hg(t,f,i,ge,s===null?U2:function(){return Fg(t),s(l)})}function qg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:ge},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:s},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Fg(t){var i=qg(t).next.queue;Ko(t,i,{},Mn())}function Ed(){return fn(dl)}function Gg(){return kt().memoizedState}function $g(){return kt().memoizedState}function B2(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var s=Mn();t=Si(s);var l=wi(i,t,s);l!==null&&(kn(l,i,s),Ho(l,i,s)),i={cache:Wf()},t.payload=i;return}i=i.return}}function H2(t,i,s){var l=Mn();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Gu(t)?Kg(i,s):(s=Bf(t,i,s,l),s!==null&&(kn(s,t,l),Yg(s,i,l)))}function Qg(t,i,s){var l=Mn();Ko(t,i,s,l)}function Ko(t,i,s,l){var f={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Gu(t))Kg(i,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var x=i.lastRenderedState,I=m(x,s);if(f.hasEagerState=!0,f.eagerState=I,Nn(I,x))return Cu(t,i,f,0),ft===null&&Ru(),!1}catch{}finally{}if(s=Bf(t,i,f,l),s!==null)return kn(s,t,l),Yg(s,i,l),!0}return!1}function Sd(t,i,s,l){if(l={lane:2,revertLane:eh(),action:l,hasEagerState:!1,eagerState:null,next:null},Gu(t)){if(i)throw Error(a(479))}else i=Bf(t,s,l,2),i!==null&&kn(i,t,2)}function Gu(t){var i=t.alternate;return t===Le||i!==null&&i===Le}function Kg(t,i){Ss=zu=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function Yg(t,i,s){if((s&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,go(t,s)}}var $u={readContext:fn,use:Bu,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},Xg={readContext:fn,use:Bu,useCallback:function(t,i){return Tn().memoizedState=[t,i===void 0?null:i],t},useContext:fn,useEffect:jg,useImperativeHandle:function(t,i,s){s=s!=null?s.concat([t]):null,Fu(4194308,4,Vg.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Fu(4194308,4,t,i)},useInsertionEffect:function(t,i){Fu(4,2,t,i)},useMemo:function(t,i){var s=Tn();i=i===void 0?null:i;var l=t();if(Ca){Lt(!0);try{t()}finally{Lt(!1)}}return s.memoizedState=[l,i],l},useReducer:function(t,i,s){var l=Tn();if(s!==void 0){var f=s(i);if(Ca){Lt(!0);try{s(i)}finally{Lt(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=H2.bind(null,Le,t),[l.memoizedState,t]},useRef:function(t){var i=Tn();return t={current:t},i.memoizedState=t},useState:function(t){t=gd(t);var i=t.queue,s=Qg.bind(null,Le,i);return i.dispatch=s,[t.memoizedState,s]},useDebugValue:vd,useDeferredValue:function(t,i){var s=Tn();return _d(s,t,i)},useTransition:function(){var t=gd(!1);return t=Hg.bind(null,Le,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,s){var l=Le,f=Tn();if(tt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=i(),ft===null)throw Error(a(349));(Xe&124)!==0||yg(l,i,s)}f.memoizedState=s;var m={value:s,getSnapshot:i};return f.queue=m,jg(_g.bind(null,l,m,t),[t]),l.flags|=2048,Ts(9,qu(),vg.bind(null,l,m,s,i),null),s},useId:function(){var t=Tn(),i=ft.identifierPrefix;if(tt){var s=Qr,l=$r;s=(l&~(1<<32-cn(l)-1)).toString(32)+s,i="«"+i+"R"+s,s=Uu++,0<s&&(i+="H"+s.toString(32)),i+="»"}else s=P2++,i="«"+i+"r"+s.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Ed,useFormState:Cg,useActionState:Cg,useOptimistic:function(t){var i=Tn();i.memoizedState=i.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=Sd.bind(null,Le,!0,s),s.dispatch=i,[t,i]},useMemoCache:hd,useCacheRefresh:function(){return Tn().memoizedState=B2.bind(null,Le)}},Wg={readContext:fn,use:Bu,useCallback:zg,useContext:fn,useEffect:Mg,useImperativeHandle:Lg,useInsertionEffect:kg,useLayoutEffect:Pg,useMemo:Ug,useReducer:Hu,useRef:Dg,useState:function(){return Hu(Xr)},useDebugValue:vd,useDeferredValue:function(t,i){var s=kt();return Bg(s,ot.memoizedState,t,i)},useTransition:function(){var t=Hu(Xr)[0],i=kt().memoizedState;return[typeof t=="boolean"?t:$o(t),i]},useSyncExternalStore:gg,useId:Gg,useHostTransitionStatus:Ed,useFormState:Ng,useActionState:Ng,useOptimistic:function(t,i){var s=kt();return Sg(s,ot,t,i)},useMemoCache:hd,useCacheRefresh:$g},q2={readContext:fn,use:Bu,useCallback:zg,useContext:fn,useEffect:Mg,useImperativeHandle:Lg,useInsertionEffect:kg,useLayoutEffect:Pg,useMemo:Ug,useReducer:pd,useRef:Dg,useState:function(){return pd(Xr)},useDebugValue:vd,useDeferredValue:function(t,i){var s=kt();return ot===null?_d(s,t,i):Bg(s,ot.memoizedState,t,i)},useTransition:function(){var t=pd(Xr)[0],i=kt().memoizedState;return[typeof t=="boolean"?t:$o(t),i]},useSyncExternalStore:gg,useId:Gg,useHostTransitionStatus:Ed,useFormState:Ig,useActionState:Ig,useOptimistic:function(t,i){var s=kt();return ot!==null?Sg(s,ot,t,i):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:hd,useCacheRefresh:$g},As=null,Yo=0;function Qu(t){var i=Yo;return Yo+=1,As===null&&(As=[]),lg(As,t,i)}function Xo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ku(t,i){throw i.$$typeof===E?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Zg(t){var i=t._init;return i(t._payload)}function Jg(t){function i(X,K){if(t){var ee=X.deletions;ee===null?(X.deletions=[K],X.flags|=16):ee.push(K)}}function s(X,K){if(!t)return null;for(;K!==null;)i(X,K),K=K.sibling;return null}function l(X){for(var K=new Map;X!==null;)X.key!==null?K.set(X.key,X):K.set(X.index,X),X=X.sibling;return K}function f(X,K){return X=Gr(X,K),X.index=0,X.sibling=null,X}function m(X,K,ee){return X.index=ee,t?(ee=X.alternate,ee!==null?(ee=ee.index,ee<K?(X.flags|=67108866,K):ee):(X.flags|=67108866,K)):(X.flags|=1048576,K)}function x(X){return t&&X.alternate===null&&(X.flags|=67108866),X}function I(X,K,ee,fe){return K===null||K.tag!==6?(K=qf(ee,X.mode,fe),K.return=X,K):(K=f(K,ee),K.return=X,K)}function H(X,K,ee,fe){var Ee=ee.type;return Ee===B?ue(X,K,ee.props.children,fe,ee.key):K!==null&&(K.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===O&&Zg(Ee)===K.type)?(K=f(K,ee.props),Xo(K,ee),K.return=X,K):(K=Ou(ee.type,ee.key,ee.props,null,X.mode,fe),Xo(K,ee),K.return=X,K)}function te(X,K,ee,fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==ee.containerInfo||K.stateNode.implementation!==ee.implementation?(K=Ff(ee,X.mode,fe),K.return=X,K):(K=f(K,ee.children||[]),K.return=X,K)}function ue(X,K,ee,fe,Ee){return K===null||K.tag!==7?(K=ba(ee,X.mode,fe,Ee),K.return=X,K):(K=f(K,ee),K.return=X,K)}function de(X,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=qf(""+K,X.mode,ee),K.return=X,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return ee=Ou(K.type,K.key,K.props,null,X.mode,ee),Xo(ee,K),ee.return=X,ee;case D:return K=Ff(K,X.mode,ee),K.return=X,K;case O:var fe=K._init;return K=fe(K._payload),de(X,K,ee)}if(me(K)||k(K))return K=ba(K,X.mode,ee,null),K.return=X,K;if(typeof K.then=="function")return de(X,Qu(K),ee);if(K.$$typeof===ne)return de(X,Mu(X,K),ee);Ku(X,K)}return null}function ie(X,K,ee,fe){var Ee=K!==null?K.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ee!==null?null:I(X,K,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case R:return ee.key===Ee?H(X,K,ee,fe):null;case D:return ee.key===Ee?te(X,K,ee,fe):null;case O:return Ee=ee._init,ee=Ee(ee._payload),ie(X,K,ee,fe)}if(me(ee)||k(ee))return Ee!==null?null:ue(X,K,ee,fe,null);if(typeof ee.then=="function")return ie(X,K,Qu(ee),fe);if(ee.$$typeof===ne)return ie(X,K,Mu(X,ee),fe);Ku(X,ee)}return null}function se(X,K,ee,fe,Ee){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return X=X.get(ee)||null,I(K,X,""+fe,Ee);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case R:return X=X.get(fe.key===null?ee:fe.key)||null,H(K,X,fe,Ee);case D:return X=X.get(fe.key===null?ee:fe.key)||null,te(K,X,fe,Ee);case O:var Be=fe._init;return fe=Be(fe._payload),se(X,K,ee,fe,Ee)}if(me(fe)||k(fe))return X=X.get(ee)||null,ue(K,X,fe,Ee,null);if(typeof fe.then=="function")return se(X,K,ee,Qu(fe),Ee);if(fe.$$typeof===ne)return se(X,K,ee,Mu(K,fe),Ee);Ku(K,fe)}return null}function Ne(X,K,ee,fe){for(var Ee=null,Be=null,Te=K,Ce=K=0,Yt=null;Te!==null&&Ce<ee.length;Ce++){Te.index>Ce?(Yt=Te,Te=null):Yt=Te.sibling;var Je=ie(X,Te,ee[Ce],fe);if(Je===null){Te===null&&(Te=Yt);break}t&&Te&&Je.alternate===null&&i(X,Te),K=m(Je,K,Ce),Be===null?Ee=Je:Be.sibling=Je,Be=Je,Te=Yt}if(Ce===ee.length)return s(X,Te),tt&&Sa(X,Ce),Ee;if(Te===null){for(;Ce<ee.length;Ce++)Te=de(X,ee[Ce],fe),Te!==null&&(K=m(Te,K,Ce),Be===null?Ee=Te:Be.sibling=Te,Be=Te);return tt&&Sa(X,Ce),Ee}for(Te=l(Te);Ce<ee.length;Ce++)Yt=se(Te,X,Ce,ee[Ce],fe),Yt!==null&&(t&&Yt.alternate!==null&&Te.delete(Yt.key===null?Ce:Yt.key),K=m(Yt,K,Ce),Be===null?Ee=Yt:Be.sibling=Yt,Be=Yt);return t&&Te.forEach(function(Ui){return i(X,Ui)}),tt&&Sa(X,Ce),Ee}function xe(X,K,ee,fe){if(ee==null)throw Error(a(151));for(var Ee=null,Be=null,Te=K,Ce=K=0,Yt=null,Je=ee.next();Te!==null&&!Je.done;Ce++,Je=ee.next()){Te.index>Ce?(Yt=Te,Te=null):Yt=Te.sibling;var Ui=ie(X,Te,Je.value,fe);if(Ui===null){Te===null&&(Te=Yt);break}t&&Te&&Ui.alternate===null&&i(X,Te),K=m(Ui,K,Ce),Be===null?Ee=Ui:Be.sibling=Ui,Be=Ui,Te=Yt}if(Je.done)return s(X,Te),tt&&Sa(X,Ce),Ee;if(Te===null){for(;!Je.done;Ce++,Je=ee.next())Je=de(X,Je.value,fe),Je!==null&&(K=m(Je,K,Ce),Be===null?Ee=Je:Be.sibling=Je,Be=Je);return tt&&Sa(X,Ce),Ee}for(Te=l(Te);!Je.done;Ce++,Je=ee.next())Je=se(Te,X,Ce,Je.value,fe),Je!==null&&(t&&Je.alternate!==null&&Te.delete(Je.key===null?Ce:Je.key),K=m(Je,K,Ce),Be===null?Ee=Je:Be.sibling=Je,Be=Je);return t&&Te.forEach(function(FE){return i(X,FE)}),tt&&Sa(X,Ce),Ee}function ut(X,K,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===B&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case R:e:{for(var Ee=ee.key;K!==null;){if(K.key===Ee){if(Ee=ee.type,Ee===B){if(K.tag===7){s(X,K.sibling),fe=f(K,ee.props.children),fe.return=X,X=fe;break e}}else if(K.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===O&&Zg(Ee)===K.type){s(X,K.sibling),fe=f(K,ee.props),Xo(fe,ee),fe.return=X,X=fe;break e}s(X,K);break}else i(X,K);K=K.sibling}ee.type===B?(fe=ba(ee.props.children,X.mode,fe,ee.key),fe.return=X,X=fe):(fe=Ou(ee.type,ee.key,ee.props,null,X.mode,fe),Xo(fe,ee),fe.return=X,X=fe)}return x(X);case D:e:{for(Ee=ee.key;K!==null;){if(K.key===Ee)if(K.tag===4&&K.stateNode.containerInfo===ee.containerInfo&&K.stateNode.implementation===ee.implementation){s(X,K.sibling),fe=f(K,ee.children||[]),fe.return=X,X=fe;break e}else{s(X,K);break}else i(X,K);K=K.sibling}fe=Ff(ee,X.mode,fe),fe.return=X,X=fe}return x(X);case O:return Ee=ee._init,ee=Ee(ee._payload),ut(X,K,ee,fe)}if(me(ee))return Ne(X,K,ee,fe);if(k(ee)){if(Ee=k(ee),typeof Ee!="function")throw Error(a(150));return ee=Ee.call(ee),xe(X,K,ee,fe)}if(typeof ee.then=="function")return ut(X,K,Qu(ee),fe);if(ee.$$typeof===ne)return ut(X,K,Mu(X,ee),fe);Ku(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,K!==null&&K.tag===6?(s(X,K.sibling),fe=f(K,ee),fe.return=X,X=fe):(s(X,K),fe=qf(ee,X.mode,fe),fe.return=X,X=fe),x(X)):s(X,K)}return function(X,K,ee,fe){try{Yo=0;var Ee=ut(X,K,ee,fe);return As=null,Ee}catch(Te){if(Te===Uo||Te===Pu)throw Te;var Be=On(29,Te,null,X.mode);return Be.lanes=fe,Be.return=X,Be}finally{}}}var xs=Jg(!0),ey=Jg(!1),Qn=M(null),br=null;function Ai(t){var i=t.alternate;W(qt,qt.current&1),W(Qn,t),br===null&&(i===null||Es.current!==null||i.memoizedState!==null)&&(br=t)}function ty(t){if(t.tag===22){if(W(qt,qt.current),W(Qn,t),br===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(br=t)}}else xi()}function xi(){W(qt,qt.current),W(Qn,Qn.current)}function Wr(t){Q(Qn),br===t&&(br=null),Q(qt)}var qt=M(0);function Yu(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||dh(s)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function wd(t,i,s,l){i=t.memoizedState,s=s(l,i),s=s==null?i:b({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Td={enqueueSetState:function(t,i,s){t=t._reactInternals;var l=Mn(),f=Si(l);f.payload=i,s!=null&&(f.callback=s),i=wi(t,f,l),i!==null&&(kn(i,t,l),Ho(i,t,l))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var l=Mn(),f=Si(l);f.tag=1,f.payload=i,s!=null&&(f.callback=s),i=wi(t,f,l),i!==null&&(kn(i,t,l),Ho(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Mn(),l=Si(s);l.tag=2,i!=null&&(l.callback=i),i=wi(t,l,s),i!==null&&(kn(i,t,s),Ho(i,t,s))}};function ny(t,i,s,l,f,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,x):i.prototype&&i.prototype.isPureReactComponent?!Do(s,l)||!Do(f,m):!0}function ry(t,i,s,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,l),i.state!==t&&Td.enqueueReplaceState(i,i.state,null)}function Na(t,i){var s=i;if("ref"in i){s={};for(var l in i)l!=="ref"&&(s[l]=i[l])}if(t=t.defaultProps){s===i&&(s=b({},s));for(var f in t)s[f]===void 0&&(s[f]=t[f])}return s}var Xu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function iy(t){Xu(t)}function ay(t){console.error(t)}function sy(t){Xu(t)}function Wu(t,i){try{var s=t.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function oy(t,i,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Ad(t,i,s){return s=Si(s),s.tag=3,s.payload={element:null},s.callback=function(){Wu(t,i)},s}function ly(t){return t=Si(t),t.tag=3,t}function uy(t,i,s,l){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){oy(i,s,l)}}var x=s.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){oy(i,s,l),typeof f!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var I=l.stack;this.componentDidCatch(l.value,{componentStack:I!==null?I:""})})}function F2(t,i,s,l,f){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=s.alternate,i!==null&&Vo(i,s,f,!0),s=Qn.current,s!==null){switch(s.tag){case 13:return br===null?Yd():s.alternate===null&&Tt===0&&(Tt=3),s.flags&=-257,s.flags|=65536,s.lanes=f,l===ed?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([l]):i.add(l),Wd(t,l,f)),!1;case 22:return s.flags|=65536,l===ed?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([l]):s.add(l)),Wd(t,l,f)),!1}throw Error(a(435,s.tag))}return Wd(t,l,f),Yd(),!1}if(tt)return i=Qn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Qf&&(t=Error(a(422),{cause:l}),Po(qn(t,s)))):(l!==Qf&&(i=Error(a(423),{cause:l}),Po(qn(i,s))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=qn(l,s),f=Ad(t.stateNode,l,f),rd(t,f),Tt!==4&&(Tt=2)),!1;var m=Error(a(520),{cause:l});if(m=qn(m,s),rl===null?rl=[m]:rl.push(m),Tt!==4&&(Tt=2),i===null)return!0;l=qn(l,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,t=f&-f,s.lanes|=t,t=Ad(s.stateNode,l,t),rd(s,t),!1;case 1:if(i=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Di===null||!Di.has(m))))return s.flags|=65536,f&=-f,s.lanes|=f,f=ly(f),uy(f,t,s,l),rd(s,f),!1}s=s.return}while(s!==null);return!1}var cy=Error(a(461)),Qt=!1;function nn(t,i,s,l){i.child=t===null?ey(i,null,s,l):xs(i,t.child,s,l)}function fy(t,i,s,l,f){s=s.render;var m=i.ref;if("ref"in l){var x={};for(var I in l)I!=="ref"&&(x[I]=l[I])}else x=l;return xa(i),l=ld(t,i,s,x,m,f),I=ud(),t!==null&&!Qt?(cd(t,i,f),Zr(t,i,f)):(tt&&I&&Gf(i),i.flags|=1,nn(t,i,l,f),i.child)}function dy(t,i,s,l,f){if(t===null){var m=s.type;return typeof m=="function"&&!Hf(m)&&m.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=m,hy(t,i,m,l,f)):(t=Ou(s.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(m=t.child,!jd(t,f)){var x=m.memoizedProps;if(s=s.compare,s=s!==null?s:Do,s(x,l)&&t.ref===i.ref)return Zr(t,i,f)}return i.flags|=1,t=Gr(m,l),t.ref=i.ref,t.return=i,i.child=t}function hy(t,i,s,l,f){if(t!==null){var m=t.memoizedProps;if(Do(m,l)&&t.ref===i.ref)if(Qt=!1,i.pendingProps=l=m,jd(t,f))(t.flags&131072)!==0&&(Qt=!0);else return i.lanes=t.lanes,Zr(t,i,f)}return xd(t,i,s,l,f)}function my(t,i,s){var l=i.pendingProps,f=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=m!==null?m.baseLanes|s:s,t!==null){for(f=i.child=t.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~l}else i.childLanes=0,i.child=null;return py(t,i,l,s)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ku(i,m!==null?m.cachePool:null),m!==null?hg(i,m):ad(),ty(i);else return i.lanes=i.childLanes=536870912,py(t,i,m!==null?m.baseLanes|s:s,s)}else m!==null?(ku(i,m.cachePool),hg(i,m),xi(),i.memoizedState=null):(t!==null&&ku(i,null),ad(),xi());return nn(t,i,f,s),i.child}function py(t,i,s,l){var f=Jf();return f=f===null?null:{parent:Ht._currentValue,pool:f},i.memoizedState={baseLanes:s,cachePool:f},t!==null&&ku(i,null),ad(),ty(i),t!==null&&Vo(t,i,l,!0),null}function Zu(t,i){var s=i.ref;if(s===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(i.flags|=4194816)}}function xd(t,i,s,l,f){return xa(i),s=ld(t,i,s,l,void 0,f),l=ud(),t!==null&&!Qt?(cd(t,i,f),Zr(t,i,f)):(tt&&l&&Gf(i),i.flags|=1,nn(t,i,s,f),i.child)}function gy(t,i,s,l,f,m){return xa(i),i.updateQueue=null,s=pg(i,l,s,f),mg(t),l=ud(),t!==null&&!Qt?(cd(t,i,m),Zr(t,i,m)):(tt&&l&&Gf(i),i.flags|=1,nn(t,i,s,m),i.child)}function yy(t,i,s,l,f){if(xa(i),i.stateNode===null){var m=gs,x=s.contextType;typeof x=="object"&&x!==null&&(m=fn(x)),m=new s(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Td,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},td(i),x=s.contextType,m.context=typeof x=="object"&&x!==null?fn(x):gs,m.state=i.memoizedState,x=s.getDerivedStateFromProps,typeof x=="function"&&(wd(i,s,x,l),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Td.enqueueReplaceState(m,m.state,null),Fo(i,l,m,f),qo(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){m=i.stateNode;var I=i.memoizedProps,H=Na(s,I);m.props=H;var te=m.context,ue=s.contextType;x=gs,typeof ue=="object"&&ue!==null&&(x=fn(ue));var de=s.getDerivedStateFromProps;ue=typeof de=="function"||typeof m.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,ue||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(I||te!==x)&&ry(i,m,l,x),Ei=!1;var ie=i.memoizedState;m.state=ie,Fo(i,l,m,f),qo(),te=i.memoizedState,I||ie!==te||Ei?(typeof de=="function"&&(wd(i,s,de,l),te=i.memoizedState),(H=Ei||ny(i,s,H,l,ie,te,x))?(ue||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=te),m.props=l,m.state=te,m.context=x,l=H):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,nd(t,i),x=i.memoizedProps,ue=Na(s,x),m.props=ue,de=i.pendingProps,ie=m.context,te=s.contextType,H=gs,typeof te=="object"&&te!==null&&(H=fn(te)),I=s.getDerivedStateFromProps,(te=typeof I=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==de||ie!==H)&&ry(i,m,l,H),Ei=!1,ie=i.memoizedState,m.state=ie,Fo(i,l,m,f),qo();var se=i.memoizedState;x!==de||ie!==se||Ei||t!==null&&t.dependencies!==null&&ju(t.dependencies)?(typeof I=="function"&&(wd(i,s,I,l),se=i.memoizedState),(ue=Ei||ny(i,s,ue,l,ie,se,H)||t!==null&&t.dependencies!==null&&ju(t.dependencies))?(te||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,se,H),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,se,H)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=se),m.props=l,m.state=se,m.context=H,l=ue):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&ie===t.memoizedState||(i.flags|=1024),l=!1)}return m=l,Zu(t,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,t!==null&&l?(i.child=xs(i,t.child,null,f),i.child=xs(i,null,s,f)):nn(t,i,s,f),i.memoizedState=m.state,t=i.child):t=Zr(t,i,f),t}function vy(t,i,s,l){return ko(),i.flags|=256,nn(t,i,s,l),i.child}var Rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cd(t){return{baseLanes:t,cachePool:ag()}}function Nd(t,i,s){return t=t!==null?t.childLanes&~s:0,i&&(t|=Kn),t}function _y(t,i,s){var l=i.pendingProps,f=!1,m=(i.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(qt.current&2)!==0),x&&(f=!0,i.flags&=-129),x=(i.flags&32)!==0,i.flags&=-33,t===null){if(tt){if(f?Ai(i):xi(),tt){var I=wt,H;if(H=I){e:{for(H=I,I=_r;H.nodeType!==8;){if(!I){I=null;break e}if(H=ir(H.nextSibling),H===null){I=null;break e}}I=H}I!==null?(i.memoizedState={dehydrated:I,treeContext:Ea!==null?{id:$r,overflow:Qr}:null,retryLane:536870912,hydrationErrors:null},H=On(18,null,null,0),H.stateNode=I,H.return=i,i.child=H,En=i,wt=null,H=!0):H=!1}H||Ta(i)}if(I=i.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return dh(I)?i.lanes=32:i.lanes=536870912,null;Wr(i)}return I=l.children,l=l.fallback,f?(xi(),f=i.mode,I=Ju({mode:"hidden",children:I},f),l=ba(l,f,s,null),I.return=i,l.return=i,I.sibling=l,i.child=I,f=i.child,f.memoizedState=Cd(s),f.childLanes=Nd(t,x,s),i.memoizedState=Rd,l):(Ai(i),Od(i,I))}if(H=t.memoizedState,H!==null&&(I=H.dehydrated,I!==null)){if(m)i.flags&256?(Ai(i),i.flags&=-257,i=Id(t,i,s)):i.memoizedState!==null?(xi(),i.child=t.child,i.flags|=128,i=null):(xi(),f=l.fallback,I=i.mode,l=Ju({mode:"visible",children:l.children},I),f=ba(f,I,s,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,xs(i,t.child,null,s),l=i.child,l.memoizedState=Cd(s),l.childLanes=Nd(t,x,s),i.memoizedState=Rd,i=f);else if(Ai(i),dh(I)){if(x=I.nextSibling&&I.nextSibling.dataset,x)var te=x.dgst;x=te,l=Error(a(419)),l.stack="",l.digest=x,Po({value:l,source:null,stack:null}),i=Id(t,i,s)}else if(Qt||Vo(t,i,s,!1),x=(s&t.childLanes)!==0,Qt||x){if(x=ft,x!==null&&(l=s&-s,l=(l&42)!==0?1:hi(l),l=(l&(x.suspendedLanes|s))!==0?0:l,l!==0&&l!==H.retryLane))throw H.retryLane=l,ps(t,l),kn(x,t,l),cy;I.data==="$?"||Yd(),i=Id(t,i,s)}else I.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=H.treeContext,wt=ir(I.nextSibling),En=i,tt=!0,wa=null,_r=!1,t!==null&&(Gn[$n++]=$r,Gn[$n++]=Qr,Gn[$n++]=Ea,$r=t.id,Qr=t.overflow,Ea=i),i=Od(i,l.children),i.flags|=4096);return i}return f?(xi(),f=l.fallback,I=i.mode,H=t.child,te=H.sibling,l=Gr(H,{mode:"hidden",children:l.children}),l.subtreeFlags=H.subtreeFlags&65011712,te!==null?f=Gr(te,f):(f=ba(f,I,s,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,I=t.child.memoizedState,I===null?I=Cd(s):(H=I.cachePool,H!==null?(te=Ht._currentValue,H=H.parent!==te?{parent:te,pool:te}:H):H=ag(),I={baseLanes:I.baseLanes|s,cachePool:H}),f.memoizedState=I,f.childLanes=Nd(t,x,s),i.memoizedState=Rd,l):(Ai(i),s=t.child,t=s.sibling,s=Gr(s,{mode:"visible",children:l.children}),s.return=i,s.sibling=null,t!==null&&(x=i.deletions,x===null?(i.deletions=[t],i.flags|=16):x.push(t)),i.child=s,i.memoizedState=null,s)}function Od(t,i){return i=Ju({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ju(t,i){return t=On(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Id(t,i,s){return xs(i,t.child,null,s),t=Od(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function by(t,i,s){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Yf(t.return,i,s)}function Dd(t,i,s,l,f){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=s,m.tailMode=f)}function Ey(t,i,s){var l=i.pendingProps,f=l.revealOrder,m=l.tail;if(nn(t,i,l.children,s),l=qt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,s,i);else if(t.tag===19)by(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(W(qt,l),f){case"forwards":for(s=i.child,f=null;s!==null;)t=s.alternate,t!==null&&Yu(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),Dd(i,!1,f,s,m);break;case"backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&Yu(t)===null){i.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}Dd(i,!0,s,null,m);break;case"together":Dd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Zr(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),Ii|=i.lanes,(s&i.childLanes)===0)if(t!==null){if(Vo(t,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,s=Gr(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Gr(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function jd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ju(t)))}function G2(t,i,s){switch(i.tag){case 3:Se(i,i.stateNode.containerInfo),bi(i,Ht,t.memoizedState.cache),ko();break;case 27:case 5:ke(i);break;case 4:Se(i,i.stateNode.containerInfo);break;case 10:bi(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ai(i),i.flags|=128,null):(s&i.child.childLanes)!==0?_y(t,i,s):(Ai(i),t=Zr(t,i,s),t!==null?t.sibling:null);Ai(i);break;case 19:var f=(t.flags&128)!==0;if(l=(s&i.childLanes)!==0,l||(Vo(t,i,s,!1),l=(s&i.childLanes)!==0),f){if(l)return Ey(t,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),W(qt,qt.current),l)break;return null;case 22:case 23:return i.lanes=0,my(t,i,s);case 24:bi(i,Ht,t.memoizedState.cache)}return Zr(t,i,s)}function Sy(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps)Qt=!0;else{if(!jd(t,s)&&(i.flags&128)===0)return Qt=!1,G2(t,i,s);Qt=(t.flags&131072)!==0}else Qt=!1,tt&&(i.flags&1048576)!==0&&Zp(i,Du,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")Hf(l)?(t=Na(l,t),i.tag=1,i=yy(null,i,l,t,s)):(i.tag=0,i=xd(null,i,l,t,s));else{if(l!=null){if(f=l.$$typeof,f===re){i.tag=11,i=fy(null,i,l,t,s);break e}else if(f===N){i.tag=14,i=dy(null,i,l,t,s);break e}}throw i=Z(l)||l,Error(a(306,i,""))}}return i;case 0:return xd(t,i,i.type,i.pendingProps,s);case 1:return l=i.type,f=Na(l,i.pendingProps),yy(t,i,l,f,s);case 3:e:{if(Se(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var m=i.memoizedState;f=m.element,nd(t,i),Fo(i,l,null,s);var x=i.memoizedState;if(l=x.cache,bi(i,Ht,l),l!==m.cache&&Xf(i,[Ht],s,!0),qo(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=vy(t,i,l,s);break e}else if(l!==f){f=qn(Error(a(424)),i),Po(f),i=vy(t,i,l,s);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(wt=ir(t.firstChild),En=i,tt=!0,wa=null,_r=!0,s=ey(i,null,l,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ko(),l===f){i=Zr(t,i,s);break e}nn(t,i,l,s)}i=i.child}return i;case 26:return Zu(t,i),t===null?(s=xv(i.type,null,i.pendingProps,null))?i.memoizedState=s:tt||(s=i.type,t=i.pendingProps,l=hc(le.current).createElement(s),l[zt]=i,l[Dt]=t,an(l,s,t),Rt(l),i.stateNode=l):i.memoizedState=xv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ke(i),t===null&&tt&&(l=i.stateNode=wv(i.type,i.pendingProps,le.current),En=i,_r=!0,f=wt,ki(i.type)?(hh=f,wt=ir(l.firstChild)):wt=f),nn(t,i,i.pendingProps.children,s),Zu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&tt&&((f=l=wt)&&(l=_E(l,i.type,i.pendingProps,_r),l!==null?(i.stateNode=l,En=i,wt=ir(l.firstChild),_r=!1,f=!0):f=!1),f||Ta(i)),ke(i),f=i.type,m=i.pendingProps,x=t!==null?t.memoizedProps:null,l=m.children,uh(f,m)?l=null:x!==null&&uh(f,x)&&(i.flags|=32),i.memoizedState!==null&&(f=ld(t,i,V2,null,null,s),dl._currentValue=f),Zu(t,i),nn(t,i,l,s),i.child;case 6:return t===null&&tt&&((t=s=wt)&&(s=bE(s,i.pendingProps,_r),s!==null?(i.stateNode=s,En=i,wt=null,t=!0):t=!1),t||Ta(i)),null;case 13:return _y(t,i,s);case 4:return Se(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=xs(i,null,l,s):nn(t,i,l,s),i.child;case 11:return fy(t,i,i.type,i.pendingProps,s);case 7:return nn(t,i,i.pendingProps,s),i.child;case 8:return nn(t,i,i.pendingProps.children,s),i.child;case 12:return nn(t,i,i.pendingProps.children,s),i.child;case 10:return l=i.pendingProps,bi(i,i.type,l.value),nn(t,i,l.children,s),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,xa(i),f=fn(f),l=l(f),i.flags|=1,nn(t,i,l,s),i.child;case 14:return dy(t,i,i.type,i.pendingProps,s);case 15:return hy(t,i,i.type,i.pendingProps,s);case 19:return Ey(t,i,s);case 31:return l=i.pendingProps,s=i.mode,l={mode:l.mode,children:l.children},t===null?(s=Ju(l,s),s.ref=i.ref,i.child=s,s.return=i,i=s):(s=Gr(t.child,l),s.ref=i.ref,i.child=s,s.return=i,i=s),i;case 22:return my(t,i,s);case 24:return xa(i),l=fn(Ht),t===null?(f=Jf(),f===null&&(f=ft,m=Wf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=s),f=m),i.memoizedState={parent:l,cache:f},td(i),bi(i,Ht,f)):((t.lanes&s)!==0&&(nd(t,i),Fo(i,null,null,s),qo()),f=t.memoizedState,m=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),bi(i,Ht,l)):(l=m.cache,bi(i,Ht,l),l!==f.cache&&Xf(i,[Ht],s,!0))),nn(t,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Jr(t){t.flags|=4}function wy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Iv(i)){if(i=Qn.current,i!==null&&((Xe&4194048)===Xe?br!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||i!==br))throw Bo=ed,sg;t.flags|=8192}}function ec(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?mo():536870912,t.lanes|=i,Os|=i)}function Wo(t,i){if(!tt)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function bt(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(i)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=s,i}function $2(t,i,s){var l=i.pendingProps;switch($f(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(i),null;case 1:return bt(i),null;case 3:return s=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Yr(Ht),Oe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Mo(i)?Jr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,tg())),bt(i),null;case 26:return s=i.memoizedState,t===null?(Jr(i),s!==null?(bt(i),wy(i,s)):(bt(i),i.flags&=-16777217)):s?s!==t.memoizedState?(Jr(i),bt(i),wy(i,s)):(bt(i),i.flags&=-16777217):(t.memoizedProps!==l&&Jr(i),bt(i),i.flags&=-16777217),null;case 27:ze(i),s=le.current;var f=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Jr(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return bt(i),null}t=ae.current,Mo(i)?Jp(i):(t=wv(f,l,s),i.stateNode=t,Jr(i))}return bt(i),null;case 5:if(ze(i),s=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Jr(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return bt(i),null}if(t=ae.current,Mo(i))Jp(i);else{switch(f=hc(le.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(s,{is:l.is}):f.createElement(s)}}t[zt]=i,t[Dt]=l;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=t;e:switch(an(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Jr(i)}}return bt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Jr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=le.current,Mo(i)){if(t=i.stateNode,s=i.memoizedProps,l=null,f=En,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[zt]=i,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||gv(t.nodeValue,s)),t||Ta(i)}else t=hc(t).createTextNode(l),t[zt]=i,i.stateNode=t}return bt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Mo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[zt]=i}else ko(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;bt(i),f=!1}else f=tg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Wr(i),i):(Wr(i),null)}if(Wr(i),(i.flags&128)!==0)return i.lanes=s,i;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return s!==t&&s&&(i.child.flags|=8192),ec(i,i.updateQueue),bt(i),null;case 4:return Oe(),t===null&&ih(i.stateNode.containerInfo),bt(i),null;case 10:return Yr(i.type),bt(i),null;case 19:if(Q(qt),f=i.memoizedState,f===null)return bt(i),null;if(l=(i.flags&128)!==0,m=f.rendering,m===null)if(l)Wo(f,!1);else{if(Tt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(m=Yu(t),m!==null){for(i.flags|=128,Wo(f,!1),t=m.updateQueue,i.updateQueue=t,ec(i,t),i.subtreeFlags=0,t=s,s=i.child;s!==null;)Wp(s,t),s=s.sibling;return W(qt,qt.current&1|2),i.child}t=t.sibling}f.tail!==null&&Re()>rc&&(i.flags|=128,l=!0,Wo(f,!1),i.lanes=4194304)}else{if(!l)if(t=Yu(m),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,ec(i,t),Wo(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!tt)return bt(i),null}else 2*Re()-f.renderingStartTime>rc&&s!==536870912&&(i.flags|=128,l=!0,Wo(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(t=f.last,t!==null?t.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Re(),i.sibling=null,t=qt.current,W(qt,l?t&1|2:t&1),i):(bt(i),null);case 22:case 23:return Wr(i),sd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(s&536870912)!==0&&(i.flags&128)===0&&(bt(i),i.subtreeFlags&6&&(i.flags|=8192)):bt(i),s=i.updateQueue,s!==null&&ec(i,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==s&&(i.flags|=2048),t!==null&&Q(Ra),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Yr(Ht),bt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Q2(t,i){switch($f(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Yr(Ht),Oe(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ze(i),null;case 13:if(Wr(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));ko()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Q(qt),null;case 4:return Oe(),null;case 10:return Yr(i.type),null;case 22:case 23:return Wr(i),sd(),t!==null&&Q(Ra),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Yr(Ht),null;case 25:return null;default:return null}}function Ty(t,i){switch($f(i),i.tag){case 3:Yr(Ht),Oe();break;case 26:case 27:case 5:ze(i);break;case 4:Oe();break;case 13:Wr(i);break;case 19:Q(qt);break;case 10:Yr(i.type);break;case 22:case 23:Wr(i),sd(),t!==null&&Q(Ra);break;case 24:Yr(Ht)}}function Zo(t,i){try{var s=i.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var f=l.next;s=f;do{if((s.tag&t)===t){l=void 0;var m=s.create,x=s.inst;l=m(),x.destroy=l}s=s.next}while(s!==f)}}catch(I){ct(i,i.return,I)}}function Ri(t,i,s){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var x=l.inst,I=x.destroy;if(I!==void 0){x.destroy=void 0,f=i;var H=s,te=I;try{te()}catch(ue){ct(f,H,ue)}}}l=l.next}while(l!==m)}}catch(ue){ct(i,i.return,ue)}}function Ay(t){var i=t.updateQueue;if(i!==null){var s=t.stateNode;try{dg(i,s)}catch(l){ct(t,t.return,l)}}}function xy(t,i,s){s.props=Na(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){ct(t,i,l)}}function Jo(t,i){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(f){ct(t,i,f)}}function Er(t,i){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(f){ct(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){ct(t,i,f)}else s.current=null}function Ry(t){var i=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(f){ct(t,t.return,f)}}function Md(t,i,s){try{var l=t.stateNode;mE(l,t.type,s,i),l[Dt]=i}catch(f){ct(t,t.return,f)}}function Cy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ki(t.type)||t.tag===4}function kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ki(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pd(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(t),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=dc));else if(l!==4&&(l===27&&ki(t.type)&&(s=t.stateNode,i=null),t=t.child,t!==null))for(Pd(t,i,s),t=t.sibling;t!==null;)Pd(t,i,s),t=t.sibling}function tc(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(l!==4&&(l===27&&ki(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(tc(t,i,s),t=t.sibling;t!==null;)tc(t,i,s),t=t.sibling}function Ny(t){var i=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);an(i,l,s),i[zt]=t,i[Dt]=s}catch(m){ct(t,t.return,m)}}var ei=!1,Nt=!1,Vd=!1,Oy=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function K2(t,i){if(t=t.containerInfo,oh=_c,t=Bp(t),kf(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var x=0,I=-1,H=-1,te=0,ue=0,de=t,ie=null;t:for(;;){for(var se;de!==s||f!==0&&de.nodeType!==3||(I=x+f),de!==m||l!==0&&de.nodeType!==3||(H=x+l),de.nodeType===3&&(x+=de.nodeValue.length),(se=de.firstChild)!==null;)ie=de,de=se;for(;;){if(de===t)break t;if(ie===s&&++te===f&&(I=x),ie===m&&++ue===l&&(H=x),(se=de.nextSibling)!==null)break;de=ie,ie=de.parentNode}de=se}s=I===-1||H===-1?null:{start:I,end:H}}else s=null}s=s||{start:0,end:0}}else s=null;for(lh={focusedElem:t,selectionRange:s},_c=!1,Kt=i;Kt!==null;)if(i=Kt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Kt=t;else for(;Kt!==null;){switch(i=Kt,m=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,s=i,f=m.memoizedProps,m=m.memoizedState,l=s.stateNode;try{var Ne=Na(s.type,f,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(Ne,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(xe){ct(s,s.return,xe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,s=t.nodeType,s===9)fh(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":fh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,Kt=t;break}Kt=i.return}}function Iy(t,i,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Ci(t,s),l&4&&Zo(5,s);break;case 1:if(Ci(t,s),l&4)if(t=s.stateNode,i===null)try{t.componentDidMount()}catch(x){ct(s,s.return,x)}else{var f=Na(s.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(x){ct(s,s.return,x)}}l&64&&Ay(s),l&512&&Jo(s,s.return);break;case 3:if(Ci(t,s),l&64&&(t=s.updateQueue,t!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{dg(t,i)}catch(x){ct(s,s.return,x)}}break;case 27:i===null&&l&4&&Ny(s);case 26:case 5:Ci(t,s),i===null&&l&4&&Ry(s),l&512&&Jo(s,s.return);break;case 12:Ci(t,s);break;case 13:Ci(t,s),l&4&&My(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=rE.bind(null,s),EE(t,s))));break;case 22:if(l=s.memoizedState!==null||ei,!l){i=i!==null&&i.memoizedState!==null||Nt,f=ei;var m=Nt;ei=l,(Nt=i)&&!m?Ni(t,s,(s.subtreeFlags&8772)!==0):Ci(t,s),ei=f,Nt=m}break;case 30:break;default:Ci(t,s)}}function Dy(t){var i=t.alternate;i!==null&&(t.alternate=null,Dy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&gi(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _t=null,An=!1;function ti(t,i,s){for(s=s.child;s!==null;)jy(t,i,s),s=s.sibling}function jy(t,i,s){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(yt,s)}catch{}switch(s.tag){case 26:Nt||Er(s,i),ti(t,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Nt||Er(s,i);var l=_t,f=An;ki(s.type)&&(_t=s.stateNode,An=!1),ti(t,i,s),ll(s.stateNode),_t=l,An=f;break;case 5:Nt||Er(s,i);case 6:if(l=_t,f=An,_t=null,ti(t,i,s),_t=l,An=f,_t!==null)if(An)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(s.stateNode)}catch(m){ct(s,i,m)}else try{_t.removeChild(s.stateNode)}catch(m){ct(s,i,m)}break;case 18:_t!==null&&(An?(t=_t,Ev(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),gl(t)):Ev(_t,s.stateNode));break;case 4:l=_t,f=An,_t=s.stateNode.containerInfo,An=!0,ti(t,i,s),_t=l,An=f;break;case 0:case 11:case 14:case 15:Nt||Ri(2,s,i),Nt||Ri(4,s,i),ti(t,i,s);break;case 1:Nt||(Er(s,i),l=s.stateNode,typeof l.componentWillUnmount=="function"&&xy(s,i,l)),ti(t,i,s);break;case 21:ti(t,i,s);break;case 22:Nt=(l=Nt)||s.memoizedState!==null,ti(t,i,s),Nt=l;break;default:ti(t,i,s)}}function My(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{gl(t)}catch(s){ct(i,i.return,s)}}function Y2(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Oy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Oy),i;default:throw Error(a(435,t.tag))}}function Ld(t,i){var s=Y2(t);i.forEach(function(l){var f=iE.bind(null,t,l);s.has(l)||(s.add(l),l.then(f,f))})}function In(t,i){var s=i.deletions;if(s!==null)for(var l=0;l<s.length;l++){var f=s[l],m=t,x=i,I=x;e:for(;I!==null;){switch(I.tag){case 27:if(ki(I.type)){_t=I.stateNode,An=!1;break e}break;case 5:_t=I.stateNode,An=!1;break e;case 3:case 4:_t=I.stateNode.containerInfo,An=!0;break e}I=I.return}if(_t===null)throw Error(a(160));jy(m,x,f),_t=null,An=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ky(i,t),i=i.sibling}var rr=null;function ky(t,i){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:In(i,t),Dn(t),l&4&&(Ri(3,t,t.return),Zo(3,t),Ri(5,t,t.return));break;case 1:In(i,t),Dn(t),l&512&&(Nt||s===null||Er(s,s.return)),l&64&&ei&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var f=rr;if(In(i,t),Dn(t),l&512&&(Nt||s===null||Er(s,s.return)),l&4){var m=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ia]||m[zt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),an(m,l,s),m[zt]=t,Rt(m),l=m;break e;case"link":var x=Nv("link","href",f).get(l+(s.href||""));if(x){for(var I=0;I<x.length;I++)if(m=x[I],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){x.splice(I,1);break t}}m=f.createElement(l),an(m,l,s),f.head.appendChild(m);break;case"meta":if(x=Nv("meta","content",f).get(l+(s.content||""))){for(I=0;I<x.length;I++)if(m=x[I],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){x.splice(I,1);break t}}m=f.createElement(l),an(m,l,s),f.head.appendChild(m);break;default:throw Error(a(468,l))}m[zt]=t,Rt(m),l=m}t.stateNode=l}else Ov(f,t.type,t.stateNode);else t.stateNode=Cv(f,l,t.memoizedProps);else m!==l?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,l===null?Ov(f,t.type,t.stateNode):Cv(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Md(t,t.memoizedProps,s.memoizedProps)}break;case 27:In(i,t),Dn(t),l&512&&(Nt||s===null||Er(s,s.return)),s!==null&&l&4&&Md(t,t.memoizedProps,s.memoizedProps);break;case 5:if(In(i,t),Dn(t),l&512&&(Nt||s===null||Er(s,s.return)),t.flags&32){f=t.stateNode;try{zn(f,"")}catch(se){ct(t,t.return,se)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Md(t,f,s!==null?s.memoizedProps:f)),l&1024&&(Vd=!0);break;case 6:if(In(i,t),Dn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(se){ct(t,t.return,se)}}break;case 3:if(gc=null,f=rr,rr=mc(i.containerInfo),In(i,t),rr=f,Dn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{gl(i.containerInfo)}catch(se){ct(t,t.return,se)}Vd&&(Vd=!1,Py(t));break;case 4:l=rr,rr=mc(t.stateNode.containerInfo),In(i,t),Dn(t),rr=l;break;case 12:In(i,t),Dn(t);break;case 13:In(i,t),Dn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Fd=Re()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ld(t,l)));break;case 22:f=t.memoizedState!==null;var H=s!==null&&s.memoizedState!==null,te=ei,ue=Nt;if(ei=te||f,Nt=ue||H,In(i,t),Nt=ue,ei=te,Dn(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(s===null||H||ei||Nt||Oa(t)),s=null,i=t;;){if(i.tag===5||i.tag===26){if(s===null){H=s=i;try{if(m=H.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{I=H.stateNode;var de=H.memoizedProps.style,ie=de!=null&&de.hasOwnProperty("display")?de.display:null;I.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(se){ct(H,H.return,se)}}}else if(i.tag===6){if(s===null){H=i;try{H.stateNode.nodeValue=f?"":H.memoizedProps}catch(se){ct(H,H.return,se)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Ld(t,s))));break;case 19:In(i,t),Dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ld(t,l)));break;case 30:break;case 21:break;default:In(i,t),Dn(t)}}function Dn(t){var i=t.flags;if(i&2){try{for(var s,l=t.return;l!==null;){if(Cy(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var f=s.stateNode,m=kd(t);tc(t,m,f);break;case 5:var x=s.stateNode;s.flags&32&&(zn(x,""),s.flags&=-33);var I=kd(t);tc(t,I,x);break;case 3:case 4:var H=s.stateNode.containerInfo,te=kd(t);Pd(t,te,H);break;default:throw Error(a(161))}}catch(ue){ct(t,t.return,ue)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Py(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Py(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Ci(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Iy(t,i.alternate,i),i=i.sibling}function Oa(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ri(4,i,i.return),Oa(i);break;case 1:Er(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&xy(i,i.return,s),Oa(i);break;case 27:ll(i.stateNode);case 26:case 5:Er(i,i.return),Oa(i);break;case 22:i.memoizedState===null&&Oa(i);break;case 30:Oa(i);break;default:Oa(i)}t=t.sibling}}function Ni(t,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,m=i,x=m.flags;switch(m.tag){case 0:case 11:case 15:Ni(f,m,s),Zo(4,m);break;case 1:if(Ni(f,m,s),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(te){ct(l,l.return,te)}if(l=m,f=l.updateQueue,f!==null){var I=l.stateNode;try{var H=f.shared.hiddenCallbacks;if(H!==null)for(f.shared.hiddenCallbacks=null,f=0;f<H.length;f++)fg(H[f],I)}catch(te){ct(l,l.return,te)}}s&&x&64&&Ay(m),Jo(m,m.return);break;case 27:Ny(m);case 26:case 5:Ni(f,m,s),s&&l===null&&x&4&&Ry(m),Jo(m,m.return);break;case 12:Ni(f,m,s);break;case 13:Ni(f,m,s),s&&x&4&&My(f,m);break;case 22:m.memoizedState===null&&Ni(f,m,s),Jo(m,m.return);break;case 30:break;default:Ni(f,m,s)}i=i.sibling}}function zd(t,i){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Lo(s))}function Ud(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Lo(t))}function Sr(t,i,s,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Vy(t,i,s,l),i=i.sibling}function Vy(t,i,s,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Sr(t,i,s,l),f&2048&&Zo(9,i);break;case 1:Sr(t,i,s,l);break;case 3:Sr(t,i,s,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Lo(t)));break;case 12:if(f&2048){Sr(t,i,s,l),t=i.stateNode;try{var m=i.memoizedProps,x=m.id,I=m.onPostCommit;typeof I=="function"&&I(x,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(H){ct(i,i.return,H)}}else Sr(t,i,s,l);break;case 13:Sr(t,i,s,l);break;case 23:break;case 22:m=i.stateNode,x=i.alternate,i.memoizedState!==null?m._visibility&2?Sr(t,i,s,l):el(t,i):m._visibility&2?Sr(t,i,s,l):(m._visibility|=2,Rs(t,i,s,l,(i.subtreeFlags&10256)!==0)),f&2048&&zd(x,i);break;case 24:Sr(t,i,s,l),f&2048&&Ud(i.alternate,i);break;default:Sr(t,i,s,l)}}function Rs(t,i,s,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=t,x=i,I=s,H=l,te=x.flags;switch(x.tag){case 0:case 11:case 15:Rs(m,x,I,H,f),Zo(8,x);break;case 23:break;case 22:var ue=x.stateNode;x.memoizedState!==null?ue._visibility&2?Rs(m,x,I,H,f):el(m,x):(ue._visibility|=2,Rs(m,x,I,H,f)),f&&te&2048&&zd(x.alternate,x);break;case 24:Rs(m,x,I,H,f),f&&te&2048&&Ud(x.alternate,x);break;default:Rs(m,x,I,H,f)}i=i.sibling}}function el(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=t,l=i,f=l.flags;switch(l.tag){case 22:el(s,l),f&2048&&zd(l.alternate,l);break;case 24:el(s,l),f&2048&&Ud(l.alternate,l);break;default:el(s,l)}i=i.sibling}}var tl=8192;function Cs(t){if(t.subtreeFlags&tl)for(t=t.child;t!==null;)Ly(t),t=t.sibling}function Ly(t){switch(t.tag){case 26:Cs(t),t.flags&tl&&t.memoizedState!==null&&ME(rr,t.memoizedState,t.memoizedProps);break;case 5:Cs(t);break;case 3:case 4:var i=rr;rr=mc(t.stateNode.containerInfo),Cs(t),rr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=tl,tl=16777216,Cs(t),tl=i):Cs(t));break;default:Cs(t)}}function zy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function nl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];Kt=l,By(l,t)}zy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Uy(t),t=t.sibling}function Uy(t){switch(t.tag){case 0:case 11:case 15:nl(t),t.flags&2048&&Ri(9,t,t.return);break;case 3:nl(t);break;case 12:nl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,nc(t)):nl(t);break;default:nl(t)}}function nc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];Kt=l,By(l,t)}zy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ri(8,i,i.return),nc(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,nc(i));break;default:nc(i)}t=t.sibling}}function By(t,i){for(;Kt!==null;){var s=Kt;switch(s.tag){case 0:case 11:case 15:Ri(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Lo(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Kt=l;else e:for(s=t;Kt!==null;){l=Kt;var f=l.sibling,m=l.return;if(Dy(l),l===s){Kt=null;break e}if(f!==null){f.return=m,Kt=f;break e}Kt=m}}}var X2={getCacheForType:function(t){var i=fn(Ht),s=i.data.get(t);return s===void 0&&(s=t(),i.data.set(t,s)),s}},W2=typeof WeakMap=="function"?WeakMap:Map,rt=0,ft=null,qe=null,Xe=0,it=0,jn=null,Oi=!1,Ns=!1,Bd=!1,ni=0,Tt=0,Ii=0,Ia=0,Hd=0,Kn=0,Os=0,rl=null,xn=null,qd=!1,Fd=0,rc=1/0,ic=null,Di=null,rn=0,ji=null,Is=null,Ds=0,Gd=0,$d=null,Hy=null,il=0,Qd=null;function Mn(){if((rt&2)!==0&&Xe!==0)return Xe&-Xe;if($.T!==null){var t=_s;return t!==0?t:eh()}return mi()}function qy(){Kn===0&&(Kn=(Xe&536870912)===0||tt?ho():536870912);var t=Qn.current;return t!==null&&(t.flags|=32),Kn}function kn(t,i,s){(t===ft&&(it===2||it===9)||t.cancelPendingCommit!==null)&&(js(t,0),Mi(t,Xe,Kn,!1)),Mr(t,s),((rt&2)===0||t!==ft)&&(t===ft&&((rt&2)===0&&(Ia|=s),Tt===4&&Mi(t,Xe,Kn,!1)),wr(t))}function Fy(t,i,s){if((rt&6)!==0)throw Error(a(327));var l=!s&&(i&124)===0&&(i&t.expiredLanes)===0||ra(t,i),f=l?eE(t,i):Xd(t,i,!0),m=l;do{if(f===0){Ns&&!l&&Mi(t,i,0,!1);break}else{if(s=t.current.alternate,m&&!Z2(s)){f=Xd(t,i,!1),m=!1;continue}if(f===2){if(m=i,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){i=x;e:{var I=t;f=rl;var H=I.current.memoizedState.isDehydrated;if(H&&(js(I,x).flags|=256),x=Xd(I,x,!1),x!==2){if(Bd&&!H){I.errorRecoveryDisabledLanes|=m,Ia|=m,f=4;break e}m=xn,xn=f,m!==null&&(xn===null?xn=m:xn.push.apply(xn,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){js(t,0),Mi(t,i,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Mi(l,i,Kn,!Oi);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Fd+300-Re(),10<f)){if(Mi(l,i,Kn,!Oi),Xa(l,0,!0)!==0)break e;l.timeoutHandle=_v(Gy.bind(null,l,s,xn,ic,qd,i,Kn,Ia,Os,Oi,m,2,-0,0),f);break e}Gy(l,s,xn,ic,qd,i,Kn,Ia,Os,Oi,m,0,-0,0)}}break}while(!0);wr(t)}function Gy(t,i,s,l,f,m,x,I,H,te,ue,de,ie,se){if(t.timeoutHandle=-1,de=i.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(fl={stylesheets:null,count:0,unsuspend:jE},Ly(i),de=kE(),de!==null)){t.cancelPendingCommit=de(Zy.bind(null,t,i,m,s,l,f,x,I,H,ue,1,ie,se)),Mi(t,m,x,!te);return}Zy(t,i,m,s,l,f,x,I,H)}function Z2(t){for(var i=t;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var f=s[l],m=f.getSnapshot;f=f.value;try{if(!Nn(m(),f))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Mi(t,i,s,l){i&=~Hd,i&=~Ia,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var m=31-cn(f),x=1<<m;l[m]=-1,f&=~x}s!==0&&lr(t,s,i)}function ac(){return(rt&6)===0?(al(0),!1):!0}function Kd(){if(qe!==null){if(it===0)var t=qe.return;else t=qe,Kr=Aa=null,fd(t),As=null,Yo=0,t=qe;for(;t!==null;)Ty(t.alternate,t),t=t.return;qe=null}}function js(t,i){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,gE(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Kd(),ft=t,qe=s=Gr(t.current,null),Xe=i,it=0,jn=null,Oi=!1,Ns=ra(t,i),Bd=!1,Os=Kn=Hd=Ia=Ii=Tt=0,xn=rl=null,qd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-cn(l),m=1<<f;i|=t[f],l&=~m}return ni=i,Ru(),s}function $y(t,i){Le=null,$.H=$u,i===Uo||i===Pu?(i=ug(),it=3):i===sg?(i=ug(),it=4):it=i===cy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,jn=i,qe===null&&(Tt=1,Wu(t,qn(i,t.current)))}function Qy(){var t=$.H;return $.H=$u,t===null?$u:t}function Ky(){var t=$.A;return $.A=X2,t}function Yd(){Tt=4,Oi||(Xe&4194048)!==Xe&&Qn.current!==null||(Ns=!0),(Ii&134217727)===0&&(Ia&134217727)===0||ft===null||Mi(ft,Xe,Kn,!1)}function Xd(t,i,s){var l=rt;rt|=2;var f=Qy(),m=Ky();(ft!==t||Xe!==i)&&(ic=null,js(t,i)),i=!1;var x=Tt;e:do try{if(it!==0&&qe!==null){var I=qe,H=jn;switch(it){case 8:Kd(),x=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(i=!0);var te=it;if(it=0,jn=null,Ms(t,I,H,te),s&&Ns){x=0;break e}break;default:te=it,it=0,jn=null,Ms(t,I,H,te)}}J2(),x=Tt;break}catch(ue){$y(t,ue)}while(!0);return i&&t.shellSuspendCounter++,Kr=Aa=null,rt=l,$.H=f,$.A=m,qe===null&&(ft=null,Xe=0,Ru()),x}function J2(){for(;qe!==null;)Yy(qe)}function eE(t,i){var s=rt;rt|=2;var l=Qy(),f=Ky();ft!==t||Xe!==i?(ic=null,rc=Re()+500,js(t,i)):Ns=ra(t,i);e:do try{if(it!==0&&qe!==null){i=qe;var m=jn;t:switch(it){case 1:it=0,jn=null,Ms(t,i,m,1);break;case 2:case 9:if(og(m)){it=0,jn=null,Xy(i);break}i=function(){it!==2&&it!==9||ft!==t||(it=7),wr(t)},m.then(i,i);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:og(m)?(it=0,jn=null,Xy(i)):(it=0,jn=null,Ms(t,i,m,7));break;case 5:var x=null;switch(qe.tag){case 26:x=qe.memoizedState;case 5:case 27:var I=qe;if(!x||Iv(x)){it=0,jn=null;var H=I.sibling;if(H!==null)qe=H;else{var te=I.return;te!==null?(qe=te,sc(te)):qe=null}break t}}it=0,jn=null,Ms(t,i,m,5);break;case 6:it=0,jn=null,Ms(t,i,m,6);break;case 8:Kd(),Tt=6;break e;default:throw Error(a(462))}}tE();break}catch(ue){$y(t,ue)}while(!0);return Kr=Aa=null,$.H=l,$.A=f,rt=s,qe!==null?0:(ft=null,Xe=0,Ru(),Tt)}function tE(){for(;qe!==null&&!Ge();)Yy(qe)}function Yy(t){var i=Sy(t.alternate,t,ni);t.memoizedProps=t.pendingProps,i===null?sc(t):qe=i}function Xy(t){var i=t,s=i.alternate;switch(i.tag){case 15:case 0:i=gy(s,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=gy(s,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:fd(i);default:Ty(s,i),i=qe=Wp(i,ni),i=Sy(s,i,ni)}t.memoizedProps=t.pendingProps,i===null?sc(t):qe=i}function Ms(t,i,s,l){Kr=Aa=null,fd(i),As=null,Yo=0;var f=i.return;try{if(F2(t,f,i,s,Xe)){Tt=1,Wu(t,qn(s,t.current)),qe=null;return}}catch(m){if(f!==null)throw qe=f,m;Tt=1,Wu(t,qn(s,t.current)),qe=null;return}i.flags&32768?(tt||l===1?t=!0:Ns||(Xe&536870912)!==0?t=!1:(Oi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Wy(i,t)):sc(i)}function sc(t){var i=t;do{if((i.flags&32768)!==0){Wy(i,Oi);return}t=i.return;var s=$2(i.alternate,i,ni);if(s!==null){qe=s;return}if(i=i.sibling,i!==null){qe=i;return}qe=i=t}while(i!==null);Tt===0&&(Tt=5)}function Wy(t,i){do{var s=Q2(t.alternate,t);if(s!==null){s.flags&=32767,qe=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(t=t.sibling,t!==null)){qe=t;return}qe=t=s}while(t!==null);Tt=6,qe=null}function Zy(t,i,s,l,f,m,x,I,H){t.cancelPendingCommit=null;do oc();while(rn!==0);if((rt&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=Uf,po(t,s,m,x,I,H),t===ft&&(qe=ft=null,Xe=0),Is=i,ji=t,Ds=s,Gd=m,$d=f,Hy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,aE(xt,function(){return rv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,f=w.p,w.p=2,x=rt,rt|=4;try{K2(t,i,s)}finally{rt=x,w.p=f,$.T=l}}rn=1,Jy(),ev(),tv()}}function Jy(){if(rn===1){rn=0;var t=ji,i=Is,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=$.T,$.T=null;var l=w.p;w.p=2;var f=rt;rt|=4;try{ky(i,t);var m=lh,x=Bp(t.containerInfo),I=m.focusedElem,H=m.selectionRange;if(x!==I&&I&&I.ownerDocument&&Up(I.ownerDocument.documentElement,I)){if(H!==null&&kf(I)){var te=H.start,ue=H.end;if(ue===void 0&&(ue=te),"selectionStart"in I)I.selectionStart=te,I.selectionEnd=Math.min(ue,I.value.length);else{var de=I.ownerDocument||document,ie=de&&de.defaultView||window;if(ie.getSelection){var se=ie.getSelection(),Ne=I.textContent.length,xe=Math.min(H.start,Ne),ut=H.end===void 0?xe:Math.min(H.end,Ne);!se.extend&&xe>ut&&(x=ut,ut=xe,xe=x);var X=zp(I,xe),K=zp(I,ut);if(X&&K&&(se.rangeCount!==1||se.anchorNode!==X.node||se.anchorOffset!==X.offset||se.focusNode!==K.node||se.focusOffset!==K.offset)){var ee=de.createRange();ee.setStart(X.node,X.offset),se.removeAllRanges(),xe>ut?(se.addRange(ee),se.extend(K.node,K.offset)):(ee.setEnd(K.node,K.offset),se.addRange(ee))}}}}for(de=[],se=I;se=se.parentNode;)se.nodeType===1&&de.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<de.length;I++){var fe=de[I];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}_c=!!oh,lh=oh=null}finally{rt=f,w.p=l,$.T=s}}t.current=i,rn=2}}function ev(){if(rn===2){rn=0;var t=ji,i=Is,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=$.T,$.T=null;var l=w.p;w.p=2;var f=rt;rt|=4;try{Iy(t,i.alternate,i)}finally{rt=f,w.p=l,$.T=s}}rn=3}}function tv(){if(rn===4||rn===3){rn=0,ht();var t=ji,i=Is,s=Ds,l=Hy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?rn=5:(rn=0,Is=ji=null,nv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Di=null),Wa(s),i=i.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(yt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=$.T,f=w.p,w.p=2,$.T=null;try{for(var m=t.onRecoverableError,x=0;x<l.length;x++){var I=l[x];m(I.value,{componentStack:I.stack})}}finally{$.T=i,w.p=f}}(Ds&3)!==0&&oc(),wr(t),f=t.pendingLanes,(s&4194090)!==0&&(f&42)!==0?t===Qd?il++:(il=0,Qd=t):il=0,al(0)}}function nv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Lo(i)))}function oc(t){return Jy(),ev(),tv(),rv()}function rv(){if(rn!==5)return!1;var t=ji,i=Gd;Gd=0;var s=Wa(Ds),l=$.T,f=w.p;try{w.p=32>s?32:s,$.T=null,s=$d,$d=null;var m=ji,x=Ds;if(rn=0,Is=ji=null,Ds=0,(rt&6)!==0)throw Error(a(331));var I=rt;if(rt|=4,Uy(m.current),Vy(m,m.current,x,s),rt=I,al(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(yt,m)}catch{}return!0}finally{w.p=f,$.T=l,nv(t,i)}}function iv(t,i,s){i=qn(s,i),i=Ad(t.stateNode,i,2),t=wi(t,i,2),t!==null&&(Mr(t,2),wr(t))}function ct(t,i,s){if(t.tag===3)iv(t,t,s);else for(;i!==null;){if(i.tag===3){iv(i,t,s);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Di===null||!Di.has(l))){t=qn(s,t),s=ly(2),l=wi(i,s,2),l!==null&&(uy(s,l,i,t),Mr(l,2),wr(l));break}}i=i.return}}function Wd(t,i,s){var l=t.pingCache;if(l===null){l=t.pingCache=new W2;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(s)||(Bd=!0,f.add(s),t=nE.bind(null,t,i,s),i.then(t,t))}function nE(t,i,s){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,ft===t&&(Xe&s)===s&&(Tt===4||Tt===3&&(Xe&62914560)===Xe&&300>Re()-Fd?(rt&2)===0&&js(t,0):Hd|=s,Os===Xe&&(Os=0)),wr(t)}function av(t,i){i===0&&(i=mo()),t=ps(t,i),t!==null&&(Mr(t,i),wr(t))}function rE(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),av(t,s)}function iE(t,i){var s=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),av(t,s)}function aE(t,i){return Ve(t,i)}var lc=null,ks=null,Zd=!1,uc=!1,Jd=!1,Da=0;function wr(t){t!==ks&&t.next===null&&(ks===null?lc=ks=t:ks=ks.next=t),uc=!0,Zd||(Zd=!0,oE())}function al(t,i){if(!Jd&&uc){Jd=!0;do for(var s=!1,l=lc;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var x=l.suspendedLanes,I=l.pingedLanes;m=(1<<31-cn(42|t)+1)-1,m&=f&~(x&~I),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,uv(l,m))}else m=Xe,m=Xa(l,l===ft?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ra(l,m)||(s=!0,uv(l,m));l=l.next}while(s);Jd=!1}}function sE(){sv()}function sv(){uc=Zd=!1;var t=0;Da!==0&&(pE()&&(t=Da),Da=0);for(var i=Re(),s=null,l=lc;l!==null;){var f=l.next,m=ov(l,i);m===0?(l.next=null,s===null?lc=f:s.next=f,f===null&&(ks=s)):(s=l,(t!==0||(m&3)!==0)&&(uc=!0)),l=f}al(t)}function ov(t,i){for(var s=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-cn(m),I=1<<x,H=f[x];H===-1?((I&s)===0||(I&l)!==0)&&(f[x]=fo(I,i)):H<=i&&(t.expiredLanes|=I),m&=~I}if(i=ft,s=Xe,s=Xa(t,t===i?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===i&&(it===2||it===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&je(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ra(t,s)){if(i=s&-s,i===t.callbackPriority)return i;switch(l!==null&&je(l),Wa(s)){case 2:case 8:s=gt;break;case 32:s=xt;break;case 268435456:s=Zn;break;default:s=xt}return l=lv.bind(null,t),s=Ve(s,l),t.callbackPriority=i,t.callbackNode=s,i}return l!==null&&l!==null&&je(l),t.callbackPriority=2,t.callbackNode=null,2}function lv(t,i){if(rn!==0&&rn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(oc()&&t.callbackNode!==s)return null;var l=Xe;return l=Xa(t,t===ft?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Fy(t,l,i),ov(t,Re()),t.callbackNode!=null&&t.callbackNode===s?lv.bind(null,t):null)}function uv(t,i){if(oc())return null;Fy(t,i,!0)}function oE(){yE(function(){(rt&6)!==0?Ve(pt,sE):sv()})}function eh(){return Da===0&&(Da=ho()),Da}function cv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:rs(""+t)}function fv(t,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,t.id&&s.setAttribute("form",t.id),i.parentNode.insertBefore(s,i),t=new FormData(t),s.parentNode.removeChild(s),t}function lE(t,i,s,l,f){if(i==="submit"&&s&&s.stateNode===f){var m=cv((f[Dt]||null).action),x=l.submitter;x&&(i=(i=x[Dt]||null)?cv(i.formAction):x.getAttribute("formAction"),i!==null&&(m=i,x=null));var I=new is("action","action",null,l,f);t.push({event:I,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Da!==0){var H=x?fv(f,x):new FormData(f);bd(s,{pending:!0,data:H,method:f.method,action:m},null,H)}}else typeof m=="function"&&(I.preventDefault(),H=x?fv(f,x):new FormData(f),bd(s,{pending:!0,data:H,method:f.method,action:m},m,H))},currentTarget:f}]})}}for(var th=0;th<zf.length;th++){var nh=zf[th],uE=nh.toLowerCase(),cE=nh[0].toUpperCase()+nh.slice(1);nr(uE,"on"+cE)}nr(Fp,"onAnimationEnd"),nr(Gp,"onAnimationIteration"),nr($p,"onAnimationStart"),nr("dblclick","onDoubleClick"),nr("focusin","onFocus"),nr("focusout","onBlur"),nr(R2,"onTransitionRun"),nr(C2,"onTransitionStart"),nr(N2,"onTransitionCancel"),nr(Qp,"onTransitionEnd"),Pr("onMouseEnter",["mouseout","mouseover"]),Pr("onMouseLeave",["mouseout","mouseover"]),Pr("onPointerEnter",["pointerout","pointerover"]),Pr("onPointerLeave",["pointerout","pointerover"]),er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),er("onBeforeInput",["compositionend","keypress","textInput","paste"]),er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function dv(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],f=l.event;l=l.listeners;e:{var m=void 0;if(i)for(var x=l.length-1;0<=x;x--){var I=l[x],H=I.instance,te=I.currentTarget;if(I=I.listener,H!==m&&f.isPropagationStopped())break e;m=I,f.currentTarget=te;try{m(f)}catch(ue){Xu(ue)}f.currentTarget=null,m=H}else for(x=0;x<l.length;x++){if(I=l[x],H=I.instance,te=I.currentTarget,I=I.listener,H!==m&&f.isPropagationStopped())break e;m=I,f.currentTarget=te;try{m(f)}catch(ue){Xu(ue)}f.currentTarget=null,m=H}}}}function Fe(t,i){var s=i[yo];s===void 0&&(s=i[yo]=new Set);var l=t+"__bubble";s.has(l)||(hv(i,t,2,!1),s.add(l))}function rh(t,i,s){var l=0;i&&(l|=4),hv(s,t,l,i)}var cc="_reactListening"+Math.random().toString(36).slice(2);function ih(t){if(!t[cc]){t[cc]=!0,vo.forEach(function(s){s!=="selectionchange"&&(fE.has(s)||rh(s,!1,t),rh(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[cc]||(i[cc]=!0,rh("selectionchange",!1,i))}}function hv(t,i,s,l){switch(Vv(i)){case 2:var f=LE;break;case 8:f=zE;break;default:f=vh}s=f.bind(null,i,s,t),f=void 0,!Bn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,s,{capture:!0,passive:f}):t.addEventListener(i,s,!0):f!==void 0?t.addEventListener(i,s,{passive:f}):t.addEventListener(i,s,!1)}function ah(t,i,s,l,f){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var I=l.stateNode.containerInfo;if(I===f)break;if(x===4)for(x=l.return;x!==null;){var H=x.tag;if((H===3||H===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;I!==null;){if(x=kr(I),x===null)return;if(H=x.tag,H===5||H===6||H===26||H===27){l=m=x;continue e}I=I.parentNode}}l=l.return}du(function(){var te=m,ue=Un(s),de=[];e:{var ie=Kp.get(t);if(ie!==void 0){var se=is,Ne=t;switch(t){case"keypress":if(mr(s)===0)break e;case"keydown":case"keyup":se=cs;break;case"focusin":Ne="focus",se=os;break;case"focusout":Ne="blur",se=os;break;case"beforeblur":case"afterblur":se=os;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=If;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=bu;break;case Fp:case Gp:case $p:se=ls;break;case Qp:se=Su;break;case"scroll":case"scrollend":se=hu;break;case"wheel":se=fs;break;case"copy":case"cut":case"paste":se=us;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Oo;break;case"toggle":case"beforetoggle":se=Tu}var xe=(i&4)!==0,ut=!xe&&(t==="scroll"||t==="scrollend"),X=xe?ie!==null?ie+"Capture":null:ie;xe=[];for(var K=te,ee;K!==null;){var fe=K;if(ee=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ee===null||X===null||(fe=fa(K,X),fe!=null&&xe.push(ol(K,fe,ee))),ut)break;K=K.return}0<xe.length&&(ie=new se(ie,Ne,null,s,ue),de.push({event:ie,listeners:xe}))}}if((i&7)===0){e:{if(ie=t==="mouseover"||t==="pointerover",se=t==="mouseout"||t==="pointerout",ie&&s!==zr&&(Ne=s.relatedTarget||s.fromElement)&&(kr(Ne)||Ne[Ln]))break e;if((se||ie)&&(ie=ue.window===ue?ue:(ie=ue.ownerDocument)?ie.defaultView||ie.parentWindow:window,se?(Ne=s.relatedTarget||s.toElement,se=te,Ne=Ne?kr(Ne):null,Ne!==null&&(ut=u(Ne),xe=Ne.tag,Ne!==ut||xe!==5&&xe!==27&&xe!==6)&&(Ne=null)):(se=null,Ne=te),se!==Ne)){if(xe=Hn,fe="onMouseLeave",X="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(xe=Oo,fe="onPointerLeave",X="onPointerEnter",K="pointer"),ut=se==null?ie:cr(se),ee=Ne==null?ie:cr(Ne),ie=new xe(fe,K+"leave",se,s,ue),ie.target=ut,ie.relatedTarget=ee,fe=null,kr(ue)===te&&(xe=new xe(X,K+"enter",Ne,s,ue),xe.target=ee,xe.relatedTarget=ut,fe=xe),ut=fe,se&&Ne)t:{for(xe=se,X=Ne,K=0,ee=xe;ee;ee=Ps(ee))K++;for(ee=0,fe=X;fe;fe=Ps(fe))ee++;for(;0<K-ee;)xe=Ps(xe),K--;for(;0<ee-K;)X=Ps(X),ee--;for(;K--;){if(xe===X||X!==null&&xe===X.alternate)break t;xe=Ps(xe),X=Ps(X)}xe=null}else xe=null;se!==null&&mv(de,ie,se,xe,!1),Ne!==null&&ut!==null&&mv(de,ut,Ne,xe,!0)}}e:{if(ie=te?cr(te):window,se=ie.nodeName&&ie.nodeName.toLowerCase(),se==="select"||se==="input"&&ie.type==="file")var Ee=jp;else if(Bt(ie))if(Mp)Ee=T2;else{Ee=S2;var Be=E2}else se=ie.nodeName,!se||se.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?te&&wo(te.elementType)&&(Ee=jp):Ee=w2;if(Ee&&(Ee=Ee(t,te))){Fr(de,Ee,s,ue);break e}Be&&Be(t,ie,te),t==="focusout"&&te&&ie.type==="number"&&te.memoizedProps.value!=null&&vi(ie,"number",ie.value)}switch(Be=te?cr(te):window,t){case"focusin":(Bt(Be)||Be.contentEditable==="true")&&(ds=Be,Pf=te,jo=null);break;case"focusout":jo=Pf=ds=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,Hp(de,s,ue);break;case"selectionchange":if(x2)break;case"keydown":case"keyup":Hp(de,s,ue)}var Te;if(yr)e:{switch(t){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Ke?oe(t,s)&&(Ce="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Ce="onCompositionStart");Ce&&(T&&s.locale!=="ko"&&(Ke||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Ke&&(Te=Ao()):(hr=ue,_i="value"in hr?hr.value:hr.textContent,Ke=!0)),Be=fc(te,Ce),0<Be.length&&(Ce=new Co(Ce,t,null,s,ue),de.push({event:Ce,listeners:Be}),Te?Ce.data=Te:(Te=ve(s),Te!==null&&(Ce.data=Te)))),(Te=v?Ut(t,s):Ye(t,s))&&(Ce=fc(te,"onBeforeInput"),0<Ce.length&&(Be=new Co("onBeforeInput","beforeinput",null,s,ue),de.push({event:Be,listeners:Ce}),Be.data=Te)),lE(de,t,te,s,ue)}dv(de,i)})}function ol(t,i,s){return{instance:t,listener:i,currentTarget:s}}function fc(t,i){for(var s=i+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=fa(t,s),f!=null&&l.unshift(ol(t,f,m)),f=fa(t,i),f!=null&&l.push(ol(t,f,m))),t.tag===3)return l;t=t.return}return[]}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function mv(t,i,s,l,f){for(var m=i._reactName,x=[];s!==null&&s!==l;){var I=s,H=I.alternate,te=I.stateNode;if(I=I.tag,H!==null&&H===l)break;I!==5&&I!==26&&I!==27||te===null||(H=te,f?(te=fa(s,m),te!=null&&x.unshift(ol(s,te,H))):f||(te=fa(s,m),te!=null&&x.push(ol(s,te,H)))),s=s.return}x.length!==0&&t.push({event:i,listeners:x})}var dE=/\r\n?/g,hE=/\u0000|\uFFFD/g;function pv(t){return(typeof t=="string"?t:""+t).replace(dE,`
`).replace(hE,"")}function gv(t,i){return i=pv(i),pv(t)===i}function dc(){}function lt(t,i,s,l,f,m){switch(s){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||zn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&zn(t,""+l);break;case"className":fr(t,"class",l);break;case"tabIndex":fr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(t,s,l);break;case"style":So(t,l,m);break;case"data":if(i!=="object"){fr(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=rs(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(i!=="input"&&lt(t,i,"name",f.name,f,null),lt(t,i,"formEncType",f.formEncType,f,null),lt(t,i,"formMethod",f.formMethod,f,null),lt(t,i,"formTarget",f.formTarget,f,null)):(lt(t,i,"encType",f.encType,f,null),lt(t,i,"method",f.method,f,null),lt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=rs(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=dc);break;case"onScroll":l!=null&&Fe("scroll",t);break;case"onScrollEnd":l!=null&&Fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=rs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Fe("beforetoggle",t),Fe("toggle",t),yi(t,"popover",l);break;case"xlinkActuate":en(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":en(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":en(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":en(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":en(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":en(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":en(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":en(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":en(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Nf.get(s)||s,yi(t,s,l))}}function sh(t,i,s,l,f,m){switch(s){case"style":So(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?zn(t,l):(typeof l=="number"||typeof l=="bigint")&&zn(t,""+l);break;case"onScroll":l!=null&&Fe("scroll",t);break;case"onScrollEnd":l!=null&&Fe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=dc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Za.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),i=s.slice(2,f?s.length-7:void 0),m=t[Dt]||null,m=m!=null?m[s]:null,typeof m=="function"&&t.removeEventListener(i,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(i,l,f);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):yi(t,s,l)}}}function an(t,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",t),Fe("load",t);var l=!1,f=!1,m;for(m in s)if(s.hasOwnProperty(m)){var x=s[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:lt(t,i,m,x,s,null)}}f&&lt(t,i,"srcSet",s.srcSet,s,null),l&&lt(t,i,"src",s.src,s,null);return;case"input":Fe("invalid",t);var I=m=x=f=null,H=null,te=null;for(l in s)if(s.hasOwnProperty(l)){var ue=s[l];if(ue!=null)switch(l){case"name":f=ue;break;case"type":x=ue;break;case"checked":H=ue;break;case"defaultChecked":te=ue;break;case"value":m=ue;break;case"defaultValue":I=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(a(137,i));break;default:lt(t,i,l,ue,s,null)}}la(t,m,I,H,te,x,f,!1),ns(t);return;case"select":Fe("invalid",t),l=x=m=null;for(f in s)if(s.hasOwnProperty(f)&&(I=s[f],I!=null))switch(f){case"value":m=I;break;case"defaultValue":x=I;break;case"multiple":l=I;default:lt(t,i,f,I,s,null)}i=m,s=x,t.multiple=!!l,i!=null?Lr(t,!!l,i,!1):s!=null&&Lr(t,!!l,s,!0);return;case"textarea":Fe("invalid",t),m=f=l=null;for(x in s)if(s.hasOwnProperty(x)&&(I=s[x],I!=null))switch(x){case"value":l=I;break;case"defaultValue":f=I;break;case"children":m=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(a(91));break;default:lt(t,i,x,I,s,null)}ua(t,l,f,m),ns(t);return;case"option":for(H in s)if(s.hasOwnProperty(H)&&(l=s[H],l!=null))switch(H){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:lt(t,i,H,l,s,null)}return;case"dialog":Fe("beforetoggle",t),Fe("toggle",t),Fe("cancel",t),Fe("close",t);break;case"iframe":case"object":Fe("load",t);break;case"video":case"audio":for(l=0;l<sl.length;l++)Fe(sl[l],t);break;case"image":Fe("error",t),Fe("load",t);break;case"details":Fe("toggle",t);break;case"embed":case"source":case"link":Fe("error",t),Fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in s)if(s.hasOwnProperty(te)&&(l=s[te],l!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:lt(t,i,te,l,s,null)}return;default:if(wo(i)){for(ue in s)s.hasOwnProperty(ue)&&(l=s[ue],l!==void 0&&sh(t,i,ue,l,s,void 0));return}}for(I in s)s.hasOwnProperty(I)&&(l=s[I],l!=null&&lt(t,i,I,l,s,null))}function mE(t,i,s,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,I=null,H=null,te=null,ue=null;for(se in s){var de=s[se];if(s.hasOwnProperty(se)&&de!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":H=de;default:l.hasOwnProperty(se)||lt(t,i,se,null,l,de)}}for(var ie in l){var se=l[ie];if(de=s[ie],l.hasOwnProperty(ie)&&(se!=null||de!=null))switch(ie){case"type":m=se;break;case"name":f=se;break;case"checked":te=se;break;case"defaultChecked":ue=se;break;case"value":x=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:se!==de&&lt(t,i,ie,se,l,de)}}Cn(t,x,I,H,te,ue,m,f);return;case"select":se=x=I=ie=null;for(m in s)if(H=s[m],s.hasOwnProperty(m)&&H!=null)switch(m){case"value":break;case"multiple":se=H;default:l.hasOwnProperty(m)||lt(t,i,m,null,l,H)}for(f in l)if(m=l[f],H=s[f],l.hasOwnProperty(f)&&(m!=null||H!=null))switch(f){case"value":ie=m;break;case"defaultValue":I=m;break;case"multiple":x=m;default:m!==H&&lt(t,i,f,m,l,H)}i=I,s=x,l=se,ie!=null?Lr(t,!!s,ie,!1):!!l!=!!s&&(i!=null?Lr(t,!!s,i,!0):Lr(t,!!s,s?[]:"",!1));return;case"textarea":se=ie=null;for(I in s)if(f=s[I],s.hasOwnProperty(I)&&f!=null&&!l.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:lt(t,i,I,null,l,f)}for(x in l)if(f=l[x],m=s[x],l.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":ie=f;break;case"defaultValue":se=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&lt(t,i,x,f,l,m)}st(t,ie,se);return;case"option":for(var Ne in s)if(ie=s[Ne],s.hasOwnProperty(Ne)&&ie!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:lt(t,i,Ne,null,l,ie)}for(H in l)if(ie=l[H],se=s[H],l.hasOwnProperty(H)&&ie!==se&&(ie!=null||se!=null))switch(H){case"selected":t.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:lt(t,i,H,ie,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in s)ie=s[xe],s.hasOwnProperty(xe)&&ie!=null&&!l.hasOwnProperty(xe)&&lt(t,i,xe,null,l,ie);for(te in l)if(ie=l[te],se=s[te],l.hasOwnProperty(te)&&ie!==se&&(ie!=null||se!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:lt(t,i,te,ie,l,se)}return;default:if(wo(i)){for(var ut in s)ie=s[ut],s.hasOwnProperty(ut)&&ie!==void 0&&!l.hasOwnProperty(ut)&&sh(t,i,ut,void 0,l,ie);for(ue in l)ie=l[ue],se=s[ue],!l.hasOwnProperty(ue)||ie===se||ie===void 0&&se===void 0||sh(t,i,ue,ie,l,se);return}}for(var X in s)ie=s[X],s.hasOwnProperty(X)&&ie!=null&&!l.hasOwnProperty(X)&&lt(t,i,X,null,l,ie);for(de in l)ie=l[de],se=s[de],!l.hasOwnProperty(de)||ie===se||ie==null&&se==null||lt(t,i,de,ie,l,se)}var oh=null,lh=null;function hc(t){return t.nodeType===9?t:t.ownerDocument}function yv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function uh(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ch=null;function pE(){var t=window.event;return t&&t.type==="popstate"?t===ch?!1:(ch=t,!0):(ch=null,!1)}var _v=typeof setTimeout=="function"?setTimeout:void 0,gE=typeof clearTimeout=="function"?clearTimeout:void 0,bv=typeof Promise=="function"?Promise:void 0,yE=typeof queueMicrotask=="function"?queueMicrotask:typeof bv<"u"?function(t){return bv.resolve(null).then(t).catch(vE)}:_v;function vE(t){setTimeout(function(){throw t})}function ki(t){return t==="head"}function Ev(t,i){var s=i,l=0,f=0;do{var m=s.nextSibling;if(t.removeChild(s),m&&m.nodeType===8)if(s=m.data,s==="/$"){if(0<l&&8>l){s=l;var x=t.ownerDocument;if(s&1&&ll(x.documentElement),s&2&&ll(x.body),s&4)for(s=x.head,ll(s),x=s.firstChild;x;){var I=x.nextSibling,H=x.nodeName;x[ia]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&x.rel.toLowerCase()==="stylesheet"||s.removeChild(x),x=I}}if(f===0){t.removeChild(m),gl(i);return}f--}else s==="$"||s==="$?"||s==="$!"?f++:l=s.charCodeAt(0)-48;else l=0;s=m}while(s);gl(i)}function fh(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":fh(s),gi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function _E(t,i,s,l){for(;t.nodeType===1;){var f=s;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ia])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ir(t.nextSibling),t===null)break}return null}function bE(t,i,s){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ir(t.nextSibling),t===null))return null;return t}function dh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function EE(t,i){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")i();else{var l=function(){i(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ir(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var hh=null;function Sv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}function wv(t,i,s){switch(i=hc(s),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function ll(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);gi(t)}var Yn=new Map,Tv=new Set;function mc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ri=w.d;w.d={f:SE,r:wE,D:TE,C:AE,L:xE,m:RE,X:NE,S:CE,M:OE};function SE(){var t=ri.f(),i=ac();return t||i}function wE(t){var i=ur(t);i!==null&&i.tag===5&&i.type==="form"?Fg(i):ri.r(t)}var Vs=typeof document>"u"?null:document;function Av(t,i,s){var l=Vs;if(l&&typeof i=="string"&&i){var f=jt(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),Tv.has(f)||(Tv.add(f),t={rel:t,crossOrigin:s,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),an(i,"link",t),Rt(i),l.head.appendChild(i)))}}function TE(t){ri.D(t),Av("dns-prefetch",t,null)}function AE(t,i){ri.C(t,i),Av("preconnect",t,i)}function xE(t,i,s){ri.L(t,i,s);var l=Vs;if(l&&t&&i){var f='link[rel="preload"][as="'+jt(i)+'"]';i==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+jt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+jt(s.imageSizes)+'"]')):f+='[href="'+jt(t)+'"]';var m=f;switch(i){case"style":m=Ls(t);break;case"script":m=zs(t)}Yn.has(m)||(t=b({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:t,as:i},s),Yn.set(m,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(ul(m))||i==="script"&&l.querySelector(cl(m))||(i=l.createElement("link"),an(i,"link",t),Rt(i),l.head.appendChild(i)))}}function RE(t,i){ri.m(t,i);var s=Vs;if(s&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+jt(l)+'"][href="'+jt(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=zs(t)}if(!Yn.has(m)&&(t=b({rel:"modulepreload",href:t},i),Yn.set(m,t),s.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(cl(m)))return}l=s.createElement("link"),an(l,"link",t),Rt(l),s.head.appendChild(l)}}}function CE(t,i,s){ri.S(t,i,s);var l=Vs;if(l&&t){var f=vn(l).hoistableStyles,m=Ls(t);i=i||"default";var x=f.get(m);if(!x){var I={loading:0,preload:null};if(x=l.querySelector(ul(m)))I.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},s),(s=Yn.get(m))&&mh(t,s);var H=x=l.createElement("link");Rt(H),an(H,"link",t),H._p=new Promise(function(te,ue){H.onload=te,H.onerror=ue}),H.addEventListener("load",function(){I.loading|=1}),H.addEventListener("error",function(){I.loading|=2}),I.loading|=4,pc(x,i,l)}x={type:"stylesheet",instance:x,count:1,state:I},f.set(m,x)}}}function NE(t,i){ri.X(t,i);var s=Vs;if(s&&t){var l=vn(s).hoistableScripts,f=zs(t),m=l.get(f);m||(m=s.querySelector(cl(f)),m||(t=b({src:t,async:!0},i),(i=Yn.get(f))&&ph(t,i),m=s.createElement("script"),Rt(m),an(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function OE(t,i){ri.M(t,i);var s=Vs;if(s&&t){var l=vn(s).hoistableScripts,f=zs(t),m=l.get(f);m||(m=s.querySelector(cl(f)),m||(t=b({src:t,async:!0,type:"module"},i),(i=Yn.get(f))&&ph(t,i),m=s.createElement("script"),Rt(m),an(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function xv(t,i,s,l){var f=(f=le.current)?mc(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=Ls(s.href),s=vn(f).hoistableStyles,l=s.get(i),l||(l={type:"style",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ls(s.href);var m=vn(f).hoistableStyles,x=m.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=f.querySelector(ul(t)))&&!m._p&&(x.instance=m,x.state.loading=5),Yn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Yn.set(t,s),m||IE(f,t,s,x.state))),i&&l===null)throw Error(a(528,""));return x}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=zs(s),s=vn(f).hoistableScripts,l=s.get(i),l||(l={type:"script",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ls(t){return'href="'+jt(t)+'"'}function ul(t){return'link[rel="stylesheet"]['+t+"]"}function Rv(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function IE(t,i,s,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),an(i,"link",s),Rt(i),t.head.appendChild(i))}function zs(t){return'[src="'+jt(t)+'"]'}function cl(t){return"script[async]"+t}function Cv(t,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+jt(s.href)+'"]');if(l)return i.instance=l,Rt(l),l;var f=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Rt(l),an(l,"style",f),pc(l,s.precedence,t),i.instance=l;case"stylesheet":f=Ls(s.href);var m=t.querySelector(ul(f));if(m)return i.state.loading|=4,i.instance=m,Rt(m),m;l=Rv(s),(f=Yn.get(f))&&mh(l,f),m=(t.ownerDocument||t).createElement("link"),Rt(m);var x=m;return x._p=new Promise(function(I,H){x.onload=I,x.onerror=H}),an(m,"link",l),i.state.loading|=4,pc(m,s.precedence,t),i.instance=m;case"script":return m=zs(s.src),(f=t.querySelector(cl(m)))?(i.instance=f,Rt(f),f):(l=s,(f=Yn.get(m))&&(l=b({},s),ph(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Rt(f),an(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,pc(l,s.precedence,t));return i.instance}function pc(t,i,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,x=0;x<l.length;x++){var I=l[x];if(I.dataset.precedence===i)m=I;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(t,i.firstChild))}function mh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function ph(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var gc=null;function Nv(t,i,s){if(gc===null){var l=new Map,f=gc=new Map;f.set(s,l)}else f=gc,l=f.get(s),l||(l=new Map,f.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),f=0;f<s.length;f++){var m=s[f];if(!(m[ia]||m[zt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(i)||"";x=t+x;var I=l.get(x);I?I.push(m):l.set(x,[m])}}return l}function Ov(t,i,s){t=t.ownerDocument||t,t.head.insertBefore(s,i==="title"?t.querySelector("head > title"):null)}function DE(t,i,s){if(s===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Iv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var fl=null;function jE(){}function ME(t,i,s){if(fl===null)throw Error(a(475));var l=fl;if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Ls(s.href),m=t.querySelector(ul(f));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=yc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=m,Rt(m);return}m=t.ownerDocument||t,s=Rv(s),(f=Yn.get(f))&&mh(s,f),m=m.createElement("link"),Rt(m);var x=m;x._p=new Promise(function(I,H){x.onload=I,x.onerror=H}),an(m,"link",s),i.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=yc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function kE(){if(fl===null)throw Error(a(475));var t=fl;return t.stylesheets&&t.count===0&&gh(t,t.stylesheets),0<t.count?function(i){var s=setTimeout(function(){if(t.stylesheets&&gh(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(s)}}:null}function yc(){if(this.count--,this.count===0){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var vc=null;function gh(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,vc=new Map,i.forEach(PE,t),vc=null,yc.call(t))}function PE(t,i){if(!(i.state.loading&4)){var s=vc.get(t);if(s)var l=s.get(null);else{s=new Map,vc.set(t,s);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(s.set(x.dataset.precedence,x),l=x)}l&&s.set(null,l)}f=i.instance,x=f.getAttribute("data-precedence"),m=s.get(x)||l,m===l&&s.set(null,f),s.set(x,f),this.count++,l=yc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var dl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function VE(t,i,s,l,f,m,x,I){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.hiddenUpdates=jr(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Dv(t,i,s,l,f,m,x,I,H,te,ue,de){return t=new VE(t,i,s,x,I,H,te,de),i=1,m===!0&&(i|=24),m=On(3,null,null,i),t.current=m,m.stateNode=t,i=Wf(),i.refCount++,t.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:s,cache:i},td(m),t}function jv(t){return t?(t=gs,t):gs}function Mv(t,i,s,l,f,m){f=jv(f),l.context===null?l.context=f:l.pendingContext=f,l=Si(i),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=wi(t,l,i),s!==null&&(kn(s,t,i),Ho(s,t,i))}function kv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function yh(t,i){kv(t,i),(t=t.alternate)&&kv(t,i)}function Pv(t){if(t.tag===13){var i=ps(t,67108864);i!==null&&kn(i,t,67108864),yh(t,67108864)}}var _c=!0;function LE(t,i,s,l){var f=$.T;$.T=null;var m=w.p;try{w.p=2,vh(t,i,s,l)}finally{w.p=m,$.T=f}}function zE(t,i,s,l){var f=$.T;$.T=null;var m=w.p;try{w.p=8,vh(t,i,s,l)}finally{w.p=m,$.T=f}}function vh(t,i,s,l){if(_c){var f=_h(l);if(f===null)ah(t,i,l,bc,s),Lv(t,l);else if(BE(f,t,i,s,l))l.stopPropagation();else if(Lv(t,l),i&4&&-1<UE.indexOf(t)){for(;f!==null;){var m=ur(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Jn(m.pendingLanes);if(x!==0){var I=m;for(I.pendingLanes|=2,I.entangledLanes|=2;x;){var H=1<<31-cn(x);I.entanglements[1]|=H,x&=~H}wr(m),(rt&6)===0&&(rc=Re()+500,al(0))}}break;case 13:I=ps(m,2),I!==null&&kn(I,m,2),ac(),yh(m,2)}if(m=_h(l),m===null&&ah(t,i,l,bc,s),m===f)break;f=m}f!==null&&l.stopPropagation()}else ah(t,i,l,null,s)}}function _h(t){return t=Un(t),bh(t)}var bc=null;function bh(t){if(bc=null,t=kr(t),t!==null){var i=u(t);if(i===null)t=null;else{var s=i.tag;if(s===13){if(t=d(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return bc=t,null}function Vv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case pt:return 2;case gt:return 8;case xt:case Wn:return 32;case Zn:return 268435456;default:return 32}default:return 32}}var Eh=!1,Pi=null,Vi=null,Li=null,hl=new Map,ml=new Map,zi=[],UE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lv(t,i){switch(t){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":hl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(i.pointerId)}}function pl(t,i,s,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:i,domEventName:s,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},i!==null&&(i=ur(i),i!==null&&Pv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function BE(t,i,s,l,f){switch(i){case"focusin":return Pi=pl(Pi,t,i,s,l,f),!0;case"dragenter":return Vi=pl(Vi,t,i,s,l,f),!0;case"mouseover":return Li=pl(Li,t,i,s,l,f),!0;case"pointerover":var m=f.pointerId;return hl.set(m,pl(hl.get(m)||null,t,i,s,l,f)),!0;case"gotpointercapture":return m=f.pointerId,ml.set(m,pl(ml.get(m)||null,t,i,s,l,f)),!0}return!1}function zv(t){var i=kr(t.target);if(i!==null){var s=u(i);if(s!==null){if(i=s.tag,i===13){if(i=d(s),i!==null){t.blockedOn=i,au(t.priority,function(){if(s.tag===13){var l=Mn();l=hi(l);var f=ps(s,l);f!==null&&kn(f,s,l),yh(s,l)}});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ec(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=_h(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);zr=l,s.target.dispatchEvent(l),zr=null}else return i=ur(s),i!==null&&Pv(i),t.blockedOn=s,!1;i.shift()}return!0}function Uv(t,i,s){Ec(t)&&s.delete(i)}function HE(){Eh=!1,Pi!==null&&Ec(Pi)&&(Pi=null),Vi!==null&&Ec(Vi)&&(Vi=null),Li!==null&&Ec(Li)&&(Li=null),hl.forEach(Uv),ml.forEach(Uv)}function Sc(t,i){t.blockedOn===i&&(t.blockedOn=null,Eh||(Eh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,HE)))}var wc=null;function Bv(t){wc!==t&&(wc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){wc===t&&(wc=null);for(var i=0;i<t.length;i+=3){var s=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(bh(l||s)===null)continue;break}var m=ur(s);m!==null&&(t.splice(i,3),i-=3,bd(m,{pending:!0,data:f,method:s.method,action:l},l,f))}}))}function gl(t){function i(H){return Sc(H,t)}Pi!==null&&Sc(Pi,t),Vi!==null&&Sc(Vi,t),Li!==null&&Sc(Li,t),hl.forEach(i),ml.forEach(i);for(var s=0;s<zi.length;s++){var l=zi[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<zi.length&&(s=zi[0],s.blockedOn===null);)zv(s),s.blockedOn===null&&zi.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var f=s[l],m=s[l+1],x=f[Dt]||null;if(typeof m=="function")x||Bv(s);else if(x){var I=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[Dt]||null)I=x.formAction;else if(bh(f)!==null)continue}else I=x.action;typeof I=="function"?s[l+1]=I:(s.splice(l,3),l-=3),Bv(s)}}}function Sh(t){this._internalRoot=t}Tc.prototype.render=Sh.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var s=i.current,l=Mn();Mv(s,l,t,i,null,null)},Tc.prototype.unmount=Sh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Mv(t.current,2,null,t,null,null),ac(),i[Ln]=null}};function Tc(t){this._internalRoot=t}Tc.prototype.unstable_scheduleHydration=function(t){if(t){var i=mi();t={blockedOn:null,target:t,priority:i};for(var s=0;s<zi.length&&i!==0&&i<zi[s].priority;s++);zi.splice(s,0,t),s===0&&zv(t)}};var Hv=e.version;if(Hv!=="19.1.0")throw Error(a(527,Hv,"19.1.0"));w.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var qE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{yt=Ac.inject(qE),Ue=Ac}catch{}}return vl.createRoot=function(t,i){if(!o(t))throw Error(a(299));var s=!1,l="",f=iy,m=ay,x=sy,I=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(x=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(I=i.unstable_transitionCallbacks)),i=Dv(t,1,!1,null,null,s,l,f,m,x,I,null),t[Ln]=i.current,ih(t),new Sh(i)},vl.hydrateRoot=function(t,i,s){if(!o(t))throw Error(a(299));var l=!1,f="",m=iy,x=ay,I=sy,H=null,te=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(I=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(H=s.unstable_transitionCallbacks),s.formState!==void 0&&(te=s.formState)),i=Dv(t,1,!0,i,s??null,l,f,m,x,I,H,te),i.context=jv(null),s=i.current,l=Mn(),l=hi(l),f=Si(l),f.callback=null,wi(s,f,l),s=l,i.current.lanes=s,Mr(i,s),wr(i),t[Ln]=i.current,ih(t),new Tc(i)},vl.version="19.1.0",vl}var Zv;function eS(){if(Zv)return Ah.exports;Zv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ah.exports=JE(),Ah.exports}var tS=eS(),_l={},Jv;function nS(){if(Jv)return _l;Jv=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.parse=d,_l.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function d(R,D){const B=new u,L=R.length;if(L<2)return B;const z=(D==null?void 0:D.decode)||b;let F=0;do{const Y=R.indexOf("=",F);if(Y===-1)break;const ne=R.indexOf(";",F),re=ne===-1?L:ne;if(Y>re){F=R.lastIndexOf(";",Y-1)+1;continue}const V=h(R,F,Y),q=y(R,Y,V),N=R.slice(V,q);if(B[N]===void 0){let O=h(R,Y+1,re),A=y(R,re,O);const S=z(R.slice(O,A));B[N]=S}F=re+1}while(F<L);return B}function h(R,D,B){do{const L=R.charCodeAt(D);if(L!==32&&L!==9)return D}while(++D<B);return B}function y(R,D,B){for(;D>B;){const L=R.charCodeAt(--D);if(L!==32&&L!==9)return D+1}return B}function g(R,D,B){const L=(B==null?void 0:B.encode)||encodeURIComponent;if(!r.test(R))throw new TypeError(`argument name is invalid: ${R}`);const z=L(D);if(!e.test(z))throw new TypeError(`argument val is invalid: ${D}`);let F=R+"="+z;if(!B)return F;if(B.maxAge!==void 0){if(!Number.isInteger(B.maxAge))throw new TypeError(`option maxAge is invalid: ${B.maxAge}`);F+="; Max-Age="+B.maxAge}if(B.domain){if(!n.test(B.domain))throw new TypeError(`option domain is invalid: ${B.domain}`);F+="; Domain="+B.domain}if(B.path){if(!a.test(B.path))throw new TypeError(`option path is invalid: ${B.path}`);F+="; Path="+B.path}if(B.expires){if(!E(B.expires)||!Number.isFinite(B.expires.valueOf()))throw new TypeError(`option expires is invalid: ${B.expires}`);F+="; Expires="+B.expires.toUTCString()}if(B.httpOnly&&(F+="; HttpOnly"),B.secure&&(F+="; Secure"),B.partitioned&&(F+="; Partitioned"),B.priority)switch(typeof B.priority=="string"?B.priority.toLowerCase():void 0){case"low":F+="; Priority=Low";break;case"medium":F+="; Priority=Medium";break;case"high":F+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${B.priority}`)}if(B.sameSite)switch(typeof B.sameSite=="string"?B.sameSite.toLowerCase():B.sameSite){case!0:case"strict":F+="; SameSite=Strict";break;case"lax":F+="; SameSite=Lax";break;case"none":F+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${B.sameSite}`)}return F}function b(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function E(R){return o.call(R)==="[object Date]"}return _l}nS();var e0="popstate";function rS(r={}){function e(a,o){let{pathname:u,search:d,hash:h}=a.location;return em("",{pathname:u,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:kl(o)}return aS(e,n,null,r)}function Et(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ar(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iS(){return Math.random().toString(36).substring(2,10)}function t0(r,e){return{usr:r.state,key:r.key,idx:e}}function em(r,e,n=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?no(e):e,state:n,key:e&&e.key||a||iS()}}function kl({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function no(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function aS(r,e,n,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,d=o.history,h="POP",y=null,g=b();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function b(){return(d.state||{idx:null}).idx}function E(){h="POP";let z=b(),F=z==null?null:z-g;g=z,y&&y({action:h,location:L.location,delta:F})}function R(z,F){h="PUSH";let Y=em(L.location,z,F);g=b()+1;let ne=t0(Y,g),re=L.createHref(Y);try{d.pushState(ne,"",re)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;o.location.assign(re)}u&&y&&y({action:h,location:L.location,delta:1})}function D(z,F){h="REPLACE";let Y=em(L.location,z,F);g=b();let ne=t0(Y,g),re=L.createHref(Y);d.replaceState(ne,"",re),u&&y&&y({action:h,location:L.location,delta:0})}function B(z){return sS(z)}let L={get action(){return h},get location(){return r(o,d)},listen(z){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(e0,E),y=z,()=>{o.removeEventListener(e0,E),y=null}},createHref(z){return e(o,z)},createURL:B,encodeLocation(z){let F=B(z);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:R,replace:D,go(z){return d.go(z)}};return L}function sS(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let a=typeof r=="string"?r:kl(r);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function z_(r,e,n="/"){return oS(r,e,n,!1)}function oS(r,e,n,a){let o=typeof e=="string"?no(e):e,u=oi(o.pathname||"/",n);if(u==null)return null;let d=U_(r);lS(d);let h=null;for(let y=0;h==null&&y<d.length;++y){let g=_S(u);h=yS(d[y],g,a)}return h}function U_(r,e=[],n=[],a=""){let o=(u,d,h)=>{let y={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};y.relativePath.startsWith("/")&&(Et(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length));let g=ai([a,y.relativePath]),b=n.concat(y);u.children&&u.children.length>0&&(Et(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),U_(u.children,e,b,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:pS(g,u.index),routesMeta:b})};return r.forEach((u,d)=>{var h;if(u.path===""||!((h=u.path)!=null&&h.includes("?")))o(u,d);else for(let y of B_(u.path))o(u,d,y)}),e}function B_(r){let e=r.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let d=B_(a.join("/")),h=[];return h.push(...d.map(y=>y===""?u:[u,y].join("/"))),o&&h.push(...d),h.map(y=>r.startsWith("/")&&y===""?"/":y)}function lS(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:gS(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var uS=/^:[\w-]+$/,cS=3,fS=2,dS=1,hS=10,mS=-2,n0=r=>r==="*";function pS(r,e){let n=r.split("/"),a=n.length;return n.some(n0)&&(a+=mS),e&&(a+=fS),n.filter(o=>!n0(o)).reduce((o,u)=>o+(uS.test(u)?cS:u===""?dS:hS),a)}function gS(r,e){return r.length===e.length&&r.slice(0,-1).every((a,o)=>a===e[o])?r[r.length-1]-e[e.length-1]:0}function yS(r,e,n=!1){let{routesMeta:a}=r,o={},u="/",d=[];for(let h=0;h<a.length;++h){let y=a[h],g=h===a.length-1,b=u==="/"?e:e.slice(u.length)||"/",E=qc({path:y.relativePath,caseSensitive:y.caseSensitive,end:g},b),R=y.route;if(!E&&g&&n&&!a[a.length-1].route.index&&(E=qc({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},b)),!E)return null;Object.assign(o,E.params),d.push({params:o,pathname:ai([u,E.pathname]),pathnameBase:wS(ai([u,E.pathnameBase])),route:R}),E.pathnameBase!=="/"&&(u=ai([u,E.pathnameBase]))}return d}function qc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,a]=vS(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:a.reduce((g,{paramName:b,isOptional:E},R)=>{if(b==="*"){let B=h[R]||"";d=u.slice(0,u.length-B.length).replace(/(.)\/+$/,"$1")}const D=h[R];return E&&!D?g[b]=void 0:g[b]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:r}}function vS(r,e=!1,n=!0){ar(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,y)=>(a.push({paramName:h,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function _S(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ar(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function oi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=r.charAt(n);return a&&a!=="/"?null:r.slice(n)||"/"}function bS(r,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof r=="string"?no(r):r;return{pathname:n?n.startsWith("/")?n:ES(n,e):e,search:TS(a),hash:AS(o)}}function ES(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Nh(r,e,n,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SS(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function H_(r){let e=SS(r);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function q_(r,e,n,a=!1){let o;typeof r=="string"?o=no(r):(o={...r},Et(!o.pathname||!o.pathname.includes("?"),Nh("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),Nh("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),Nh("#","search","hash",o)));let u=r===""||o.pathname==="",d=u?"/":o.pathname,h;if(d==null)h=n;else{let E=e.length-1;if(!a&&d.startsWith("..")){let R=d.split("/");for(;R[0]==="..";)R.shift(),E-=1;o.pathname=R.join("/")}h=E>=0?e[E]:"/"}let y=bS(o,h),g=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(g||b)&&(y.pathname+="/"),y}var ai=r=>r.join("/").replace(/\/\/+/g,"/"),wS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),TS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,AS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function xS(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var F_=["POST","PUT","PATCH","DELETE"];new Set(F_);var RS=["GET",...F_];new Set(RS);var ro=U.createContext(null);ro.displayName="DataRouter";var rf=U.createContext(null);rf.displayName="DataRouterState";var G_=U.createContext({isTransitioning:!1});G_.displayName="ViewTransition";var CS=U.createContext(new Map);CS.displayName="Fetchers";var NS=U.createContext(null);NS.displayName="Await";var Ir=U.createContext(null);Ir.displayName="Navigation";var $l=U.createContext(null);$l.displayName="Location";var Dr=U.createContext({outlet:null,matches:[],isDataRoute:!1});Dr.displayName="Route";var Om=U.createContext(null);Om.displayName="RouteError";function OS(r,{relative:e}={}){Et(Ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=U.useContext(Ir),{hash:o,pathname:u,search:d}=Yl(r,{relative:e}),h=u;return n!=="/"&&(h=u==="/"?n:ai([n,u])),a.createHref({pathname:h,search:d,hash:o})}function Ql(){return U.useContext($l)!=null}function Xi(){return Et(Ql(),"useLocation() may be used only in the context of a <Router> component."),U.useContext($l).location}var $_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Q_(r){U.useContext(Ir).static||U.useLayoutEffect(r)}function Kl(){let{isDataRoute:r}=U.useContext(Dr);return r?FS():IS()}function IS(){Et(Ql(),"useNavigate() may be used only in the context of a <Router> component.");let r=U.useContext(ro),{basename:e,navigator:n}=U.useContext(Ir),{matches:a}=U.useContext(Dr),{pathname:o}=Xi(),u=JSON.stringify(H_(a)),d=U.useRef(!1);return Q_(()=>{d.current=!0}),U.useCallback((y,g={})=>{if(ar(d.current,$_),!d.current)return;if(typeof y=="number"){n.go(y);return}let b=q_(y,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:ai([e,b.pathname])),(g.replace?n.replace:n.push)(b,g.state,g)},[e,n,u,o,r])}U.createContext(null);function DS(){let{matches:r}=U.useContext(Dr),e=r[r.length-1];return e?e.params:{}}function Yl(r,{relative:e}={}){let{matches:n}=U.useContext(Dr),{pathname:a}=Xi(),o=JSON.stringify(H_(n));return U.useMemo(()=>q_(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function jS(r,e){return K_(r,e)}function K_(r,e,n,a){var F;Et(Ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=U.useContext(Ir),{matches:u}=U.useContext(Dr),d=u[u.length-1],h=d?d.params:{},y=d?d.pathname:"/",g=d?d.pathnameBase:"/",b=d&&d.route;{let Y=b&&b.path||"";Y_(y,!b||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let E=Xi(),R;if(e){let Y=typeof e=="string"?no(e):e;Et(g==="/"||((F=Y.pathname)==null?void 0:F.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),R=Y}else R=E;let D=R.pathname||"/",B=D;if(g!=="/"){let Y=g.replace(/^\//,"").split("/");B="/"+D.replace(/^\//,"").split("/").slice(Y.length).join("/")}let L=z_(r,{pathname:B});ar(b||L!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),ar(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=LS(L&&L.map(Y=>Object.assign({},Y,{params:Object.assign({},h,Y.params),pathname:ai([g,o.encodeLocation?o.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?g:ai([g,o.encodeLocation?o.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),u,n,a);return e&&z?U.createElement($l.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},z):z}function MS(){let r=qS(),e=xS(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=U.createElement(U.Fragment,null,U.createElement("p",null,"💿 Hey developer 👋"),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:u},"ErrorBoundary")," or"," ",U.createElement("code",{style:u},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:o},n):null,d)}var kS=U.createElement(MS,null),PS=class extends U.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?U.createElement(Dr.Provider,{value:this.props.routeContext},U.createElement(Om.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VS({routeContext:r,match:e,children:n}){let a=U.useContext(ro);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Dr.Provider,{value:r},n)}function LS(r,e=[],n=null,a=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,u=n==null?void 0:n.errors;if(u!=null){let y=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);Et(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let d=!1,h=-1;if(n)for(let y=0;y<o.length;y++){let g=o[y];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=y),g.route.id){let{loaderData:b,errors:E}=n,R=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||R){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((y,g,b)=>{let E,R=!1,D=null,B=null;n&&(E=u&&g.route.id?u[g.route.id]:void 0,D=g.route.errorElement||kS,d&&(h<0&&b===0?(Y_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,B=null):h===b&&(R=!0,B=g.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,b+1)),z=()=>{let F;return E?F=D:R?F=B:g.route.Component?F=U.createElement(g.route.Component,null):g.route.element?F=g.route.element:F=y,U.createElement(VS,{match:g,routeContext:{outlet:y,matches:L,isDataRoute:n!=null},children:F})};return n&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?U.createElement(PS,{location:n.location,revalidation:n.revalidation,component:D,error:E,children:z(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):z()},null)}function Im(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zS(r){let e=U.useContext(ro);return Et(e,Im(r)),e}function US(r){let e=U.useContext(rf);return Et(e,Im(r)),e}function BS(r){let e=U.useContext(Dr);return Et(e,Im(r)),e}function Dm(r){let e=BS(r),n=e.matches[e.matches.length-1];return Et(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function HS(){return Dm("useRouteId")}function qS(){var a;let r=U.useContext(Om),e=US("useRouteError"),n=Dm("useRouteError");return r!==void 0?r:(a=e.errors)==null?void 0:a[n]}function FS(){let{router:r}=zS("useNavigate"),e=Dm("useNavigate"),n=U.useRef(!1);return Q_(()=>{n.current=!0}),U.useCallback(async(o,u={})=>{ar(n.current,$_),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var r0={};function Y_(r,e,n){!e&&!r0[r]&&(r0[r]=!0,ar(!1,n))}U.memo(GS);function GS({routes:r,future:e,state:n}){return K_(r,void 0,n,e)}function Tr(r){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $S({basename:r="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:u=!1}){Et(!Ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),h=U.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=no(n));let{pathname:y="/",search:g="",hash:b="",state:E=null,key:R="default"}=n,D=U.useMemo(()=>{let B=oi(y,d);return B==null?null:{location:{pathname:B,search:g,hash:b,state:E,key:R},navigationType:a}},[d,y,g,b,E,R,a]);return ar(D!=null,`<Router basename="${d}"> is not able to match the URL "${y}${g}${b}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:U.createElement(Ir.Provider,{value:h},U.createElement($l.Provider,{children:e,value:D}))}function QS({children:r,location:e}){return jS(tm(r),e)}function tm(r,e=[]){let n=[];return U.Children.forEach(r,(a,o)=>{if(!U.isValidElement(a))return;let u=[...e,o];if(a.type===U.Fragment){n.push.apply(n,tm(a.props.children,u));return}Et(a.type===Tr,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=tm(a.props.children,u)),n.push(d)}),n}var Mc="get",kc="application/x-www-form-urlencoded";function af(r){return r!=null&&typeof r.tagName=="string"}function KS(r){return af(r)&&r.tagName.toLowerCase()==="button"}function YS(r){return af(r)&&r.tagName.toLowerCase()==="form"}function XS(r){return af(r)&&r.tagName.toLowerCase()==="input"}function WS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function ZS(r,e){return r.button===0&&(!e||e==="_self")&&!WS(r)}function nm(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let a=r[n];return e.concat(Array.isArray(a)?a.map(o=>[n,o]):[[n,a]])},[]))}function JS(r,e){let n=nm(r);return e&&e.forEach((a,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Rc=null;function ew(){if(Rc===null)try{new FormData(document.createElement("form"),0),Rc=!1}catch{Rc=!0}return Rc}var tw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Oh(r){return r!=null&&!tw.has(r)?(ar(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kc}"`),null):r}function nw(r,e){let n,a,o,u,d;if(YS(r)){let h=r.getAttribute("action");a=h?oi(h,e):null,n=r.getAttribute("method")||Mc,o=Oh(r.getAttribute("enctype"))||kc,u=new FormData(r)}else if(KS(r)||XS(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=r.getAttribute("formaction")||h.getAttribute("action");if(a=y?oi(y,e):null,n=r.getAttribute("formmethod")||h.getAttribute("method")||Mc,o=Oh(r.getAttribute("formenctype"))||Oh(h.getAttribute("enctype"))||kc,u=new FormData(h,r),!ew()){let{name:g,type:b,value:E}=r;if(b==="image"){let R=g?`${g}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else g&&u.append(g,E)}}else{if(af(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Mc,a=null,o=kc,d=r}return u&&o==="text/plain"&&(d=u,u=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:u,body:d}}function jm(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function rw(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function aw(r,e,n){let a=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await rw(u,n);return d.links?d.links():[]}return[]}));return uw(a.flat(1).filter(iw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function i0(r,e,n,a,o,u){let d=(y,g)=>n[g]?y.route.id!==n[g].route.id:!0,h=(y,g)=>{var b;return n[g].pathname!==y.pathname||((b=n[g].route.path)==null?void 0:b.endsWith("*"))&&n[g].params["*"]!==y.params["*"]};return u==="assets"?e.filter((y,g)=>d(y,g)||h(y,g)):u==="data"?e.filter((y,g)=>{var E;let b=a.routes[y.route.id];if(!b||!b.hasLoader)return!1;if(d(y,g)||h(y,g))return!0;if(y.route.shouldRevalidate){let R=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(r,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function sw(r,e,{includeHydrateFallback:n}={}){return ow(r.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function ow(r){return[...new Set(r)]}function lw(r){let e={},n=Object.keys(r).sort();for(let a of n)e[a]=r[a];return e}function uw(r,e){let n=new Set;return new Set(e),r.reduce((a,o)=>{let u=JSON.stringify(lw(o));return n.has(u)||(n.add(u),a.push({key:u,link:o})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cw=new Set([100,101,204,205]);function fw(r,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":e&&oi(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function X_(){let r=U.useContext(ro);return jm(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function dw(){let r=U.useContext(rf);return jm(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Mm=U.createContext(void 0);Mm.displayName="FrameworkContext";function W_(){let r=U.useContext(Mm);return jm(r,"You must render this element inside a <HydratedRouter> element"),r}function hw(r,e){let n=U.useContext(Mm),[a,o]=U.useState(!1),[u,d]=U.useState(!1),{onFocus:h,onBlur:y,onMouseEnter:g,onMouseLeave:b,onTouchStart:E}=e,R=U.useRef(null);U.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let L=F=>{F.forEach(Y=>{d(Y.isIntersecting)})},z=new IntersectionObserver(L,{threshold:.5});return R.current&&z.observe(R.current),()=>{z.disconnect()}}},[r]),U.useEffect(()=>{if(a){let L=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(L)}}},[a]);let D=()=>{o(!0)},B=()=>{o(!1),d(!1)};return n?r!=="intent"?[u,R,{}]:[u,R,{onFocus:bl(h,D),onBlur:bl(y,B),onMouseEnter:bl(g,D),onMouseLeave:bl(b,B),onTouchStart:bl(E,D)}]:[!1,R,{}]}function bl(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function mw({page:r,...e}){let{router:n}=X_(),a=U.useMemo(()=>z_(n.routes,r,n.basename),[n.routes,r,n.basename]);return a?U.createElement(gw,{page:r,matches:a,...e}):null}function pw(r){let{manifest:e,routeModules:n}=W_(),[a,o]=U.useState([]);return U.useEffect(()=>{let u=!1;return aw(r,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[r,e,n]),a}function gw({page:r,matches:e,...n}){let a=Xi(),{manifest:o,routeModules:u}=W_(),{basename:d}=X_(),{loaderData:h,matches:y}=dw(),g=U.useMemo(()=>i0(r,e,y,o,a,"data"),[r,e,y,o,a]),b=U.useMemo(()=>i0(r,e,y,o,a,"assets"),[r,e,y,o,a]),E=U.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let B=new Set,L=!1;if(e.forEach(F=>{var ne;let Y=o.routes[F.route.id];!Y||!Y.hasLoader||(!g.some(re=>re.route.id===F.route.id)&&F.route.id in h&&((ne=u[F.route.id])!=null&&ne.shouldRevalidate)||Y.hasClientLoader?L=!0:B.add(F.route.id))}),B.size===0)return[];let z=fw(r,d);return L&&B.size>0&&z.searchParams.set("_routes",e.filter(F=>B.has(F.route.id)).map(F=>F.route.id).join(",")),[z.pathname+z.search]},[d,h,a,o,g,e,r,u]),R=U.useMemo(()=>sw(b,o),[b,o]),D=pw(b);return U.createElement(U.Fragment,null,E.map(B=>U.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),R.map(B=>U.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),D.map(({key:B,link:L})=>U.createElement("link",{key:B,...L})))}function yw(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Z_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Z_&&(window.__reactRouterVersion="7.6.2")}catch{}function vw({basename:r,children:e,window:n}){let a=U.useRef();a.current==null&&(a.current=rS({window:n,v5Compat:!0}));let o=a.current,[u,d]=U.useState({action:o.action,location:o.location}),h=U.useCallback(y=>{U.startTransition(()=>d(y))},[d]);return U.useLayoutEffect(()=>o.listen(h),[o,h]),U.createElement($S,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var J_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ft=U.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:u,replace:d,state:h,target:y,to:g,preventScrollReset:b,viewTransition:E,...R},D){let{basename:B}=U.useContext(Ir),L=typeof g=="string"&&J_.test(g),z,F=!1;if(typeof g=="string"&&L&&(z=g,Z_))try{let A=new URL(window.location.href),S=g.startsWith("//")?new URL(A.protocol+g):new URL(g),j=oi(S.pathname,B);S.origin===A.origin&&j!=null?g=j+S.search+S.hash:F=!0}catch{ar(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=OS(g,{relative:o}),[ne,re,V]=hw(a,R),q=Sw(g,{replace:d,state:h,target:y,preventScrollReset:b,relative:o,viewTransition:E});function N(A){e&&e(A),A.defaultPrevented||q(A)}let O=U.createElement("a",{...R,...V,href:z||Y,onClick:F||u?e:N,ref:yw(D,re),target:y,"data-discover":!L&&n==="render"?"true":void 0});return ne&&!L?U.createElement(U.Fragment,null,O,U.createElement(mw,{page:Y})):O});Ft.displayName="Link";var _w=U.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:u,to:d,viewTransition:h,children:y,...g},b){let E=Yl(d,{relative:g.relative}),R=Xi(),D=U.useContext(rf),{navigator:B,basename:L}=U.useContext(Ir),z=D!=null&&Rw(E)&&h===!0,F=B.encodeLocation?B.encodeLocation(E).pathname:E.pathname,Y=R.pathname,ne=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),ne=ne?ne.toLowerCase():null,F=F.toLowerCase()),ne&&L&&(ne=oi(ne,L)||ne);const re=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let V=Y===F||!o&&Y.startsWith(F)&&Y.charAt(re)==="/",q=ne!=null&&(ne===F||!o&&ne.startsWith(F)&&ne.charAt(F.length)==="/"),N={isActive:V,isPending:q,isTransitioning:z},O=V?e:void 0,A;typeof a=="function"?A=a(N):A=[a,V?"active":null,q?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let S=typeof u=="function"?u(N):u;return U.createElement(Ft,{...g,"aria-current":O,className:A,ref:b,style:S,to:d,viewTransition:h},typeof y=="function"?y(N):y)});_w.displayName="NavLink";var bw=U.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:u,method:d=Mc,action:h,onSubmit:y,relative:g,preventScrollReset:b,viewTransition:E,...R},D)=>{let B=Aw(),L=xw(h,{relative:g}),z=d.toLowerCase()==="get"?"get":"post",F=typeof h=="string"&&J_.test(h),Y=ne=>{if(y&&y(ne),ne.defaultPrevented)return;ne.preventDefault();let re=ne.nativeEvent.submitter,V=(re==null?void 0:re.getAttribute("formmethod"))||d;B(re||ne.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:o,state:u,relative:g,preventScrollReset:b,viewTransition:E})};return U.createElement("form",{ref:D,method:z,action:L,onSubmit:a?y:Y,...R,"data-discover":!F&&r==="render"?"true":void 0})});bw.displayName="Form";function Ew(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e1(r){let e=U.useContext(ro);return Et(e,Ew(r)),e}function Sw(r,{target:e,replace:n,state:a,preventScrollReset:o,relative:u,viewTransition:d}={}){let h=Kl(),y=Xi(),g=Yl(r,{relative:u});return U.useCallback(b=>{if(ZS(b,e)){b.preventDefault();let E=n!==void 0?n:kl(y)===kl(g);h(r,{replace:E,state:a,preventScrollReset:o,relative:u,viewTransition:d})}},[y,h,g,n,a,e,r,o,u,d])}function io(r){ar(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=U.useRef(nm(r)),n=U.useRef(!1),a=Xi(),o=U.useMemo(()=>JS(a.search,n.current?null:e.current),[a.search]),u=Kl(),d=U.useCallback((h,y)=>{const g=nm(typeof h=="function"?h(o):h);n.current=!0,u("?"+g,y)},[u,o]);return[o,d]}var ww=0,Tw=()=>`__${String(++ww)}__`;function Aw(){let{router:r}=e1("useSubmit"),{basename:e}=U.useContext(Ir),n=HS();return U.useCallback(async(a,o={})=>{let{action:u,method:d,encType:h,formData:y,body:g}=nw(a,e);if(o.navigate===!1){let b=o.fetcherKey||Tw();await r.fetch(b,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:g,formMethod:o.method||d,formEncType:o.encType||h,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:g,formMethod:o.method||d,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function xw(r,{relative:e}={}){let{basename:n}=U.useContext(Ir),a=U.useContext(Dr);Et(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...Yl(r||".",{relative:e})},d=Xi();if(r==null){u.search=d.search;let h=new URLSearchParams(u.search),y=h.getAll("index");if(y.some(b=>b==="")){h.delete("index"),y.filter(E=>E).forEach(E=>h.append("index",E));let b=h.toString();u.search=b?`?${b}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:ai([n,u.pathname])),kl(u)}function Rw(r,e={}){let n=U.useContext(G_);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=e1("useViewTransitionState"),o=Yl(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=oi(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=oi(n.nextLocation.pathname,a)||n.nextLocation.pathname;return qc(o.pathname,d)!=null||qc(o.pathname,u)!=null}[...cw];const Cw="modulepreload",Nw=function(r){return"https://juanmaacampos.github.io/shop_template/"+r},a0={},Pl=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){let d=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),y=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=d(n.map(g=>{if(g=Nw(g),g in a0)return;a0[g]=!0;const b=g.endsWith(".css"),E=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${E}`))return;const R=document.createElement("link");if(R.rel=b?"stylesheet":Cw,b||(R.as="script"),R.crossOrigin="",R.href=g,y&&R.setAttribute("nonce",y),document.head.appendChild(R),b)return new Promise((D,B)=>{R.addEventListener("load",D),R.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return o.then(d=>{for(const h of d||[])h.status==="rejected"&&u(h.reason);return e().catch(u)})};function Ow(r){const[e,n]=U.useState(null),[a,o]=U.useState(null),[u,d]=U.useState([]),[h,y]=U.useState(!0),[g,b]=U.useState(null);return U.useEffect(()=>{async function E(){try{y(!0),b(null);const[R,D]=await Promise.all([r.getBusinessInfo(),r.getFullMenu()]);n(R),o(R),d(D)}catch(R){b(R.message),console.error("Error loading menu:",R)}finally{y(!1)}}r&&E()},[r]),{business:e,restaurant:a,menu:u,loading:h,error:g}}function t1(){const r=()=>{try{const g=localStorage.getItem("cartItems");if(g)return JSON.parse(g)}catch{}return[]},[e,n]=U.useState(r);U.useEffect(()=>{try{localStorage.setItem("cartItems",JSON.stringify(e))}catch{}},[e]);const a=(g,b=1)=>{g.trackStock&&typeof g.stock=="number"?n(E=>{const R=E.find(L=>L.id===g.id),B=(R?R.quantity:0)+b;return B>g.stock?(alert(`Stock insuficiente. Solo quedan ${g.stock} unidades disponibles.`),E):R?E.map(L=>L.id===g.id?{...L,quantity:B}:L):[...E,{...g,quantity:b}]}):n(E=>E.find(D=>D.id===g.id)?E.map(D=>D.id===g.id?{...D,quantity:D.quantity+b}:D):[...E,{...g,quantity:b}])},o=g=>{n(b=>b.filter(E=>E.id!==g))},u=(g,b)=>{if(b<=0){o(g);return}n(E=>E.map(R=>R.id===g?R.trackStock&&typeof R.stock=="number"&&b>R.stock?(alert(`Stock insuficiente. Solo quedan ${R.stock} unidades disponibles.`),R):{...R,quantity:b}:R))},d=()=>{n([])},h=e.reduce((g,b)=>{const E=typeof b.price=="number"?b.price:parseFloat(b.price)||0,R=typeof b.quantity=="number"?b.quantity:parseInt(b.quantity)||0;return g+E*R},0),y=e.reduce((g,b)=>{const E=typeof b.quantity=="number"?b.quantity:parseInt(b.quantity)||0;return g+E},0);return{cart:e,addToCart:a,removeFromCart:o,updateQuantity:u,clearCart:d,cartTotal:h,cartCount:y,total:h,itemCount:y}}function Iw(r){const[e,n]=U.useState([]),[a,o]=U.useState(!0),[u,d]=U.useState(null);return U.useEffect(()=>{async function h(){try{o(!0),d(null);const y=await r.getFeaturedItems();n(y)}catch(y){d(y.message),console.error("Error loading featured items:",y)}finally{o(!1)}}r&&h()},[r]),{featuredItems:e,loading:a,error:u}}function Dw(r){const[e,n]=U.useState({});return U.useEffect(()=>{n(r==="store"?{businessName:"Tienda",menuName:"catálogo",menuNameCapitalized:"Catálogo",itemType:"producto",itemTypeCapitalized:"Producto",itemTypePlural:"productos",itemTypePluralCapitalized:"Productos",itemSingular:"producto",items:"productos",categoryType:"categoría",orderType:"orden de compra",orderTypeCapitalized:"Orden de Compra",addToCart:"Agregar al Carrito",viewCatalog:"Ver Catálogo",viewProducts:"Ver Productos",featuredProducts:"Productos Destacados",allProducts:"Todos los Productos",productDetails:"Detalles del Producto",orderSummary:"Resumen de Compra",placeOrder:"Realizar Pedido",serviceOptions:{delivery:"Envío a domicilio",pickup:"Retiro en tienda",shipping:"Envío postal"}}:{businessName:"Restaurante",menuName:"menú",menuNameCapitalized:"Menú",itemType:"plato",itemTypeCapitalized:"Plato",itemTypePlural:"platos",itemTypePluralCapitalized:"Platos",itemSingular:"plato",items:"platos",categoryType:"categoría",orderType:"pedido",orderTypeCapitalized:"Pedido",addToCart:"Agregar al Pedido",viewCatalog:"Ver Menú",viewProducts:"Ver Platos",featuredProducts:"Platos Destacados",allProducts:"Todos los Platos",productDetails:"Detalles del Plato",orderSummary:"Resumen del Pedido",placeOrder:"Realizar Pedido",serviceOptions:{dineIn:"Comer en el local",takeaway:"Para llevar",delivery:"Delivery"}})},[r]),e}function n1(r){var a;const e=Ow(r),n=Dw((a=e.business)==null?void 0:a.businessType);return{...e,terminology:n}}function r1(r,e={enabled:!0}){const[n,a]=U.useState(null),[o,u]=U.useState(null);U.useEffect(()=>{r&&e.enabled&&Pl(async()=>{const{createMenuSDK:b}=await Promise.resolve().then(()=>MC);return{createMenuSDK:b}},[]).then(({createMenuSDK:b})=>{const E=b(r.firebaseConfig,r.businessId);a(E),E.initialize().then(()=>{u(E.firebaseManager)}).catch(R=>{console.warn("⚠️ Failed to initialize SDK for firebaseManager:",R)})})},[r,e.enabled]);const d=n1(n),h=t1(),y=typeof h.cartTotal=="number"?h.cartTotal:0,g=typeof h.cartCount=="number"?h.cartCount:0;return{...d,...h,menuSDK:n,firebaseManager:o,total:y,itemCount:g,cartTotal:y,cartCount:g}}var s0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=function(r){const e=[];let n=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},jw=function(r){const e=[];let n=0,a=0;for(;n<r.length;){const o=r[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],d=r[n++],h=r[n++],y=((o&7)<<18|(u&63)<<12|(d&63)<<6|h&63)-65536;e[a++]=String.fromCharCode(55296+(y>>10)),e[a++]=String.fromCharCode(56320+(y&1023))}else{const u=r[n++],d=r[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},a1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const u=r[o],d=o+1<r.length,h=d?r[o+1]:0,y=o+2<r.length,g=y?r[o+2]:0,b=u>>2,E=(u&3)<<4|h>>4;let R=(h&15)<<2|g>>6,D=g&63;y||(D=64,d||(R=64)),a.push(n[b],n[E],n[R],n[D])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(i1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):jw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],h=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const E=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||h==null||g==null||E==null)throw new Mw;const R=u<<2|h>>4;if(a.push(R),g!==64){const D=h<<4&240|g>>2;if(a.push(D),E!==64){const B=g<<6&192|E;a.push(B)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Mw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kw=function(r){const e=i1(r);return a1.encodeByteArray(e,!0)},Fc=function(r){return kw(r).replace(/\./g,"")},Pw=function(r){try{return a1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=()=>Vw().__FIREBASE_DEFAULTS__,zw=()=>{if(typeof process>"u"||typeof s0>"u")return;const r=s0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Uw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Pw(r[1]);return e&&JSON.parse(e)},km=()=>{try{return Lw()||zw()||Uw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Bw=r=>{var e,n;return(n=(e=km())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},Pm=r=>{const e=Bw(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},s1=()=>{var r;return(r=km())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Fc(JSON.stringify(n)),Fc(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fw(){var r;const e=(r=km())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gw(){return!Fw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $w(){try{return typeof indexedDB=="object"}catch{return!1}}function Qw(){return new Promise((r,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="FirebaseError";class Wi extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=Kw,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l1.prototype.create)}}class l1{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?Yw(u,a):"Error",h=`${this.serviceName}: ${d} (${o}).`;return new Wi(o,h,a)}}function Yw(r,e){return r.replace(Xw,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const Xw=/\{\$([^}]+)}/g;function rm(r,e){if(r===e)return!0;const n=Object.keys(r),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=r[o],d=e[o];if(o0(u)&&o0(d)){if(!rm(u,d))return!1}else if(u!==d)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function o0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(r){return r&&r._delegate?r._delegate:r}class Ha{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new Hw;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jw(e))try{this.getOrInitializeService({instanceIdentifier:Va})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=Va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Va){return this.instances.has(e)}getOptions(e=Va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(u);a===h&&d.resolve(o)}return o}onInit(e,n){var a;const o=this.normalizeInstanceIdentifier(n),u=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Zw(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Va){return this.component?this.component.multipleInstances?e:Va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zw(r){return r===Va?void 0:r}function Jw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ww(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ze||(Ze={}));const tT={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},nT=Ze.INFO,rT={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},iT=(r,e,...n)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=rT[e];if(o)console[o](`[${a}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class u1{constructor(e){this.name=e,this._logLevel=nT,this._logHandler=iT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const aT=(r,e)=>e.some(n=>r instanceof n);let l0,u0;function sT(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oT(){return u0||(u0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c1=new WeakMap,im=new WeakMap,f1=new WeakMap,Ih=new WeakMap,Vm=new WeakMap;function lT(r){const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",d)},u=()=>{n(qi(r.result)),o()},d=()=>{a(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&c1.set(n,r)}).catch(()=>{}),Vm.set(e,r),e}function uT(r){if(im.has(r))return;const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",d),r.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",d),r.addEventListener("abort",d)});im.set(r,e)}let am={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return im.get(r);if(e==="objectStoreNames")return r.objectStoreNames||f1.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function cT(r){am=r(am)}function fT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=r.call(Dh(this),e,...n);return f1.set(a,e.sort?e.sort():[e]),qi(a)}:oT().includes(r)?function(...e){return r.apply(Dh(this),e),qi(c1.get(this))}:function(...e){return qi(r.apply(Dh(this),e))}}function dT(r){return typeof r=="function"?fT(r):(r instanceof IDBTransaction&&uT(r),aT(r,sT())?new Proxy(r,am):r)}function qi(r){if(r instanceof IDBRequest)return lT(r);if(Ih.has(r))return Ih.get(r);const e=dT(r);return e!==r&&(Ih.set(r,e),Vm.set(e,r)),e}const Dh=r=>Vm.get(r);function hT(r,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const d=indexedDB.open(r,e),h=qi(d);return a&&d.addEventListener("upgradeneeded",y=>{a(qi(d.result),y.oldVersion,y.newVersion,qi(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),h.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const mT=["get","getKey","getAll","getAllKeys","count"],pT=["put","add","delete","clear"],jh=new Map;function c0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(jh.get(e))return jh.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=pT.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||mT.includes(n)))return;const u=async function(d,...h){const y=this.transaction(d,o?"readwrite":"readonly");let g=y.store;return a&&(g=g.index(h.shift())),(await Promise.all([g[n](...h),o&&y.done]))[0]};return jh.set(e,u),u}cT(r=>({...r,get:(e,n,a)=>c0(e,n)||r.get(e,n,a),has:(e,n)=>!!c0(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yT(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function yT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sm="@firebase/app",f0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new u1("@firebase/app"),vT="@firebase/app-compat",_T="@firebase/analytics-compat",bT="@firebase/analytics",ET="@firebase/app-check-compat",ST="@firebase/app-check",wT="@firebase/auth",TT="@firebase/auth-compat",AT="@firebase/database",xT="@firebase/data-connect",RT="@firebase/database-compat",CT="@firebase/functions",NT="@firebase/functions-compat",OT="@firebase/installations",IT="@firebase/installations-compat",DT="@firebase/messaging",jT="@firebase/messaging-compat",MT="@firebase/performance",kT="@firebase/performance-compat",PT="@firebase/remote-config",VT="@firebase/remote-config-compat",LT="@firebase/storage",zT="@firebase/storage-compat",UT="@firebase/firestore",BT="@firebase/vertexai-preview",HT="@firebase/firestore-compat",qT="firebase",FT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc="[DEFAULT]",GT={[sm]:"fire-core",[vT]:"fire-core-compat",[bT]:"fire-analytics",[_T]:"fire-analytics-compat",[ST]:"fire-app-check",[ET]:"fire-app-check-compat",[wT]:"fire-auth",[TT]:"fire-auth-compat",[AT]:"fire-rtdb",[xT]:"fire-data-connect",[RT]:"fire-rtdb-compat",[CT]:"fire-fn",[NT]:"fire-fn-compat",[OT]:"fire-iid",[IT]:"fire-iid-compat",[DT]:"fire-fcm",[jT]:"fire-fcm-compat",[MT]:"fire-perf",[kT]:"fire-perf-compat",[PT]:"fire-rc",[VT]:"fire-rc-compat",[LT]:"fire-gcs",[zT]:"fire-gcs-compat",[UT]:"fire-fst",[HT]:"fire-fst-compat",[BT]:"fire-vertex","fire-js":"fire-js",[qT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new Map,om=new Map,lm=new Map;function d0(r,e){try{r.container.addComponent(e)}catch(n){li.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Gs(r){const e=r.name;if(lm.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;lm.set(e,r);for(const n of qa.values())d0(n,r);for(const n of om.values())d0(n,r);return!0}function sf(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function $T(r,e,n=Gc){sf(r,e).clearInstance(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new l1("app","Firebase",QT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=FT;function h1(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const a=Object.assign({name:Gc,automaticDataCollectionEnabled:!1},e),o=a.name;if(typeof o!="string"||!o)throw Fi.create("bad-app-name",{appName:String(o)});if(n||(n=s1()),!n)throw Fi.create("no-options");const u=qa.get(o);if(u){if(rm(n,u.options)&&rm(a,u.config))return u;throw Fi.create("duplicate-app",{appName:o})}const d=new eT(o);for(const y of lm.values())d.addComponent(y);const h=new KT(n,a,d);return qa.set(o,h),h}function Lm(r=Gc){const e=qa.get(r);if(!e&&r===Gc&&s1())return h1();if(!e)throw Fi.create("no-app",{appName:r});return e}function YT(){return Array.from(qa.values())}async function h0(r){let e=!1;const n=r.name;qa.has(n)?(e=!0,qa.delete(n)):om.has(n)&&r.decRefCount()<=0&&(om.delete(n),e=!0),e&&(await Promise.all(r.container.getProviders().map(a=>a.delete())),r.isDeleted=!0)}function Ar(r,e,n){var a;let o=(a=GT[r])!==null&&a!==void 0?a:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const h=[`Unable to register library "${o}" with version "${e}":`];u&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&h.push("and"),d&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(h.join(" "));return}Gs(new Ha(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="firebase-heartbeat-database",WT=1,Vl="firebase-heartbeat-store";let Mh=null;function m1(){return Mh||(Mh=hT(XT,WT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Fi.create("idb-open",{originalErrorMessage:r.message})})),Mh}async function ZT(r){try{const n=(await m1()).transaction(Vl),a=await n.objectStore(Vl).get(p1(r));return await n.done,a}catch(e){if(e instanceof Wi)li.warn(e.message);else{const n=Fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(n.message)}}}async function m0(r,e){try{const a=(await m1()).transaction(Vl,"readwrite");await a.objectStore(Vl).put(e,p1(r)),await a.done}catch(n){if(n instanceof Wi)li.warn(n.message);else{const a=Fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});li.warn(a.message)}}}function p1(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=1024,e4=30*24*60*60*1e3;class t4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new r4(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=p0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const h=new Date(d.date).valueOf();return Date.now()-h<=e4}),this._storage.overwrite(this._heartbeatsCache))}catch(a){li.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p0(),{heartbeatsToSend:a,unsentEntries:o}=n4(this._heartbeatsCache.heartbeats),u=Fc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return li.warn(n),""}}}function p0(){return new Date().toISOString().substring(0,10)}function n4(r,e=JT){const n=[];let a=r.slice();for(const o of r){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),g0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),g0(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class r4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $w()?Qw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return m0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return m0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function g0(r){return Fc(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(r){Gs(new Ha("platform-logger",e=>new gT(e),"PRIVATE")),Gs(new Ha("heartbeat",e=>new t4(e),"PRIVATE")),Ar(sm,f0,r),Ar(sm,f0,"esm2017"),Ar("fire-js","")}i4("");var y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ua,g1;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,O){function A(){}A.prototype=O.prototype,N.D=O.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(S,j,k){for(var C=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)C[Z-2]=arguments[Z];return O.prototype[j].apply(S,C)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,O,A){A||(A=0);var S=Array(16);if(typeof O=="string")for(var j=0;16>j;++j)S[j]=O.charCodeAt(A++)|O.charCodeAt(A++)<<8|O.charCodeAt(A++)<<16|O.charCodeAt(A++)<<24;else for(j=0;16>j;++j)S[j]=O[A++]|O[A++]<<8|O[A++]<<16|O[A++]<<24;O=N.g[0],A=N.g[1],j=N.g[2];var k=N.g[3],C=O+(k^A&(j^k))+S[0]+3614090360&4294967295;O=A+(C<<7&4294967295|C>>>25),C=k+(j^O&(A^j))+S[1]+3905402710&4294967295,k=O+(C<<12&4294967295|C>>>20),C=j+(A^k&(O^A))+S[2]+606105819&4294967295,j=k+(C<<17&4294967295|C>>>15),C=A+(O^j&(k^O))+S[3]+3250441966&4294967295,A=j+(C<<22&4294967295|C>>>10),C=O+(k^A&(j^k))+S[4]+4118548399&4294967295,O=A+(C<<7&4294967295|C>>>25),C=k+(j^O&(A^j))+S[5]+1200080426&4294967295,k=O+(C<<12&4294967295|C>>>20),C=j+(A^k&(O^A))+S[6]+2821735955&4294967295,j=k+(C<<17&4294967295|C>>>15),C=A+(O^j&(k^O))+S[7]+4249261313&4294967295,A=j+(C<<22&4294967295|C>>>10),C=O+(k^A&(j^k))+S[8]+1770035416&4294967295,O=A+(C<<7&4294967295|C>>>25),C=k+(j^O&(A^j))+S[9]+2336552879&4294967295,k=O+(C<<12&4294967295|C>>>20),C=j+(A^k&(O^A))+S[10]+4294925233&4294967295,j=k+(C<<17&4294967295|C>>>15),C=A+(O^j&(k^O))+S[11]+2304563134&4294967295,A=j+(C<<22&4294967295|C>>>10),C=O+(k^A&(j^k))+S[12]+1804603682&4294967295,O=A+(C<<7&4294967295|C>>>25),C=k+(j^O&(A^j))+S[13]+4254626195&4294967295,k=O+(C<<12&4294967295|C>>>20),C=j+(A^k&(O^A))+S[14]+2792965006&4294967295,j=k+(C<<17&4294967295|C>>>15),C=A+(O^j&(k^O))+S[15]+1236535329&4294967295,A=j+(C<<22&4294967295|C>>>10),C=O+(j^k&(A^j))+S[1]+4129170786&4294967295,O=A+(C<<5&4294967295|C>>>27),C=k+(A^j&(O^A))+S[6]+3225465664&4294967295,k=O+(C<<9&4294967295|C>>>23),C=j+(O^A&(k^O))+S[11]+643717713&4294967295,j=k+(C<<14&4294967295|C>>>18),C=A+(k^O&(j^k))+S[0]+3921069994&4294967295,A=j+(C<<20&4294967295|C>>>12),C=O+(j^k&(A^j))+S[5]+3593408605&4294967295,O=A+(C<<5&4294967295|C>>>27),C=k+(A^j&(O^A))+S[10]+38016083&4294967295,k=O+(C<<9&4294967295|C>>>23),C=j+(O^A&(k^O))+S[15]+3634488961&4294967295,j=k+(C<<14&4294967295|C>>>18),C=A+(k^O&(j^k))+S[4]+3889429448&4294967295,A=j+(C<<20&4294967295|C>>>12),C=O+(j^k&(A^j))+S[9]+568446438&4294967295,O=A+(C<<5&4294967295|C>>>27),C=k+(A^j&(O^A))+S[14]+3275163606&4294967295,k=O+(C<<9&4294967295|C>>>23),C=j+(O^A&(k^O))+S[3]+4107603335&4294967295,j=k+(C<<14&4294967295|C>>>18),C=A+(k^O&(j^k))+S[8]+1163531501&4294967295,A=j+(C<<20&4294967295|C>>>12),C=O+(j^k&(A^j))+S[13]+2850285829&4294967295,O=A+(C<<5&4294967295|C>>>27),C=k+(A^j&(O^A))+S[2]+4243563512&4294967295,k=O+(C<<9&4294967295|C>>>23),C=j+(O^A&(k^O))+S[7]+1735328473&4294967295,j=k+(C<<14&4294967295|C>>>18),C=A+(k^O&(j^k))+S[12]+2368359562&4294967295,A=j+(C<<20&4294967295|C>>>12),C=O+(A^j^k)+S[5]+4294588738&4294967295,O=A+(C<<4&4294967295|C>>>28),C=k+(O^A^j)+S[8]+2272392833&4294967295,k=O+(C<<11&4294967295|C>>>21),C=j+(k^O^A)+S[11]+1839030562&4294967295,j=k+(C<<16&4294967295|C>>>16),C=A+(j^k^O)+S[14]+4259657740&4294967295,A=j+(C<<23&4294967295|C>>>9),C=O+(A^j^k)+S[1]+2763975236&4294967295,O=A+(C<<4&4294967295|C>>>28),C=k+(O^A^j)+S[4]+1272893353&4294967295,k=O+(C<<11&4294967295|C>>>21),C=j+(k^O^A)+S[7]+4139469664&4294967295,j=k+(C<<16&4294967295|C>>>16),C=A+(j^k^O)+S[10]+3200236656&4294967295,A=j+(C<<23&4294967295|C>>>9),C=O+(A^j^k)+S[13]+681279174&4294967295,O=A+(C<<4&4294967295|C>>>28),C=k+(O^A^j)+S[0]+3936430074&4294967295,k=O+(C<<11&4294967295|C>>>21),C=j+(k^O^A)+S[3]+3572445317&4294967295,j=k+(C<<16&4294967295|C>>>16),C=A+(j^k^O)+S[6]+76029189&4294967295,A=j+(C<<23&4294967295|C>>>9),C=O+(A^j^k)+S[9]+3654602809&4294967295,O=A+(C<<4&4294967295|C>>>28),C=k+(O^A^j)+S[12]+3873151461&4294967295,k=O+(C<<11&4294967295|C>>>21),C=j+(k^O^A)+S[15]+530742520&4294967295,j=k+(C<<16&4294967295|C>>>16),C=A+(j^k^O)+S[2]+3299628645&4294967295,A=j+(C<<23&4294967295|C>>>9),C=O+(j^(A|~k))+S[0]+4096336452&4294967295,O=A+(C<<6&4294967295|C>>>26),C=k+(A^(O|~j))+S[7]+1126891415&4294967295,k=O+(C<<10&4294967295|C>>>22),C=j+(O^(k|~A))+S[14]+2878612391&4294967295,j=k+(C<<15&4294967295|C>>>17),C=A+(k^(j|~O))+S[5]+4237533241&4294967295,A=j+(C<<21&4294967295|C>>>11),C=O+(j^(A|~k))+S[12]+1700485571&4294967295,O=A+(C<<6&4294967295|C>>>26),C=k+(A^(O|~j))+S[3]+2399980690&4294967295,k=O+(C<<10&4294967295|C>>>22),C=j+(O^(k|~A))+S[10]+4293915773&4294967295,j=k+(C<<15&4294967295|C>>>17),C=A+(k^(j|~O))+S[1]+2240044497&4294967295,A=j+(C<<21&4294967295|C>>>11),C=O+(j^(A|~k))+S[8]+1873313359&4294967295,O=A+(C<<6&4294967295|C>>>26),C=k+(A^(O|~j))+S[15]+4264355552&4294967295,k=O+(C<<10&4294967295|C>>>22),C=j+(O^(k|~A))+S[6]+2734768916&4294967295,j=k+(C<<15&4294967295|C>>>17),C=A+(k^(j|~O))+S[13]+1309151649&4294967295,A=j+(C<<21&4294967295|C>>>11),C=O+(j^(A|~k))+S[4]+4149444226&4294967295,O=A+(C<<6&4294967295|C>>>26),C=k+(A^(O|~j))+S[11]+3174756917&4294967295,k=O+(C<<10&4294967295|C>>>22),C=j+(O^(k|~A))+S[2]+718787259&4294967295,j=k+(C<<15&4294967295|C>>>17),C=A+(k^(j|~O))+S[9]+3951481745&4294967295,N.g[0]=N.g[0]+O&4294967295,N.g[1]=N.g[1]+(j+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+j&4294967295,N.g[3]=N.g[3]+k&4294967295}a.prototype.u=function(N,O){O===void 0&&(O=N.length);for(var A=O-this.blockSize,S=this.B,j=this.h,k=0;k<O;){if(j==0)for(;k<=A;)o(this,N,k),k+=this.blockSize;if(typeof N=="string"){for(;k<O;)if(S[j++]=N.charCodeAt(k++),j==this.blockSize){o(this,S),j=0;break}}else for(;k<O;)if(S[j++]=N[k++],j==this.blockSize){o(this,S),j=0;break}}this.h=j,this.o+=O},a.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var O=1;O<N.length-8;++O)N[O]=0;var A=8*this.o;for(O=N.length-8;O<N.length;++O)N[O]=A&255,A/=256;for(this.u(N),N=Array(16),O=A=0;4>O;++O)for(var S=0;32>S;S+=8)N[A++]=this.g[O]>>>S&255;return N};function u(N,O){var A=h;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=O(N)}function d(N,O){this.h=O;for(var A=[],S=!0,j=N.length-1;0<=j;j--){var k=N[j]|0;S&&k==O||(A[j]=k,S=!1)}this.g=A}var h={};function y(N){return-128<=N&&128>N?u(N,function(O){return new d([O|0],0>O?-1:0)}):new d([N|0],0>N?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return E;if(0>N)return z(g(-N));for(var O=[],A=1,S=0;N>=A;S++)O[S]=N/A|0,A*=4294967296;return new d(O,0)}function b(N,O){if(N.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(N.charAt(0)=="-")return z(b(N.substring(1),O));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=g(Math.pow(O,8)),S=E,j=0;j<N.length;j+=8){var k=Math.min(8,N.length-j),C=parseInt(N.substring(j,j+k),O);8>k?(k=g(Math.pow(O,k)),S=S.j(k).add(g(C))):(S=S.j(A),S=S.add(g(C)))}return S}var E=y(0),R=y(1),D=y(16777216);r=d.prototype,r.m=function(){if(L(this))return-z(this).m();for(var N=0,O=1,A=0;A<this.g.length;A++){var S=this.i(A);N+=(0<=S?S:4294967296+S)*O,O*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(B(this))return"0";if(L(this))return"-"+z(this).toString(N);for(var O=g(Math.pow(N,6)),A=this,S="";;){var j=re(A,O).g;A=F(A,j.j(O));var k=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=j,B(A))return k+S;for(;6>k.length;)k="0"+k;S=k+S}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function B(N){if(N.h!=0)return!1;for(var O=0;O<N.g.length;O++)if(N.g[O]!=0)return!1;return!0}function L(N){return N.h==-1}r.l=function(N){return N=F(this,N),L(N)?-1:B(N)?0:1};function z(N){for(var O=N.g.length,A=[],S=0;S<O;S++)A[S]=~N.g[S];return new d(A,~N.h).add(R)}r.abs=function(){return L(this)?z(this):this},r.add=function(N){for(var O=Math.max(this.g.length,N.g.length),A=[],S=0,j=0;j<=O;j++){var k=S+(this.i(j)&65535)+(N.i(j)&65535),C=(k>>>16)+(this.i(j)>>>16)+(N.i(j)>>>16);S=C>>>16,k&=65535,C&=65535,A[j]=C<<16|k}return new d(A,A[A.length-1]&-2147483648?-1:0)};function F(N,O){return N.add(z(O))}r.j=function(N){if(B(this)||B(N))return E;if(L(this))return L(N)?z(this).j(z(N)):z(z(this).j(N));if(L(N))return z(this.j(z(N)));if(0>this.l(D)&&0>N.l(D))return g(this.m()*N.m());for(var O=this.g.length+N.g.length,A=[],S=0;S<2*O;S++)A[S]=0;for(S=0;S<this.g.length;S++)for(var j=0;j<N.g.length;j++){var k=this.i(S)>>>16,C=this.i(S)&65535,Z=N.i(j)>>>16,me=N.i(j)&65535;A[2*S+2*j]+=C*me,Y(A,2*S+2*j),A[2*S+2*j+1]+=k*me,Y(A,2*S+2*j+1),A[2*S+2*j+1]+=C*Z,Y(A,2*S+2*j+1),A[2*S+2*j+2]+=k*Z,Y(A,2*S+2*j+2)}for(S=0;S<O;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=O;S<2*O;S++)A[S]=0;return new d(A,0)};function Y(N,O){for(;(N[O]&65535)!=N[O];)N[O+1]+=N[O]>>>16,N[O]&=65535,O++}function ne(N,O){this.g=N,this.h=O}function re(N,O){if(B(O))throw Error("division by zero");if(B(N))return new ne(E,E);if(L(N))return O=re(z(N),O),new ne(z(O.g),z(O.h));if(L(O))return O=re(N,z(O)),new ne(z(O.g),O.h);if(30<N.g.length){if(L(N)||L(O))throw Error("slowDivide_ only works with positive integers.");for(var A=R,S=O;0>=S.l(N);)A=V(A),S=V(S);var j=q(A,1),k=q(S,1);for(S=q(S,2),A=q(A,2);!B(S);){var C=k.add(S);0>=C.l(N)&&(j=j.add(A),k=C),S=q(S,1),A=q(A,1)}return O=F(N,j.j(O)),new ne(j,O)}for(j=E;0<=N.l(O);){for(A=Math.max(1,Math.floor(N.m()/O.m())),S=Math.ceil(Math.log(A)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),k=g(A),C=k.j(O);L(C)||0<C.l(N);)A-=S,k=g(A),C=k.j(O);B(k)&&(k=R),j=j.add(k),N=F(N,C)}return new ne(j,N)}r.A=function(N){return re(this,N).h},r.and=function(N){for(var O=Math.max(this.g.length,N.g.length),A=[],S=0;S<O;S++)A[S]=this.i(S)&N.i(S);return new d(A,this.h&N.h)},r.or=function(N){for(var O=Math.max(this.g.length,N.g.length),A=[],S=0;S<O;S++)A[S]=this.i(S)|N.i(S);return new d(A,this.h|N.h)},r.xor=function(N){for(var O=Math.max(this.g.length,N.g.length),A=[],S=0;S<O;S++)A[S]=this.i(S)^N.i(S);return new d(A,this.h^N.h)};function V(N){for(var O=N.g.length+1,A=[],S=0;S<O;S++)A[S]=N.i(S)<<1|N.i(S-1)>>>31;return new d(A,N.h)}function q(N,O){var A=O>>5;O%=32;for(var S=N.g.length-A,j=[],k=0;k<S;k++)j[k]=0<O?N.i(k+A)>>>O|N.i(k+A+1)<<32-O:N.i(k+A);return new d(j,N.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,g1=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=b,Ua=d}).apply(typeof y0<"u"?y0:typeof self<"u"?self:typeof window<"u"?window:{});var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var y1,xl,v1,Pc,um,_1,b1,E1;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,T){return c==Array.prototype||c==Object.prototype||(c[v]=T.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cc=="object"&&Cc];for(var v=0;v<c.length;++v){var T=c[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=n(this);function o(c,v){if(v)e:{var T=a;c=c.split(".");for(var P=0;P<c.length-1;P++){var J=c[P];if(!(J in T))break e;T=T[J]}c=c[c.length-1],P=T[c],v=v(P),v!=P&&v!=null&&e(T,c,{configurable:!0,writable:!0,value:v})}}function u(c,v){c instanceof String&&(c+="");var T=0,P=!1,J={next:function(){if(!P&&T<c.length){var oe=T++;return{value:v(oe,c[oe]),done:!1}}return P=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}o("Array.prototype.values",function(c){return c||function(){return u(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},h=this||self;function y(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function g(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function b(c,v,T){return c.call.apply(c.bind,arguments)}function E(c,v,T){if(!c)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,P),c.apply(v,J)}}return function(){return c.apply(v,arguments)}}function R(c,v,T){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:E,R.apply(null,arguments)}function D(c,v){var T=Array.prototype.slice.call(arguments,1);return function(){var P=T.slice();return P.push.apply(P,arguments),c.apply(this,P)}}function B(c,v){function T(){}T.prototype=v.prototype,c.aa=v.prototype,c.prototype=new T,c.prototype.constructor=c,c.Qb=function(P,J,oe){for(var ve=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ve[Ke-2]=arguments[Ke];return v.prototype[J].apply(P,ve)}}function L(c){const v=c.length;if(0<v){const T=Array(v);for(let P=0;P<v;P++)T[P]=c[P];return T}return[]}function z(c,v){for(let T=1;T<arguments.length;T++){const P=arguments[T];if(y(P)){const J=c.length||0,oe=P.length||0;c.length=J+oe;for(let ve=0;ve<oe;ve++)c[J+ve]=P[ve]}else c.push(P)}}class F{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Y(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var V=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function q(c,v,T){for(const P in c)v.call(T,c[P],P,c)}function N(c,v){for(const T in c)v.call(void 0,c[T],T,c)}function O(c){const v={};for(const T in c)v[T]=c[T];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(c,v){let T,P;for(let J=1;J<arguments.length;J++){P=arguments[J];for(T in P)c[T]=P[T];for(let oe=0;oe<A.length;oe++)T=A[oe],Object.prototype.hasOwnProperty.call(P,T)&&(c[T]=P[T])}}function j(c){var v=1;c=c.split(":");const T=[];for(;0<v&&c.length;)T.push(c.shift()),v--;return c.length&&T.push(c.join(":")),T}function k(c){h.setTimeout(()=>{throw c},0)}function C(){var c=G;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Z{constructor(){this.h=this.g=null}add(v,T){const P=me.get();P.set(v,T),this.h?this.h.next=P:this.g=P,this.h=P}}var me=new F(()=>new $,c=>c.reset());class ${constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let w,ge=!1,G=new Z,_=()=>{const c=h.Promise.resolve(void 0);w=()=>{c.then(M)}};var M=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(T){k(T)}var v=me;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}ge=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const T=()=>{};h.addEventListener("test",T,v),h.removeEventListener("test",T,v)}catch{}return c}();function ce(c,v){if(W.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var T=this.type=c.type,P=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(V){e:{try{re(v.nodeName);var J=!0;break e}catch{}J=!1}J||(v=null)}}else T=="mouseover"?v=c.fromElement:T=="mouseout"&&(v=c.toElement);this.relatedTarget=v,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:le[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ce.aa.h.call(this)}}B(ce,W);var le={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Oe(c,v,T,P,J){this.listener=c,this.proxy=null,this.src=v,this.type=T,this.capture=!!P,this.ha=J,this.key=++Se,this.da=this.fa=!1}function ke(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ze(c){this.src=c,this.g={},this.h=0}ze.prototype.add=function(c,v,T,P,J){var oe=c.toString();c=this.g[oe],c||(c=this.g[oe]=[],this.h++);var ve=Ve(c,v,P,J);return-1<ve?(v=c[ve],T||(v.fa=!1)):(v=new Oe(v,this.src,oe,!!P,J),v.fa=T,c.push(v)),v};function He(c,v){var T=v.type;if(T in c.g){var P=c.g[T],J=Array.prototype.indexOf.call(P,v,void 0),oe;(oe=0<=J)&&Array.prototype.splice.call(P,J,1),oe&&(ke(v),c.g[T].length==0&&(delete c.g[T],c.h--))}}function Ve(c,v,T,P){for(var J=0;J<c.length;++J){var oe=c[J];if(!oe.da&&oe.listener==v&&oe.capture==!!T&&oe.ha==P)return J}return-1}var je="closure_lm_"+(1e6*Math.random()|0),Ge={};function ht(c,v,T,P,J){if(Array.isArray(v)){for(var oe=0;oe<v.length;oe++)ht(c,v[oe],T,P,J);return null}return T=or(T),c&&c[ye]?c.K(v,T,g(P)?!!P.capture:!1,J):Re(c,v,T,!1,P,J)}function Re(c,v,T,P,J,oe){if(!v)throw Error("Invalid event type");var ve=g(J)?!!J.capture:!!J,Ke=Zn(c);if(Ke||(c[je]=Ke=new ze(c)),T=Ke.add(v,T,P,ve,oe),T.proxy)return T;if(P=mt(),T.proxy=P,P.src=c,P.listener=T,c.addEventListener)ae||(J=ve),J===void 0&&(J=!1),c.addEventListener(v.toString(),P,J);else if(c.attachEvent)c.attachEvent(xt(v.toString()),P);else if(c.addListener&&c.removeListener)c.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return T}function mt(){function c(T){return v.call(c.src,c.listener,T)}const v=Wn;return c}function pt(c,v,T,P,J){if(Array.isArray(v))for(var oe=0;oe<v.length;oe++)pt(c,v[oe],T,P,J);else P=g(P)?!!P.capture:!!P,T=or(T),c&&c[ye]?(c=c.i,v=String(v).toString(),v in c.g&&(oe=c.g[v],T=Ve(oe,T,P,J),-1<T&&(ke(oe[T]),Array.prototype.splice.call(oe,T,1),oe.length==0&&(delete c.g[v],c.h--)))):c&&(c=Zn(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Ve(v,T,P,J)),(T=-1<c?v[c]:null)&&gt(T))}function gt(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[ye])He(v.i,c);else{var T=c.type,P=c.proxy;v.removeEventListener?v.removeEventListener(T,P,c.capture):v.detachEvent?v.detachEvent(xt(T),P):v.addListener&&v.removeListener&&v.removeListener(P),(T=Zn(v))?(He(T,c),T.h==0&&(T.src=null,v[je]=null)):ke(c)}}}function xt(c){return c in Ge?Ge[c]:Ge[c]="on"+c}function Wn(c,v){if(c.da)c=!0;else{v=new ce(v,this);var T=c.listener,P=c.ha||c.src;c.fa&&gt(c),c=T.call(P,v)}return c}function Zn(c){return c=c[je],c instanceof ze?c:null}var di="__closure_events_fn_"+(1e9*Math.random()>>>0);function or(c){return typeof c=="function"?c:(c[di]||(c[di]=function(v){return c.handleEvent(v)}),c[di])}function yt(){Q.call(this),this.i=new ze(this),this.M=this,this.F=null}B(yt,Q),yt.prototype[ye]=!0,yt.prototype.removeEventListener=function(c,v,T,P){pt(this,c,v,T,P)};function Ue(c,v){var T,P=c.F;if(P)for(T=[];P;P=P.F)T.push(P);if(c=c.M,P=v.type||v,typeof v=="string")v=new W(v,c);else if(v instanceof W)v.target=v.target||c;else{var J=v;v=new W(P,c),S(v,J)}if(J=!0,T)for(var oe=T.length-1;0<=oe;oe--){var ve=v.g=T[oe];J=Lt(ve,P,!0,v)&&J}if(ve=v.g=c,J=Lt(ve,P,!0,v)&&J,J=Lt(ve,P,!1,v)&&J,T)for(oe=0;oe<T.length;oe++)ve=v.g=T[oe],J=Lt(ve,P,!1,v)&&J}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var T=c.g[v],P=0;P<T.length;P++)ke(T[P]);delete c.g[v],c.h--}}this.F=null},yt.prototype.K=function(c,v,T,P){return this.i.add(String(c),v,!1,T,P)},yt.prototype.L=function(c,v,T,P){return this.i.add(String(c),v,!0,T,P)};function Lt(c,v,T,P){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var J=!0,oe=0;oe<v.length;++oe){var ve=v[oe];if(ve&&!ve.da&&ve.capture==T){var Ke=ve.listener,Ut=ve.ha||ve.src;ve.fa&&He(c.i,ve),J=Ke.call(Ut,P)!==!1&&J}}return J&&!P.defaultPrevented}function cn(c,v,T){if(typeof c=="function")T&&(c=R(c,T));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(c,v||0)}function iu(c){c.g=cn(()=>{c.g=null,c.i&&(c.i=!1,iu(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class Af extends Q{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:iu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ea(c){Q.call(this),this.h=c,this.g={}}B(ea,Q);var ta=[];function na(c){q(c.g,function(v,T){this.g.hasOwnProperty(T)&&gt(v)},c),c.g={}}ea.prototype.N=function(){ea.aa.N.call(this),na(this)},ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jn=h.JSON.stringify,Xa=h.JSON.parse,ra=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function fo(){}fo.prototype.h=null;function ho(c){return c.h||(c.h=c.i())}function mo(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mr(){W.call(this,"d")}B(Mr,W);function po(){W.call(this,"c")}B(po,W);var lr={},go=null;function hi(){return go=go||new yt}lr.La="serverreachability";function Wa(c){W.call(this,lr.La,c)}B(Wa,W);function mi(c){const v=hi();Ue(v,new Wa(v))}lr.STAT_EVENT="statevent";function au(c,v){W.call(this,lr.STAT_EVENT,c),this.stat=v}B(au,W);function vt(c){const v=hi();Ue(v,new au(v,c))}lr.Ma="timingevent";function zt(c,v){W.call(this,lr.Ma,c),this.size=v}B(zt,W);function Dt(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},v)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function yo(c,v,T,P,J,oe){c.info(function(){if(c.g)if(oe)for(var ve="",Ke=oe.split("&"),Ut=0;Ut<Ke.length;Ut++){var Ye=Ke[Ut].split("=");if(1<Ye.length){var $t=Ye[0];Ye=Ye[1];var Bt=$t.split("_");ve=2<=Bt.length&&Bt[1]=="type"?ve+($t+"="+Ye+"&"):ve+($t+"=redacted&")}}else ve=null;else ve=oe;return"XMLHTTP REQ ("+P+") [attempt "+J+"]: "+v+`
`+T+`
`+ve})}function xf(c,v,T,P,J,oe,ve){c.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+J+"]: "+v+`
`+T+`
`+oe+" "+ve})}function pi(c,v,T,P){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+ia(c,T)+(P?" "+P:"")})}function su(c,v){c.info(function(){return"TIMEOUT: "+v})}Ln.prototype.info=function(){};function ia(c,v){if(!c.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(c=0;c<T.length;c++)if(Array.isArray(T[c])){var P=T[c];if(!(2>P.length)){var J=P[1];if(Array.isArray(J)&&!(1>J.length)){var oe=J[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var ve=1;ve<J.length;ve++)J[ve]=""}}}}return Jn(T)}catch{return v}}var gi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ur;function cr(){}B(cr,fo),cr.prototype.g=function(){return new XMLHttpRequest},cr.prototype.i=function(){return{}},ur=new cr;function vn(c,v,T,P){this.j=c,this.i=v,this.l=T,this.R=P||1,this.U=new ea(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rt}function Rt(){this.i=null,this.g="",this.h=!1}var vo={},Za={};function er(c,v,T){c.L=1,c.v=ua(Cn(v)),c.m=T,c.P=!0,Pr(c,null)}function Pr(c,v){c.F=Date.now(),aa(c),c.A=Cn(c.v);var T=c.A,P=c.R;Array.isArray(P)||(P=[String(P)]),To(T.i,"t",P),c.C=0,T=c.j.J,c.h=new Rt,c.g=Su(c.j,T?v:null,!c.m),0<c.O&&(c.M=new Af(R(c.Y,c,c.g),c.O)),v=c.U,T=c.g,P=c.ca;var J="readystatechange";Array.isArray(J)||(J&&(ta[0]=J.toString()),J=ta);for(var oe=0;oe<J.length;oe++){var ve=ht(T,J[oe],P||v.handleEvent,!1,v.h||v);if(!ve)break;v.g[ve.key]=ve}v=c.H?O(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),mi(),yo(c.i,c.u,c.A,c.l,c.R,c.m)}vn.prototype.ca=function(c){c=c.target;const v=this.M;v&&Hn(c)==3?v.j():this.Y(c)},vn.prototype.Y=function(c){try{if(c==this.g)e:{const Bt=Hn(this.g);var v=this.g.Ba();const Fr=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||mu(this.g)))){this.J||Bt!=4||v==7||(v==8||0>=Fr?mi(3):mi(2)),yi(this);var T=this.g.Z();this.X=T;t:if(ou(this)){var P=mu(this.g);c="";var J=P.length,oe=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){en(this),fr(this);var ve="";break t}this.h.i=new h.TextDecoder}for(v=0;v<J;v++)this.h.h=!0,c+=this.h.i.decode(P[v],{stream:!(oe&&v==J-1)});P.length=0,this.h.g+=c,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=T==200,xf(this.i,this.u,this.A,this.l,this.R,Bt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Ut=this.g;if((Ke=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Ke)){var Ye=Ke;break t}}Ye=null}if(T=Ye)pi(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sa(this,T);else{this.o=!1,this.s=3,vt(12),en(this),fr(this);break e}}if(this.P){T=!0;let tn;for(;!this.J&&this.C<ve.length;)if(tn=lu(this,ve),tn==Za){Bt==4&&(this.s=4,vt(14),T=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==vo){this.s=4,vt(15),pi(this.i,this.l,ve,"[Invalid Chunk]"),T=!1;break}else pi(this.i,this.l,tn,null),sa(this,tn);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||ve.length!=0||this.h.h||(this.s=1,vt(16),T=!1),this.o=this.o&&T,!T)pi(this.i,this.l,ve,"[Invalid Chunked Response]"),en(this),fr(this);else if(0<ve.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),ya($t),$t.M=!0,vt(11))}}else pi(this.i,this.l,ve,null),sa(this,ve);Bt==4&&en(this),this.o&&!this.J&&(Bt==4?_u(this.j,this):(this.o=!1,aa(this)))}else If(this.g),T==400&&0<ve.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),en(this),fr(this)}}}catch{}finally{}};function ou(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function lu(c,v){var T=c.C,P=v.indexOf(`
`,T);return P==-1?Za:(T=Number(v.substring(T,P)),isNaN(T)?vo:(P+=1,P+T>v.length?Za:(v=v.slice(P,P+T),c.C=P+T,v)))}vn.prototype.cancel=function(){this.J=!0,en(this)};function aa(c){c.S=Date.now()+c.I,uu(c,c.I)}function uu(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Dt(R(c.ba,c),v)}function yi(c){c.B&&(h.clearTimeout(c.B),c.B=null)}vn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(su(this.i,this.A),this.L!=2&&(mi(),vt(17)),en(this),this.s=2,fr(this)):uu(this,this.S-c)};function fr(c){c.j.G==0||c.J||_u(c.j,c)}function en(c){yi(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,na(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function sa(c,v){try{var T=c.j;if(T.G!=0&&(T.g==c||_o(T.h,c))){if(!c.K&&_o(T.h,c)&&T.G==3){try{var P=T.Da.g.parse(v)}catch{P=null}if(Array.isArray(P)&&P.length==3){var J=P;if(J[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<c.F)cs(T),ls(T);else break e;No(T),vt(18)}}else T.za=J[1],0<T.za-T.T&&37500>J[2]&&T.F&&T.v==0&&!T.C&&(T.C=Dt(R(T.Za,T),6e3));if(1>=es(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else qr(T,11)}else if((c.K||T.g==c)&&cs(T),!Y(v))for(J=T.Da.g.parse(v),v=0;v<J.length;v++){let Ye=J[v];if(T.T=Ye[0],Ye=Ye[1],T.G==2)if(Ye[0]=="c"){T.K=Ye[1],T.ia=Ye[2];const $t=Ye[3];$t!=null&&(T.la=$t,T.j.info("VER="+T.la));const Bt=Ye[4];Bt!=null&&(T.Aa=Bt,T.j.info("SVER="+T.Aa));const Fr=Ye[5];Fr!=null&&typeof Fr=="number"&&0<Fr&&(P=1.5*Fr,T.L=P,T.j.info("backChannelRequestTimeoutMs_="+P)),P=T;const tn=c.g;if(tn){const vr=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vr){var oe=P.h;oe.g||vr.indexOf("spdy")==-1&&vr.indexOf("quic")==-1&&vr.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(ts(oe,oe.h),oe.h=null))}if(P.D){const Io=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(P.ya=Io,st(P.I,P.D,Io))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-c.F,T.j.info("Handshake RTT: "+T.R+"ms")),P=T;var ve=c;if(P.qa=Eu(P,P.J?P.ia:null,P.W),ve.K){_n(P.h,ve);var Ke=ve,Ut=P.L;Ut&&(Ke.I=Ut),Ke.B&&(yi(Ke),aa(Ke)),P.g=ve}else yu(P);0<T.i.length&&us(T)}else Ye[0]!="stop"&&Ye[0]!="close"||qr(T,7);else T.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?qr(T,7):Ro(T):Ye[0]!="noop"&&T.l&&T.l.ta(Ye),T.v=0)}}mi(4)}catch{}}var cu=class{constructor(c,v){this.g=c,this.map=v}};function Vr(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ja(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function es(c){return c.h?1:c.g?c.g.size:0}function _o(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function ts(c,v){c.g?c.g.add(v):c.h=v}function _n(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Vr.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function bo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const T of c.g.values())v=v.concat(T.D);return v}return L(c.i)}function Rf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var v=[],T=c.length,P=0;P<T;P++)v.push(c[P]);return v}v=[],T=0;for(P in c)v[T++]=c[P];return v}function ns(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var v=[];c=c.length;for(var T=0;T<c;T++)v.push(T);return v}v=[],T=0;for(const P in c)v[T++]=P;return v}}}function Eo(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var T=ns(c),P=Rf(c),J=P.length,oe=0;oe<J;oe++)v.call(void 0,P[oe],T&&T[oe],c)}var oa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cf(c,v){if(c){c=c.split("&");for(var T=0;T<c.length;T++){var P=c[T].indexOf("="),J=null;if(0<=P){var oe=c[T].substring(0,P);J=c[T].substring(P+1)}else oe=c[T];v(oe,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function jt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof jt){this.h=c.h,la(this,c.j),this.o=c.o,this.g=c.g,vi(this,c.s),this.l=c.l;var v=c.i,T=new zr;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),Lr(this,T),this.m=c.m}else c&&(v=String(c).match(oa))?(this.h=!1,la(this,v[1]||"",!0),this.o=zn(v[2]||""),this.g=zn(v[3]||"",!0),vi(this,v[4]),this.l=zn(v[5]||"",!0),Lr(this,v[6]||"",!0),this.m=zn(v[7]||"")):(this.h=!1,this.i=new zr(null,this.h))}jt.prototype.toString=function(){var c=[],v=this.j;v&&c.push(ca(v,So,!0),":");var T=this.g;return(T||v=="file")&&(c.push("//"),(v=this.o)&&c.push(ca(v,So,!0),"@"),c.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&c.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&c.push("/"),c.push(ca(T,T.charAt(0)=="/"?Nf:wo,!0))),(T=this.i.toString())&&c.push("?",T),(T=this.m)&&c.push("#",ca(T,rs)),c.join("")};function Cn(c){return new jt(c)}function la(c,v,T){c.j=T?zn(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function vi(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function Lr(c,v,T){v instanceof zr?(c.i=v,du(c.i,c.h)):(T||(v=ca(v,Of)),c.i=new zr(v,c.h))}function st(c,v,T){c.i.set(v,T)}function ua(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zn(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ca(c,v,T){return typeof c=="string"?(c=encodeURI(c).replace(v,fu),T&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function fu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var So=/[#\/\?@]/g,wo=/[#\?:]/g,Nf=/[#\?]/g,Of=/[#\?@]/g,rs=/#/g;function zr(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Un(c){c.g||(c.g=new Map,c.h=0,c.i&&Cf(c.i,function(v,T){c.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}r=zr.prototype,r.add=function(c,v){Un(this),this.i=null,c=dr(this,c);var T=this.g.get(c);return T||this.g.set(c,T=[]),T.push(v),this.h+=1,this};function Ur(c,v){Un(c),v=dr(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Br(c,v){return Un(c),v=dr(c,v),c.g.has(v)}r.forEach=function(c,v){Un(this),this.g.forEach(function(T,P){T.forEach(function(J){c.call(v,J,P,this)},this)},this)},r.na=function(){Un(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let P=0;P<v.length;P++){const J=c[P];for(let oe=0;oe<J.length;oe++)T.push(v[P])}return T},r.V=function(c){Un(this);let v=[];if(typeof c=="string")Br(this,c)&&(v=v.concat(this.g.get(dr(this,c))));else{c=Array.from(this.g.values());for(let T=0;T<c.length;T++)v=v.concat(c[T])}return v},r.set=function(c,v){return Un(this),this.i=null,c=dr(this,c),Br(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},r.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function To(c,v,T){Ur(c,v),0<T.length&&(c.i=null,c.g.set(dr(c,v),L(T)),c.h+=T.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var P=v[T];const oe=encodeURIComponent(String(P)),ve=this.V(P);for(P=0;P<ve.length;P++){var J=oe;ve[P]!==""&&(J+="="+encodeURIComponent(String(ve[P]))),c.push(J)}}return this.i=c.join("&")};function dr(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function du(c,v){v&&!c.j&&(Un(c),c.i=null,c.g.forEach(function(T,P){var J=P.toLowerCase();P!=J&&(Ur(this,P),To(this,J,T))},c)),c.j=v}function fa(c,v){const T=new Ln;if(h.Image){const P=new Image;P.onload=D(Bn,T,"TestLoadImage: loaded",!0,v,P),P.onerror=D(Bn,T,"TestLoadImage: error",!1,v,P),P.onabort=D(Bn,T,"TestLoadImage: abort",!1,v,P),P.ontimeout=D(Bn,T,"TestLoadImage: timeout",!1,v,P),h.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=c}else v(!1)}function tr(c,v){const T=new Ln,P=new AbortController,J=setTimeout(()=>{P.abort(),Bn(T,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:P.signal}).then(oe=>{clearTimeout(J),oe.ok?Bn(T,"TestPingServer: ok",!0,v):Bn(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(J),Bn(T,"TestPingServer: error",!1,v)})}function Bn(c,v,T,P,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),P(T)}catch{}}function da(){this.g=new ra}function hr(c,v,T){const P=T||"";try{Eo(c,function(J,oe){let ve=J;g(J)&&(ve=Jn(J)),v.push(P+oe+"="+encodeURIComponent(ve))})}catch(J){throw v.push(P+"type="+encodeURIComponent("_badmap")),J}}function _i(c){this.l=c.Ub||null,this.j=c.eb||!1}B(_i,fo),_i.prototype.g=function(){return new Hr(this.l,this.j)},_i.prototype.i=function(c){return function(){return c}}({});function Hr(c,v){yt.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(Hr,yt),r=Hr.prototype,r.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,pr(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ao(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ao(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?mr(this):pr(this),this.readyState==3&&Ao(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,mr(this))},r.Qa=function(c){this.g&&(this.response=c,mr(this))},r.ga=function(){this.g&&mr(this)};function mr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,pr(c)}r.setRequestHeader=function(c,v){this.u.append(c,v)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,c.push(T[0]+": "+T[1]),T=v.next();return c.join(`\r
`)};function pr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xo(c){let v="";return q(c,function(T,P){v+=P,v+=":",v+=T,v+=`\r
`}),v}function Gt(c,v,T){e:{for(P in T){var P=!1;break e}P=!0}P||(T=xo(T),typeof c=="string"?T!=null&&encodeURIComponent(String(T)):st(c,v,T))}function nt(c){yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(nt,yt);var is=/^https?$/i,ha=["POST","PUT"];r=nt.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,v,T,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ur.g(),this.v=this.o?ho(this.o):ho(ur),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(oe){hu(this,oe);return}if(c=T||"",T=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var J in P)T.set(J,P[J]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const oe of P.keys())T.set(oe,P.get(oe));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(T.keys()).find(oe=>oe.toLowerCase()=="content-type"),J=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ha,v,void 0))||P||J||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,ve]of T)this.g.setRequestHeader(oe,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ma(this),this.u=!0,this.g.send(c),this.u=!1}catch(oe){hu(this,oe)}};function hu(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,as(c),gr(c)}function as(c){c.A||(c.A=!0,Ue(c,"complete"),Ue(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ue(this,"complete"),Ue(this,"abort"),gr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),nt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ss(this):this.bb())},r.bb=function(){ss(this)};function ss(c){if(c.h&&typeof d<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)cn(c.Ea,0,c);else if(Ue(c,"readystatechange"),Hn(c)==4){c.h=!1;try{const ve=c.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var P;if(P=ve===0){var J=String(c.D).match(oa)[1]||null;!J&&h.self&&h.self.location&&(J=h.self.location.protocol.slice(0,-1)),P=!is.test(J?J.toLowerCase():"")}T=P}if(T)Ue(c,"complete"),Ue(c,"success");else{c.m=6;try{var oe=2<Hn(c)?c.g.statusText:""}catch{oe=""}c.l=oe+" ["+c.Z()+"]",as(c)}}finally{gr(c)}}}}function gr(c,v){if(c.g){ma(c);const T=c.g,P=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||Ue(c,"ready");try{T.onreadystatechange=P}catch{}}}function ma(c){c.I&&(h.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Xa(v)}};function mu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function If(c){const v={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<c.length;P++){if(Y(c[P]))continue;var T=j(c[P]);const J=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const oe=v[J]||[];v[J]=oe,oe.push(T)}N(v,function(P){return P.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pa(c,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[c]||v}function os(c){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pa("baseRetryDelayMs",5e3,c),this.cb=pa("retryDelaySeedMs",1e4,c),this.Wa=pa("forwardChannelMaxRetries",2,c),this.wa=pa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Vr(c&&c.concurrentRequestLimit),this.Da=new da,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=os.prototype,r.la=8,r.G=1,r.connect=function(c,v,T,P){vt(0),this.W=c,this.H=v||{},T&&P!==void 0&&(this.H.OSID=T,this.H.OAID=P),this.F=this.X,this.I=Eu(this,null,this.W),us(this)};function Ro(c){if(pu(c),c.G==3){var v=c.U++,T=Cn(c.I);if(st(T,"SID",c.K),st(T,"RID",v),st(T,"TYPE","terminate"),ga(c,T),v=new vn(c,c.j,v),v.L=2,v.v=ua(Cn(T)),T=!1,h.navigator&&h.navigator.sendBeacon)try{T=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&h.Image&&(new Image().src=v.v,T=!0),T||(v.g=Su(v.j,null),v.g.ea(v.v)),v.F=Date.now(),aa(v)}bu(c)}function ls(c){c.g&&(ya(c),c.g.cancel(),c.g=null)}function pu(c){ls(c),c.u&&(h.clearTimeout(c.u),c.u=null),cs(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function us(c){if(!Ja(c.h)&&!c.s){c.s=!0;var v=c.Ga;w||_(),ge||(w(),ge=!0),G.add(v,c),c.B=0}}function Df(c,v){return es(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Dt(R(c.Ga,c,v),Oo(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const J=new vn(this,this.j,c);let oe=this.o;if(this.S&&(oe?(oe=O(oe),S(oe,this.S)):oe=this.S),this.m!==null||this.O||(J.H=oe,oe=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var P=this.i[T];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(v+=P,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=gu(this,J,v),T=Cn(this.I),st(T,"RID",c),st(T,"CVER",22),this.D&&st(T,"X-HTTP-Session-Id",this.D),ga(this,T),oe&&(this.O?v="headers="+encodeURIComponent(String(xo(oe)))+"&"+v:this.m&&Gt(T,this.m,oe)),ts(this.h,J),this.Ua&&st(T,"TYPE","init"),this.P?(st(T,"$req",v),st(T,"SID","null"),J.T=!0,er(J,T,null)):er(J,T,v),this.G=2}}else this.G==3&&(c?Co(this,c):this.i.length==0||Ja(this.h)||Co(this))};function Co(c,v){var T;v?T=v.l:T=c.U++;const P=Cn(c.I);st(P,"SID",c.K),st(P,"RID",T),st(P,"AID",c.T),ga(c,P),c.m&&c.o&&Gt(P,c.m,c.o),T=new vn(c,c.j,T,c.B+1),c.m===null&&(T.H=c.o),v&&(c.i=v.D.concat(c.i)),v=gu(c,T,1e3),T.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ts(c.h,T),er(T,P,v)}function ga(c,v){c.H&&q(c.H,function(T,P){st(v,P,T)}),c.l&&Eo({},function(T,P){st(v,P,T)})}function gu(c,v,T){T=Math.min(c.i.length,T);var P=c.l?R(c.l.Na,c.l,c):null;e:{var J=c.i;let oe=-1;for(;;){const ve=["count="+T];oe==-1?0<T?(oe=J[0].g,ve.push("ofs="+oe)):oe=0:ve.push("ofs="+oe);let Ke=!0;for(let Ut=0;Ut<T;Ut++){let Ye=J[Ut].g;const $t=J[Ut].map;if(Ye-=oe,0>Ye)oe=Math.max(0,J[Ut].g-100),Ke=!1;else try{hr($t,ve,"req"+Ye+"_")}catch{P&&P($t)}}if(Ke){P=ve.join("&");break e}}}return c=c.i.splice(0,T),v.D=c,P}function yu(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;w||_(),ge||(w(),ge=!0),G.add(v,c),c.v=0}}function No(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Dt(R(c.Fa,c),Oo(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Dt(R(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),ls(this),vu(this))};function ya(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function vu(c){c.g=new vn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=Cn(c.qa);st(v,"RID","rpc"),st(v,"SID",c.K),st(v,"AID",c.T),st(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(v,"TO",c.ja),st(v,"TYPE","xmlhttp"),ga(c,v),c.m&&c.o&&Gt(v,c.m,c.o),c.L&&(c.g.I=c.L);var T=c.g;c=c.ia,T.L=1,T.v=ua(Cn(v)),T.m=null,T.P=!0,Pr(T,c)}r.Za=function(){this.C!=null&&(this.C=null,ls(this),No(this),vt(19))};function cs(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function _u(c,v){var T=null;if(c.g==v){cs(c),ya(c),c.g=null;var P=2}else if(_o(c.h,v))T=v.D,_n(c.h,v),P=1;else return;if(c.G!=0){if(v.o)if(P==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var J=c.B;P=hi(),Ue(P,new zt(P,T)),us(c)}else yu(c);else if(J=v.s,J==3||J==0&&0<v.X||!(P==1&&Df(c,v)||P==2&&No(c)))switch(T&&0<T.length&&(v=c.h,v.i=v.i.concat(T)),J){case 1:qr(c,5);break;case 4:qr(c,10);break;case 3:qr(c,6);break;default:qr(c,2)}}}function Oo(c,v){let T=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(T*=2),T*v}function qr(c,v){if(c.j.info("Error code "+v),v==2){var T=R(c.fb,c),P=c.Xa;const J=!P;P=new jt(P||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||la(P,"https"),ua(P),J?fa(P.toString(),T):tr(P.toString(),T)}else vt(2);c.G=0,c.l&&c.l.sa(v),bu(c),pu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function bu(c){if(c.G=0,c.ka=[],c.l){const v=bo(c.h);(v.length!=0||c.i.length!=0)&&(z(c.ka,v),z(c.ka,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.ra()}}function Eu(c,v,T){var P=T instanceof jt?Cn(T):new jt(T);if(P.g!="")v&&(P.g=v+"."+P.g),vi(P,P.s);else{var J=h.location;P=J.protocol,v=v?v+"."+J.hostname:J.hostname,J=+J.port;var oe=new jt(null);P&&la(oe,P),v&&(oe.g=v),J&&vi(oe,J),T&&(oe.l=T),P=oe}return T=c.D,v=c.ya,T&&v&&st(P,T,v),st(P,"VER",c.la),ga(c,P),P}function Su(c,v,T){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new nt(new _i({eb:T})):new nt(c.pa),v.Ha(c.J),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function wu(){}r=wu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function fs(){}fs.prototype.g=function(c,v){return new bn(c,v)};function bn(c,v){yt.call(this),this.g=new os(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!Y(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Y(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new yr(this)}B(bn,yt),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Ro(this.g)},bn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var T={};T.__data__=c,c=T}else this.u&&(T={},T.__data__=Jn(c),c=T);v.i.push(new cu(v.Ya++,c)),v.G==3&&us(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,bn.aa.N.call(this)};function Tu(c){Mr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const T in v){c=T;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}B(Tu,Mr);function Au(){po.call(this),this.status=1}B(Au,po);function yr(c){this.g=c}B(yr,wu),yr.prototype.ua=function(){Ue(this.g,"a")},yr.prototype.ta=function(c){Ue(this.g,new Tu(c))},yr.prototype.sa=function(c){Ue(this.g,new Au)},yr.prototype.ra=function(){Ue(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,E1=function(){return new fs},b1=function(){return hi()},_1=lr,um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,Pc=gi,kr.COMPLETE="complete",v1=kr,mo.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",yt.prototype.listen=yt.prototype.K,xl=mo,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,y1=nt}).apply(typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{});const v0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new u1("@firebase/firestore");function El(){return Fa.logLevel}function we(r,...e){if(Fa.logLevel<=Ze.DEBUG){const n=e.map(zm);Fa.debug(`Firestore (${ao}): ${r}`,...n)}}function ui(r,...e){if(Fa.logLevel<=Ze.ERROR){const n=e.map(zm);Fa.error(`Firestore (${ao}): ${r}`,...n)}}function $s(r,...e){if(Fa.logLevel<=Ze.WARN){const n=e.map(zm);Fa.warn(`Firestore (${ao}): ${r}`,...n)}}function zm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(r="Unexpected state"){const e=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: `+r;throw ui(e),new Error(e)}function at(r,e){r||Ie()}function De(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mn.UNAUTHENTICATED))}shutdown(){}}class s4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class o4{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0);let a=this.i;const o=y=>this.i!==a?(a=this.i,n(y)):Promise.resolve();let u=new si;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new si,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},h=y=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>h(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?h(y):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new si)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(a=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(at(typeof a.accessToken=="string"),new S1(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string"),new mn(e)}}class l4{constructor(e,n,a){this.l=e,this.h=n,this.P=a,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class u4{constructor(e,n,a){this.l=e,this.h=n,this.P=a}getToken(){return Promise.resolve(new l4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class f4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){at(this.o===void 0);const a=u=>{u.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.R;return this.R=u.token,we("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>a(u))};const o=u=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(at(typeof n.token=="string"),this.R=n.token,new c4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<r;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const o=d4(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%e.length))}return a}}function et(r,e){return r<e?-1:r>e?1:0}function Qs(r,e,n){return r.length===e.length&&r.every((a,o)=>n(a,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new be(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*n));return new At(n,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new At(0,0))}static max(){return new Me(new At(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,a){n===void 0?n=0:n>e.length&&Ie(),a===void 0?a=e.length-n:a>e.length-n&&Ie(),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Ll.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ll?e.forEach(a=>{n.push(a)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=e.get(o),d=n.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dt extends Ll{construct(e,n,a){return new dt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new be(he.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter(o=>o.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const h4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Ll{construct(e,n,a){return new on(e,n,a)}static isValidIdentifier(e){return h4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new on(["__name__"])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new be(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new be(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new be(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=y,o+=2}else h==="`"?(d=!d,o++):h!=="."||d?(a+=h,o++):(u(),o++)}if(u(),d)throw new be(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(n)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(dt.fromString(e))}static fromName(e){return new Ae(dt.fromString(e).popFirst(5))}static empty(){return new Ae(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new dt(e.slice()))}}function m4(r,e){const n=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=Me.fromTimestamp(a===1e9?new At(n+1,0):new At(n,a));return new Qi(o,Ae.empty(),e)}function p4(r){return new Qi(r.readTime,r.key,-1)}class Qi{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Qi(Me.min(),Ae.empty(),-1)}static max(){return new Qi(Me.max(),Ae.empty(),-1)}}function g4(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(r.documentKey,e.documentKey),n!==0?n:et(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(r){if(r.code!==he.FAILED_PRECONDITION||r.message!==y4)throw r;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.reject(n)}static resolve(e){return new pe((n,a)=>{n(e)})}static reject(e){return new pe((n,a)=>{a(e)})}static waitFor(e){return new pe((n,a)=>{let o=0,u=0,d=!1;e.forEach(h=>{++o,h.next(()=>{++u,d&&u===o&&n()},y=>a(y))}),d=!0,u===o&&n()})}static or(e){let n=pe.resolve(!1);for(const a of e)n=n.next(o=>o?pe.resolve(o):a());return n}static forEach(e,n){const a=[];return e.forEach((o,u)=>{a.push(n.call(this,o,u))}),this.waitFor(a)}static mapArray(e,n){return new pe((a,o)=>{const u=e.length,d=new Array(u);let h=0;for(let y=0;y<u;y++){const g=y;n(e[g]).next(b=>{d[g]=b,++h,h===u&&a(d)},b=>o(b))}})}static doWhile(e,n){return new pe((a,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):a()};u()})}}function _4(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ie(a),this.se=a=>n.writeSequenceNumber(a))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Um.oe=-1;function of(r){return r==null}function $c(r){return r===0&&1/r==-1/0}function b4(r){return typeof r=="number"&&Number.isInteger(r)&&!$c(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ka(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function T1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,a)=>(e(n,a),!1))}toString(){const e=[];return this.inorderTraversal((n,a)=>(e.push(`${n}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nc(this.root,e,this.comparator,!0)}}class Nc{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??sn.RED,this.left=o??sn.EMPTY,this.right=u??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new sn(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,n,a,o,u){return this}insert(e,n,a){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,a)=>(e(n),!1))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new b0(this.data.getIterator())}getIteratorFrom(e){return new b0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(a=>{n=n.add(a)}),n}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ln(this.comparator);return n.data=e,n}}class b0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Pn([])}unionWith(e){let n=new ln(on.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qs(this.fields,e.fields,(n,a)=>n.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new A1("Invalid base64 string: "+u):u}}(e);return new un(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const E4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(r){if(at(!!r),typeof r=="string"){let e=0;const n=E4.exec(r);if(at(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ot(r.seconds),nanos:Ot(r.nanos)}}function Ot(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ga(r){return typeof r=="string"?un.fromBase64String(r):un.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hm(r){const e=r.mapValue.fields.__previous_value__;return Bm(e)?Hm(e):e}function zl(r){const e=Ki(r.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n,a,o,u,d,h,y,g){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=h,this.longPollingOptions=y,this.useFetchStreams=g}}class Ul{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc={mapValue:{}};function $a(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bm(r)?4:T4(r)?9007199254740991:w4(r)?10:11:Ie()}function Nr(r,e){if(r===e)return!0;const n=$a(r);if(n!==$a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return zl(r).isEqual(zl(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ki(o.timestampValue),h=Ki(u.timestampValue);return d.seconds===h.seconds&&d.nanos===h.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Ga(o.bytesValue).isEqual(Ga(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return Ot(o.geoPointValue.latitude)===Ot(u.geoPointValue.latitude)&&Ot(o.geoPointValue.longitude)===Ot(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ot(o.integerValue)===Ot(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ot(o.doubleValue),h=Ot(u.doubleValue);return d===h?$c(d)===$c(h):isNaN(d)&&isNaN(h)}return!1}(r,e);case 9:return Qs(r.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},h=u.mapValue.fields||{};if(_0(d)!==_0(h))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(h[y]===void 0||!Nr(d[y],h[y])))return!1;return!0}(r,e);default:return Ie()}}function Bl(r,e){return(r.values||[]).find(n=>Nr(n,e))!==void 0}function Ks(r,e){if(r===e)return 0;const n=$a(r),a=$a(e);if(n!==a)return et(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(r.booleanValue,e.booleanValue);case 2:return function(u,d){const h=Ot(u.integerValue||u.doubleValue),y=Ot(d.integerValue||d.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1}(r,e);case 3:return E0(r.timestampValue,e.timestampValue);case 4:return E0(zl(r),zl(e));case 5:return et(r.stringValue,e.stringValue);case 6:return function(u,d){const h=Ga(u),y=Ga(d);return h.compareTo(y)}(r.bytesValue,e.bytesValue);case 7:return function(u,d){const h=u.split("/"),y=d.split("/");for(let g=0;g<h.length&&g<y.length;g++){const b=et(h[g],y[g]);if(b!==0)return b}return et(h.length,y.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,d){const h=et(Ot(u.latitude),Ot(d.latitude));return h!==0?h:et(Ot(u.longitude),Ot(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return S0(r.arrayValue,e.arrayValue);case 10:return function(u,d){var h,y,g,b;const E=u.fields||{},R=d.fields||{},D=(h=E.value)===null||h===void 0?void 0:h.arrayValue,B=(y=R.value)===null||y===void 0?void 0:y.arrayValue,L=et(((g=D==null?void 0:D.values)===null||g===void 0?void 0:g.length)||0,((b=B==null?void 0:B.values)===null||b===void 0?void 0:b.length)||0);return L!==0?L:S0(D,B)}(r.mapValue,e.mapValue);case 11:return function(u,d){if(u===Oc.mapValue&&d===Oc.mapValue)return 0;if(u===Oc.mapValue)return 1;if(d===Oc.mapValue)return-1;const h=u.fields||{},y=Object.keys(h),g=d.fields||{},b=Object.keys(g);y.sort(),b.sort();for(let E=0;E<y.length&&E<b.length;++E){const R=et(y[E],b[E]);if(R!==0)return R;const D=Ks(h[y[E]],g[b[E]]);if(D!==0)return D}return et(y.length,b.length)}(r.mapValue,e.mapValue);default:throw Ie()}}function E0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return et(r,e);const n=Ki(r),a=Ki(e),o=et(n.seconds,a.seconds);return o!==0?o:et(n.nanos,a.nanos)}function S0(r,e){const n=r.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=Ks(n[o],a[o]);if(u)return u}return et(n.length,a.length)}function Ys(r){return cm(r)}function cm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const a=Ki(n);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Ga(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return Ae.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=cm(u);return a+"]"}(r.arrayValue):"mapValue"in r?function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of a)u?u=!1:o+=",",o+=`${d}:${cm(n.fields[d])}`;return o+"}"}(r.mapValue):Ie()}function w0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function fm(r){return!!r&&"integerValue"in r}function qm(r){return!!r&&"arrayValue"in r}function T0(r){return!!r&&"nullValue"in r}function A0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Vc(r){return!!r&&"mapValue"in r}function w4(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ol(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ka(r.mapValue.fields,(n,a)=>e.mapValue.fields[n]=Ol(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ol(r.arrayValue.values[n]);return e}return Object.assign({},r)}function T4(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(n)}setAll(e){let n=on.emptyPath(),a={},o=[];e.forEach((d,h)=>{if(!n.isImmediateParentOf(h)){const y=this.getFieldsMap(n);this.applyChanges(y,a,o),a={},o=[],n=h.popLast()}d?a[h.lastSegment()]=Ol(d):o.push(h.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];Vc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){Ka(n,(o,u)=>e[o]=u);for(const o of a)delete e[o]}clone(){return new Rn(Ol(this.value))}}function x1(r){const e=[];return Ka(r.fields,(n,a)=>{const o=new on([n]);if(Vc(a)){const u=x1(a.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,a,o,u,d,h){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=d,this.documentState=h}static newInvalidDocument(e){return new pn(e,0,Me.min(),Me.min(),Me.min(),Rn.empty(),0)}static newFoundDocument(e,n,a,o){return new pn(e,1,n,Me.min(),a,o,0)}static newNoDocument(e,n){return new pn(e,2,n,Me.min(),Me.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,Me.min(),Me.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.position=e,this.inclusive=n}}function x0(r,e,n){let a=0;for(let o=0;o<r.position.length;o++){const u=e[o],d=r.position[o];if(u.field.isKeyField()?a=Ae.comparator(Ae.fromName(d.referenceValue),n.key):a=Ks(d,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function R0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Nr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n="asc"){this.field=e,this.dir=n}}function A4(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{}class Vt extends R1{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new R4(e,n,a):n==="array-contains"?new O4(e,a):n==="in"?new I4(e,a):n==="not-in"?new D4(e,a):n==="array-contains-any"?new j4(e,a):new Vt(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new C4(e,a):new N4(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ks(n,this.value)):n!==null&&$a(this.value)===$a(n)&&this.matchesComparison(Ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends R1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new sr(e,n)}matches(e){return C1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function C1(r){return r.op==="and"}function N1(r){return x4(r)&&C1(r)}function x4(r){for(const e of r.filters)if(e instanceof sr)return!1;return!0}function dm(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+Ys(r.value);if(N1(r))return r.filters.map(e=>dm(e)).join(",");{const e=r.filters.map(n=>dm(n)).join(",");return`${r.op}(${e})`}}function O1(r,e){return r instanceof Vt?function(a,o){return o instanceof Vt&&a.op===o.op&&a.field.isEqual(o.field)&&Nr(a.value,o.value)}(r,e):r instanceof sr?function(a,o){return o instanceof sr&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce((u,d,h)=>u&&O1(d,o.filters[h]),!0):!1}(r,e):void Ie()}function I1(r){return r instanceof Vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ys(n.value)}`}(r):r instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(I1).join(" ,")+"}"}(r):"Filter"}class R4 extends Vt{constructor(e,n,a){super(e,n,a),this.key=Ae.fromName(a.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class C4 extends Vt{constructor(e,n){super(e,"in",n),this.keys=D1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class N4 extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=D1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function D1(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(a=>Ae.fromName(a.referenceValue))}class O4 extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qm(n)&&Bl(n.arrayValue,this.value)}}class I4 extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bl(this.value.arrayValue,n)}}class D4 extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bl(this.value.arrayValue,n)}}class j4 extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(a=>Bl(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n=null,a=[],o=[],u=null,d=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=d,this.endAt=h,this.ue=null}}function C0(r,e=null,n=[],a=[],o=null,u=null,d=null){return new M4(r,e,n,a,o,u,d)}function Fm(r){const e=De(r);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(a=>dm(a)).join(","),n+="|ob:",n+=e.orderBy.map(a=>function(u){return u.field.canonicalString()+u.dir}(a)).join(","),of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(a=>Ys(a)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(a=>Ys(a)).join(",")),e.ue=n}return e.ue}function Gm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!A4(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!O1(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!R0(r.startAt,e.startAt)&&R0(r.endAt,e.endAt)}function hm(r){return Ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n=null,a=[],o=[],u=null,d="F",h=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=d,this.startAt=h,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function k4(r,e,n,a,o,u,d,h){return new so(r,e,n,a,o,u,d,h)}function lf(r){return new so(r)}function N0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function j1(r){return r.collectionGroup!==null}function Il(r){const e=De(r);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let h=new ln(on.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new Hl(u,a))}),n.has(on.keyField().canonicalString())||e.ce.push(new Hl(on.keyField(),a))}return e.ce}function xr(r){const e=De(r);return e.le||(e.le=P4(e,Il(r))),e.le}function P4(r,e){if(r.limitType==="F")return C0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Hl(o.field,u)});const n=r.endAt?new Qc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new Qc(r.startAt.position,r.startAt.inclusive):null;return C0(r.path,r.collectionGroup,e,r.filters,r.limit,n,a)}}function mm(r,e){const n=r.filters.concat([e]);return new so(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function pm(r,e,n){return new so(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function uf(r,e){return Gm(xr(r),xr(e))&&r.limitType===e.limitType}function M1(r){return`${Fm(xr(r))}|lt:${r.limitType}`}function Us(r){return`Query(target=${function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map(o=>I1(o)).join(", ")}]`),of(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map(o=>Ys(o)).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map(o=>Ys(o)).join(",")),`Target(${a})`}(xr(r))}; limitType=${r.limitType})`}function cf(r,e){return e.isFoundDocument()&&function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Ae.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)}(r,e)&&function(a,o){for(const u of Il(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(a,o){return!(a.startAt&&!function(d,h,y){const g=x0(d,h,y);return d.inclusive?g<=0:g<0}(a.startAt,Il(a),o)||a.endAt&&!function(d,h,y){const g=x0(d,h,y);return d.inclusive?g>=0:g>0}(a.endAt,Il(a),o))}(r,e)}function V4(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function k1(r){return(e,n)=>{let a=!1;for(const o of Il(r)){const u=L4(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function L4(r,e,n){const a=r.field.isKeyField()?Ae.comparator(e.key,n.key):function(u,d,h){const y=d.data.field(u),g=h.data.field(u);return y!==null&&g!==null?Ks(y,g):Ie()}(r.field,e,n);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,(n,a)=>{for(const[o,u]of a)e(o,u)})}isEmpty(){return T1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=new St(Ae.comparator);function ci(){return z4}const P1=new St(Ae.comparator);function Rl(...r){let e=P1;for(const n of r)e=e.insert(n.key,n);return e}function V1(r){let e=P1;return r.forEach((n,a)=>e=e.insert(n,a.overlayedDocument)),e}function La(){return Dl()}function L1(){return Dl()}function Dl(){return new oo(r=>r.toString(),(r,e)=>r.isEqual(e))}const U4=new St(Ae.comparator),B4=new ln(Ae.comparator);function $e(...r){let e=B4;for(const n of r)e=e.add(n);return e}const H4=new ln(et);function q4(){return H4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function z1(r){return{integerValue:""+r}}function F4(r,e){return b4(e)?z1(e):$m(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this._=void 0}}function G4(r,e,n){return r instanceof ql?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Bm(u)&&(u=Hm(u)),u&&(d.fields.__previous_value__=u),{mapValue:d}}(n,e):r instanceof Fl?B1(r,e):r instanceof Gl?H1(r,e):function(o,u){const d=U1(o,u),h=O0(d)+O0(o.Pe);return fm(d)&&fm(o.Pe)?z1(h):$m(o.serializer,h)}(r,e)}function $4(r,e,n){return r instanceof Fl?B1(r,e):r instanceof Gl?H1(r,e):n}function U1(r,e){return r instanceof Kc?function(a){return fm(a)||function(u){return!!u&&"doubleValue"in u}(a)}(e)?e:{integerValue:0}:null}class ql extends ff{}class Fl extends ff{constructor(e){super(),this.elements=e}}function B1(r,e){const n=q1(e);for(const a of r.elements)n.some(o=>Nr(o,a))||n.push(a);return{arrayValue:{values:n}}}class Gl extends ff{constructor(e){super(),this.elements=e}}function H1(r,e){let n=q1(e);for(const a of r.elements)n=n.filter(o=>!Nr(o,a));return{arrayValue:{values:n}}}class Kc extends ff{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function O0(r){return Ot(r.integerValue||r.doubleValue)}function q1(r){return qm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n){this.field=e,this.transform=n}}function K4(r,e){return r.field.isEqual(e.field)&&function(a,o){return a instanceof Fl&&o instanceof Fl||a instanceof Gl&&o instanceof Gl?Qs(a.elements,o.elements,Nr):a instanceof Kc&&o instanceof Kc?Nr(a.Pe,o.Pe):a instanceof ql&&o instanceof ql}(r.transform,e.transform)}class Y4{constructor(e,n){this.version=e,this.transformResults=n}}class Rr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class df{}function F1(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new $1(r.key,Rr.none()):new Zl(r.key,r.data,Rr.none());{const n=r.data,a=Rn.empty();let o=new ln(on.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?a.delete(u):a.set(u,d),o=o.add(u)}return new Zi(r.key,a,new Pn(o.toArray()),Rr.none())}}function X4(r,e,n){r instanceof Zl?function(o,u,d){const h=o.value.clone(),y=D0(o.fieldTransforms,u,d.transformResults);h.setAll(y),u.convertToFoundDocument(d.version,h).setHasCommittedMutations()}(r,e,n):r instanceof Zi?function(o,u,d){if(!Lc(o.precondition,u))return void u.convertToUnknownDocument(d.version);const h=D0(o.fieldTransforms,u,d.transformResults),y=u.data;y.setAll(G1(o)),y.setAll(h),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(r,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function jl(r,e,n,a){return r instanceof Zl?function(u,d,h,y){if(!Lc(u.precondition,d))return h;const g=u.value.clone(),b=j0(u.fieldTransforms,y,d);return g.setAll(b),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null}(r,e,n,a):r instanceof Zi?function(u,d,h,y){if(!Lc(u.precondition,d))return h;const g=j0(u.fieldTransforms,y,d),b=d.data;return b.setAll(G1(u)),b.setAll(g),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),h===null?null:h.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(E=>E.field))}(r,e,n,a):function(u,d,h){return Lc(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):h}(r,e,n)}function W4(r,e){let n=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),u=U1(a.transform,o||null);u!=null&&(n===null&&(n=Rn.empty()),n.set(a.field,u))}return n||null}function I0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Qs(a,o,(u,d)=>K4(u,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Zl extends df{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zi extends df{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function G1(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const a=r.data.field(n);e.set(n,a)}}),e}function D0(r,e,n){const a=new Map;at(r.length===n.length);for(let o=0;o<n.length;o++){const u=r[o],d=u.transform,h=e.data.field(u.field);a.set(u.field,$4(d,h,n[o]))}return a}function j0(r,e,n){const a=new Map;for(const o of r){const u=o.transform,d=n.data.field(o.field);a.set(o.field,G4(u,d,e))}return a}class $1 extends df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z4 extends df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&X4(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=jl(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=jl(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=L1();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let h=this.applyToLocalView(d,u.mutatedFields);h=n.has(o.key)?null:h;const y=F1(d,h);y!==null&&a.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Me.min())}),a}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$e())}isEqual(e){return this.batchId===e.batchId&&Qs(this.mutations,e.mutations,(n,a)=>I0(n,a))&&Qs(this.baseMutations,e.baseMutations,(n,a)=>I0(n,a))}}class Qm{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){at(e.mutations.length===a.length);let o=function(){return U4}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,a[d].version);return new Qm(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,We;function nA(r){switch(r){default:return Ie();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function Q1(r){if(r===void 0)return ui("GRPC error has no .code"),he.UNKNOWN;switch(r){case Pt.OK:return he.OK;case Pt.CANCELLED:return he.CANCELLED;case Pt.UNKNOWN:return he.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return he.INTERNAL;case Pt.UNAVAILABLE:return he.UNAVAILABLE;case Pt.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Pt.NOT_FOUND:return he.NOT_FOUND;case Pt.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Pt.ABORTED:return he.ABORTED;case Pt.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Pt.DATA_LOSS:return he.DATA_LOSS;default:return Ie()}}(We=Pt||(Pt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new Ua([4294967295,4294967295],0);function M0(r){const e=rA().encode(r),n=new g1;return n.update(e),new Uint8Array(n.digest())}function k0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ua([n,a],0),new Ua([o,u],0)]}class Km{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Cl(`Invalid padding: ${n}`);if(a<0)throw new Cl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Cl(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Cl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ua.fromNumber(this.Ie)}Ee(e,n,a){let o=e.add(n.multiply(Ua.fromNumber(a)));return o.compare(iA)===1&&(o=new Ua([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=M0(e),[a,o]=k0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ee(a,o,u);if(!this.de(d))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Km(u,o,n);return a.forEach(h=>d.insert(h)),d}insert(e){if(this.Ie===0)return;const n=M0(e),[a,o]=k0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ee(a,o,u);this.Ae(d)}}Ae(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new hf(Me.min(),o,new St(et),ci(),$e())}}class Jl{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Jl(a,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,a,o){this.Re=e,this.removedTargetIds=n,this.key=a,this.Ve=o}}class K1{constructor(e,n){this.targetId=e,this.me=n}}class Y1{constructor(e,n,a=un.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class P0{constructor(){this.fe=0,this.ge=L0(),this.pe=un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),n=$e(),a=$e();return this.ge.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Ie()}}),new Jl(this.pe,this.ye,e,n,a)}Ce(){this.we=!1,this.ge=L0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,at(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aA{constructor(e){this.Le=e,this.Be=new Map,this.ke=ci(),this.qe=V0(),this.Qe=new St(et)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const a=this.Ge(n);switch(e.state){case 0:this.ze(n)&&a.De(e.resumeToken);break;case 1:a.Oe(),a.Se||a.Ce(),a.De(e.resumeToken);break;case 2:a.Oe(),a.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(a.Ne(),a.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),a.De(e.resumeToken));break;default:Ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((a,o)=>{this.ze(o)&&n(o)})}He(e){const n=e.targetId,a=e.me.count,o=this.Je(n);if(o){const u=o.target;if(hm(u))if(a===0){const d=new Ae(u.path);this.Ue(n,d,pn.newNoDocument(d,Me.min()))}else at(a===1);else{const d=this.Ye(n);if(d!==a){const h=this.Ze(e),y=h?this.Xe(h,e,d):1;if(y!==0){this.je(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,g)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let d,h;try{d=Ga(a).toUint8Array()}catch(y){if(y instanceof A1)return $s("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{h=new Km(d,o,u)}catch(y){return $s(y instanceof Cl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return h.Ie===0?null:h}Xe(e,n,a){return n.me.count===a-this.nt(e,n.targetId)?0:2}nt(e,n){const a=this.Le.getRemoteKeysForTarget(n);let o=0;return a.forEach(u=>{const d=this.Le.tt(),h=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,u,null),o++)}),o}rt(e){const n=new Map;this.Be.forEach((u,d)=>{const h=this.Je(d);if(h){if(u.current&&hm(h.target)){const y=new Ae(h.target.path);this.ke.get(y)!==null||this.it(d,y)||this.Ue(d,y,pn.newNoDocument(y,e))}u.be&&(n.set(d,u.ve()),u.Ce())}});let a=$e();this.qe.forEach((u,d)=>{let h=!0;d.forEachWhile(y=>{const g=this.Je(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(a=a.add(u))}),this.ke.forEach((u,d)=>d.setReadTime(e));const o=new hf(e,n,this.Qe,this.ke,a);return this.ke=ci(),this.qe=V0(),this.Qe=new St(et),o}$e(e,n){if(!this.ze(e))return;const a=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,a),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,a){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),a&&(this.ke=this.ke.insert(n,a))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new P0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ln(et),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new P0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function V0(){return new St(Ae.comparator)}function L0(){return new St(Ae.comparator)}const sA={asc:"ASCENDING",desc:"DESCENDING"},oA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lA={and:"AND",or:"OR"};class uA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gm(r,e){return r.useProto3Json||of(e)?e:{value:e}}function Yc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X1(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cA(r,e){return Yc(r,e.toTimestamp())}function Cr(r){return at(!!r),Me.fromTimestamp(function(n){const a=Ki(n);return new At(a.seconds,a.nanos)}(r))}function Ym(r,e){return ym(r,e).canonicalString()}function ym(r,e){const n=function(o){return new dt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function W1(r){const e=dt.fromString(r);return at(nb(e)),e}function vm(r,e){return Ym(r.databaseId,e.path)}function kh(r,e){const n=W1(e);if(n.get(1)!==r.databaseId.projectId)throw new be(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new be(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ae(J1(n))}function Z1(r,e){return Ym(r.databaseId,e)}function fA(r){const e=W1(r);return e.length===4?dt.emptyPath():J1(e)}function _m(r){return new dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function J1(r){return at(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function z0(r,e,n){return{name:vm(r,e),fields:n.value.mapValue.fields}}function dA(r,e){let n;if("targetChange"in e){e.targetChange;const a=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,b){return g.useProto3Json?(at(b===void 0||typeof b=="string"),un.fromBase64String(b||"")):(at(b===void 0||b instanceof Buffer||b instanceof Uint8Array),un.fromUint8Array(b||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,h=d&&function(g){const b=g.code===void 0?he.UNKNOWN:Q1(g.code);return new be(b,g.message||"")}(d);n=new Y1(a,o,u,h||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=kh(r,a.document.name),u=Cr(a.document.updateTime),d=a.document.createTime?Cr(a.document.createTime):Me.min(),h=new Rn({mapValue:{fields:a.document.fields}}),y=pn.newFoundDocument(o,u,d,h),g=a.targetIds||[],b=a.removedTargetIds||[];n=new zc(g,b,y.key,y)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=kh(r,a.document),u=a.readTime?Cr(a.readTime):Me.min(),d=pn.newNoDocument(o,u),h=a.removedTargetIds||[];n=new zc([],h,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=kh(r,a.document),u=a.removedTargetIds||[];n=new zc([],u,o,null)}else{if(!("filter"in e))return Ie();{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,d=new tA(o,u),h=a.targetId;n=new K1(h,d)}}return n}function hA(r,e){let n;if(e instanceof Zl)n={update:z0(r,e.key,e.value)};else if(e instanceof $1)n={delete:vm(r,e.key)};else if(e instanceof Zi)n={update:z0(r,e.key,e.data),updateMask:SA(e.fieldMask)};else{if(!(e instanceof Z4))return Ie();n={verify:vm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(a=>function(u,d){const h=d.transform;if(h instanceof ql)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Fl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Gl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Kc)return{fieldPath:d.field.canonicalString(),increment:h.Pe};throw Ie()}(0,a))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:cA(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ie()}(r,e.precondition)),n}function mA(r,e){return r&&r.length>0?(at(e!==void 0),r.map(n=>function(o,u){let d=o.updateTime?Cr(o.updateTime):Cr(u);return d.isEqual(Me.min())&&(d=Cr(u)),new Y4(d,o.transformResults||[])}(n,e))):[]}function pA(r,e){return{documents:[Z1(r,e.path)]}}function gA(r,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=Z1(r,o);const u=function(g){if(g.length!==0)return tb(sr.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(g){if(g.length!==0)return g.map(b=>function(R){return{field:Bs(R.field),direction:_A(R.dir)}}(b))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const h=gm(r,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{_t:n,parent:o}}function yA(r){let e=fA(r.parent);const n=r.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){at(a===1);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=function(E){const R=eb(E);return R instanceof sr&&N1(R)?R.getFilters():[R]}(n.where));let d=[];n.orderBy&&(d=function(E){return E.map(R=>function(B){return new Hl(Hs(B.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(R))}(n.orderBy));let h=null;n.limit&&(h=function(E){let R;return R=typeof E=="object"?E.value:E,of(R)?null:R}(n.limit));let y=null;n.startAt&&(y=function(E){const R=!!E.before,D=E.values||[];return new Qc(D,R)}(n.startAt));let g=null;return n.endAt&&(g=function(E){const R=!E.before,D=E.values||[];return new Qc(D,R)}(n.endAt)),k4(e,o,d,u,h,"F",y,g)}function vA(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eb(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=Hs(n.unaryFilter.field);return Vt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Hs(n.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Hs(n.unaryFilter.field);return Vt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Hs(n.unaryFilter.field);return Vt.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(r):r.fieldFilter!==void 0?function(n){return Vt.create(Hs(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(a=>eb(a)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie()}}(n.compositeFilter.op))}(r):Ie()}function _A(r){return sA[r]}function bA(r){return oA[r]}function EA(r){return lA[r]}function Bs(r){return{fieldPath:r.canonicalString()}}function Hs(r){return on.fromServerFormat(r.fieldPath)}function tb(r){return r instanceof Vt?function(n){if(n.op==="=="){if(A0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(T0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(A0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(T0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:bA(n.op),value:n.value}}}(r):r instanceof sr?function(n){const a=n.getFilters().map(o=>tb(o));return a.length===1?a[0]:{compositeFilter:{op:EA(n.op),filters:a}}}(r):Ie()}function SA(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,a,o,u=Me.min(),d=Me.min(),h=un.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=h,this.expectedCount=y}withSequenceNumber(e){return new Hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.ct=e}}function TA(r){const e=yA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.un=new xA}addToCollectionParentIndex(e,n){return this.un.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(Qi.min())}updateCollectionGroup(e,n,a){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class xA{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new ln(dt.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new ln(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xs(0)}static kn(){return new Xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.changes=new oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?pe.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(a=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(a!==null&&jl(a.mutation,o,Pn.empty(),At.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.getLocalViewOfDocuments(e,a,$e()).next(()=>a))}getLocalViewOfDocuments(e,n,a=$e()){const o=La();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,a).next(u=>{let d=Rl();return u.forEach((h,y)=>{d=d.insert(h,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const a=La();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,$e()))}populateOverlays(e,n,a){const o=[];return a.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,h)=>{n.set(d,h)})})}computeViews(e,n,a,o){let u=ci();const d=Dl(),h=function(){return Dl()}();return n.forEach((y,g)=>{const b=a.get(g.key);o.has(g.key)&&(b===void 0||b.mutation instanceof Zi)?u=u.insert(g.key,g):b!==void 0?(d.set(g.key,b.mutation.getFieldMask()),jl(b.mutation,g,b.mutation.getFieldMask(),At.now())):d.set(g.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((g,b)=>d.set(g,b)),n.forEach((g,b)=>{var E;return h.set(g,new CA(b,(E=d.get(g))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,n){const a=Dl();let o=new St((d,h)=>d-h),u=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const h of d)h.keys().forEach(y=>{const g=n.get(y);if(g===null)return;let b=a.get(y)||Pn.empty();b=h.applyToLocalView(g,b),a.set(y,b);const E=(o.get(h.batchId)||$e()).add(y);o=o.insert(h.batchId,E)})}).next(()=>{const d=[],h=o.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),g=y.key,b=y.value,E=L1();b.forEach(R=>{if(!u.has(R)){const D=F1(n.get(R),a.get(R));D!==null&&E.set(R,D),u=u.add(R)}}),d.push(this.documentOverlayCache.saveOverlays(e,g,E))}return pe.waitFor(d)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,n,a,o){return function(d){return Ae.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):j1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):pe.resolve(La());let h=-1,y=u;return d.next(g=>pe.forEach(g,(b,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),u.get(b)?pe.resolve():this.remoteDocumentCache.getEntry(e,b).next(R=>{y=y.insert(b,R)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,y,g,$e())).next(b=>({batchId:h,changes:V1(b)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(a=>{let o=Rl();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let d=Rl();return this.indexManager.getCollectionParents(e,u).next(h=>pe.forEach(h,y=>{const g=function(E,R){return new so(R,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,a,o).next(b=>{b.forEach((E,R)=>{d=d.insert(E,R)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o))).next(d=>{u.forEach((y,g)=>{const b=g.getKey();d.get(b)===null&&(d=d.insert(b,pn.newInvalidDocument(b)))});let h=Rl();return d.forEach((y,g)=>{const b=u.get(y);b!==void 0&&jl(b.mutation,g,Pn.empty(),At.now()),cf(n,g)&&(h=h.insert(y,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return pe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Cr(o.createTime)}}(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(o){return{name:o.name,query:TA(o.bundledQuery),readTime:Cr(o.readTime)}}(n)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.overlays=new St(Ae.comparator),this.Ir=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const a=La();return pe.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&a.set(o,u)})).next(()=>a)}saveOverlays(e,n,a){return a.forEach((o,u)=>{this.ht(e,n,u)}),pe.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.Ir.get(a);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ir.delete(a)),pe.resolve()}getOverlaysForCollection(e,n,a){const o=La(),u=n.length+1,d=new Ae(n.child("")),h=this.overlays.getIteratorFrom(d);for(;h.hasNext();){const y=h.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>a&&o.set(y.getKey(),y)}return pe.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new St((g,b)=>g-b);const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>a){let b=u.get(g.largestBatchId);b===null&&(b=La(),u=u.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const h=La(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,b)=>h.set(g,b)),!(h.size()>=o)););return pe.resolve(h)}ht(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.Ir.get(o.largestBatchId).delete(a.key);this.Ir.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new eA(n,a));let u=this.Ir.get(n);u===void 0&&(u=$e(),this.Ir.set(n,u)),this.Ir.set(n,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.Tr=new ln(Xt.Er),this.dr=new ln(Xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const a=new Xt(e,n);this.Tr=this.Tr.add(a),this.dr=this.dr.add(a)}Rr(e,n){e.forEach(a=>this.addReference(a,n))}removeReference(e,n){this.Vr(new Xt(e,n))}mr(e,n){e.forEach(a=>this.removeReference(a,n))}gr(e){const n=new Ae(new dt([])),a=new Xt(n,e),o=new Xt(n,e+1),u=[];return this.dr.forEachInRange([a,o],d=>{this.Vr(d),u.push(d.key)}),u}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ae(new dt([])),a=new Xt(n,e),o=new Xt(n,e+1);let u=$e();return this.dr.forEachInRange([a,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new Xt(e,0),a=this.Tr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class Xt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ae.comparator(e.key,n.key)||et(e.wr,n.wr)}static Ar(e,n){return et(e.wr,n.wr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ln(Xt.Er)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new J4(u,n,a,o);this.mutationQueue.push(d);for(const h of o)this.br=this.br.add(new Xt(h.key,u)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return pe.resolve(d)}lookupMutationBatch(e,n){return pe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.vr(a),u=o<0?0:o;return pe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new Xt(n,0),o=new Xt(n,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([a,o],d=>{const h=this.Dr(d.wr);u.push(h)}),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new ln(et);return n.forEach(o=>{const u=new Xt(o,0),d=new Xt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,d],h=>{a=a.add(h.wr)})}),pe.resolve(this.Cr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;Ae.isDocumentKey(u)||(u=u.child(""));const d=new Xt(new Ae(u),0);let h=new ln(et);return this.br.forEachWhile(y=>{const g=y.key.path;return!!a.isPrefixOf(g)&&(g.length===o&&(h=h.add(y.wr)),!0)},d),pe.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(a=>{const o=this.Dr(a);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){at(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let a=this.br;return pe.forEach(n.mutations,o=>{const u=new Xt(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=a})}On(e){}containsKey(e,n){const a=new Xt(n,0),o=this.br.firstAfterOrEqual(a);return pe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.Mr=e,this.docs=function(){return new St(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,d=this.Mr(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return pe.resolve(a?a.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let a=ci();return n.forEach(o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():pn.newInvalidDocument(o))}),pe.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=ci();const d=n.path,h=new Ae(d.child("")),y=this.docs.getIteratorFrom(h);for(;y.hasNext();){const{key:g,value:{document:b}}=y.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||g4(p4(b),a)<=0||(o.has(b.key)||cf(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return pe.resolve(u)}getAllFromCollectionGroup(e,n,a,o){Ie()}Or(e,n){return pe.forEach(this.docs,a=>n(a))}newChangeBuffer(e){return new kA(this)}getSize(e){return pe.resolve(this.size)}}class kA extends RA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((a,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(a)}),pe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.persistence=e,this.Nr=new oo(n=>Fm(n),Gm),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xm,this.targetCount=0,this.kr=Xs.Bn()}forEachTarget(e,n){return this.Nr.forEach((a,o)=>n(o)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.Lr&&(this.Lr=n),pe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Kn(n),pe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.Nr.forEach((d,h)=>{h.sequenceNumber<=n&&a.get(h.targetId)===null&&(this.Nr.delete(d),u.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),pe.waitFor(u).next(()=>o)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const a=this.Nr.get(n)||null;return pe.resolve(a)}addMatchingKeys(e,n,a){return this.Br.Rr(n,a),pe.resolve()}removeMatchingKeys(e,n,a){this.Br.mr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),pe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const a=this.Br.yr(n);return pe.resolve(a)}containsKey(e,n){return pe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Um(0),this.Kr=!1,this.Kr=!0,this.$r=new DA,this.referenceDelegate=e(this),this.Ur=new PA(this),this.indexManager=new AA,this.remoteDocumentCache=function(o){return new MA(o)}(a=>this.referenceDelegate.Wr(a)),this.serializer=new wA(n),this.Gr=new OA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.qr[e.toKey()];return a||(a=new jA(n,this.referenceDelegate),this.qr[e.toKey()]=a),a}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,a){we("MemoryPersistence","Starting transaction:",e);const o=new LA(this.Qr.next());return this.referenceDelegate.zr(),a(o).next(u=>this.referenceDelegate.jr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Hr(e,n){return pe.or(Object.values(this.qr).map(a=>()=>a.containsKey(e,n)))}}class LA extends v4{constructor(e){super(),this.currentSequenceNumber=e}}class Wm{constructor(e){this.persistence=e,this.Jr=new Xm,this.Yr=null}static Zr(e){return new Wm(e)}get Xr(){if(this.Yr)return this.Yr;throw Ie()}addReference(e,n,a){return this.Jr.addReference(a,n),this.Xr.delete(a.toString()),pe.resolve()}removeReference(e,n,a){return this.Jr.removeReference(a,n),this.Xr.add(a.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(o=>this.Xr.add(o.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.Xr.add(u.toString()))}).next(()=>a.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Xr,a=>{const o=Ae.fromPath(a);return this.ei(e,o).next(u=>{u||n.removeEntry(o,Me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(a=>{a?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return pe.or([()=>pe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.$i=a,this.Ui=o}static Wi(e,n){let a=$e(),o=$e();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Zm(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Gw()?8:_4(qw())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.Yi(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.Zi(e,n,o,a).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new zA;return this.Xi(e,n,d).next(h=>{if(u.result=h,this.zi)return this.es(e,n,d,h.size)})}).next(()=>u.result)}es(e,n,a,o){return a.documentReadCount<this.ji?(El()<=Ze.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),pe.resolve()):(El()<=Ze.DEBUG&&we("QueryEngine","Query:",Us(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.Hi*o?(El()<=Ze.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):pe.resolve())}Yi(e,n){if(N0(n))return pe.resolve(null);let a=xr(n);return this.indexManager.getIndexType(e,a).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=pm(n,null,"F"),a=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next(u=>{const d=$e(...u);return this.Ji.getDocuments(e,d).next(h=>this.indexManager.getMinOffset(e,a).next(y=>{const g=this.ts(n,h);return this.ns(n,g,d,y.readTime)?this.Yi(e,pm(n,null,"F")):this.rs(e,g,n,y)}))})))}Zi(e,n,a,o){return N0(n)||o.isEqual(Me.min())?pe.resolve(null):this.Ji.getDocuments(e,a).next(u=>{const d=this.ts(n,u);return this.ns(n,d,a,o)?pe.resolve(null):(El()<=Ze.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Us(n)),this.rs(e,d,n,m4(o,-1)).next(h=>h))})}ts(e,n){let a=new ln(k1(e));return n.forEach((o,u)=>{cf(e,u)&&(a=a.add(u))}),a}ns(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,n,a){return El()<=Ze.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Us(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qi.min(),a)}rs(e,n,a,o){return this.Ji.getDocumentsMatchingQuery(e,a,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,a,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new St(et),this._s=new oo(u=>Fm(u),Gm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(a)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function HA(r,e,n,a){return new BA(r,e,n,a)}async function rb(r,e){const n=De(r);return await n.persistence.runTransaction("Handle user change","readonly",a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next(u=>(o=u,n.ls(e),n.mutationQueue.getAllMutationBatches(a))).next(u=>{const d=[],h=[];let y=$e();for(const g of o){d.push(g.batchId);for(const b of g.mutations)y=y.add(b.key)}for(const g of u){h.push(g.batchId);for(const b of g.mutations)y=y.add(b.key)}return n.localDocuments.getDocuments(a,y).next(g=>({hs:g,removedBatchIds:d,addedBatchIds:h}))})})}function qA(r,e){const n=De(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const o=e.batch.keys(),u=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,y,g,b){const E=g.batch,R=E.keys();let D=pe.resolve();return R.forEach(B=>{D=D.next(()=>b.getEntry(y,B)).next(L=>{const z=g.docVersions.get(B);at(z!==null),L.version.compareTo(z)<0&&(E.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),b.addEntry(L)))})}),D.next(()=>h.mutationQueue.removeMutationBatch(y,E))}(n,a,e,u).next(()=>u.apply(a)).next(()=>n.mutationQueue.performConsistencyCheck(a)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(h){let y=$e();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(y=y.add(h.batch.mutations[g].key));return y}(e))).next(()=>n.localDocuments.getDocuments(a,o))})}function ib(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function FA(r,e){const n=De(r),a=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const h=[];e.targetChanges.forEach((b,E)=>{const R=o.get(E);if(!R)return;h.push(n.Ur.removeMatchingKeys(u,b.removedDocuments,E).next(()=>n.Ur.addMatchingKeys(u,b.addedDocuments,E)));let D=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?D=D.withResumeToken(un.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):b.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(b.resumeToken,a)),o=o.insert(E,D),function(L,z,F){return L.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(R,D,b)&&h.push(n.Ur.updateTargetData(u,D))});let y=ci(),g=$e();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))}),h.push(GA(u,d,e.documentUpdates).next(b=>{y=b.Ps,g=b.Is})),!a.isEqual(Me.min())){const b=n.Ur.getLastRemoteSnapshotVersion(u).next(E=>n.Ur.setTargetsMetadata(u,u.currentSequenceNumber,a));h.push(b)}return pe.waitFor(h).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,y,g)).next(()=>y)}).then(u=>(n.os=o,u))}function GA(r,e,n){let a=$e(),o=$e();return n.forEach(u=>a=a.add(u)),e.getEntries(r,a).next(u=>{let d=ci();return n.forEach((h,y)=>{const g=u.get(h);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(h)),y.isNoDocument()&&y.version.isEqual(Me.min())?(e.removeEntry(h,y.readTime),d=d.insert(h,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),d=d.insert(h,y)):we("LocalStore","Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",y.version)}),{Ps:d,Is:o}})}function $A(r,e){const n=De(r);return n.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function QA(r,e){const n=De(r);return n.persistence.runTransaction("Allocate target","readwrite",a=>{let o;return n.Ur.getTargetData(a,e).next(u=>u?(o=u,pe.resolve(o)):n.Ur.allocateTargetId(a).next(d=>(o=new Hi(e,d,"TargetPurposeListen",a.currentSequenceNumber),n.Ur.addTargetData(a,o).next(()=>o))))}).then(a=>{const o=n.os.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(a.targetId,a),n._s.set(e,a.targetId)),a})}async function bm(r,e,n){const a=De(r),o=a.os.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,d=>a.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Wl(d))throw d;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}a.os=a.os.remove(e),a._s.delete(o.target)}function U0(r,e,n){const a=De(r);let o=Me.min(),u=$e();return a.persistence.runTransaction("Execute query","readwrite",d=>function(y,g,b){const E=De(y),R=E._s.get(b);return R!==void 0?pe.resolve(E.os.get(R)):E.Ur.getTargetData(g,b)}(a,d,xr(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,a.Ur.getMatchingKeysForTargetId(d,h.targetId).next(y=>{u=y})}).next(()=>a.ss.getDocumentsMatchingQuery(d,e,n?o:Me.min(),n?u:$e())).next(h=>(KA(a,V4(e),h),{documents:h,Ts:u})))}function KA(r,e,n){let a=r.us.get(e)||Me.min();n.forEach((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)}),r.us.set(e,a)}class B0{constructor(){this.activeTargetIds=q4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YA{constructor(){this.so=new B0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,a){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new B0,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function Ph(){return Ic===null?Ic=function(){return 268435456+Math.round(2147483648*Math.random())}():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class JA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const a=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=a+"://"+n.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(n,a,o,u,d){const h=Ph(),y=this.xo(n,a.toUriEncodedString());we("RestConnection",`Sending RPC '${n}' ${h}:`,y,o);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,u,d),this.No(n,y,g,o).then(b=>(we("RestConnection",`Received RPC '${n}' ${h}: `,b),b),b=>{throw $s("RestConnection",`RPC '${n}' ${h} failed with error: `,b,"url: ",y,"request:",o),b})}Lo(n,a,o,u,d,h){return this.Mo(n,a,o,u,d)}Oo(n,a,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ao}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((u,d)=>n[d]=u),o&&o.headers.forEach((u,d)=>n[d]=u)}xo(n,a){const o=WA[n];return`${this.Do}/v1/${a}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,a,o){const u=Ph();return new Promise((d,h)=>{const y=new y1;y.setWithCredentials(!0),y.listenOnce(v1.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Pc.NO_ERROR:const b=y.getResponseJson();we(hn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),d(b);break;case Pc.TIMEOUT:we(hn,`RPC '${e}' ${u} timed out`),h(new be(he.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:const E=y.getStatus();if(we(hn,`RPC '${e}' ${u} failed with status:`,E,"response text:",y.getResponseText()),E>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const D=R==null?void 0:R.error;if(D&&D.status&&D.message){const B=function(z){const F=z.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(F)>=0?F:he.UNKNOWN}(D.status);h(new be(B,D.message))}else h(new be(he.UNKNOWN,"Server responded with status "+y.getStatus()))}else h(new be(he.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{we(hn,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);we(hn,`RPC '${e}' ${u} sending request:`,o),y.send(n,"POST",g,a,15)})}Bo(e,n,a){const o=Ph(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=E1(),h=b1(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,n,a),y.encodeInitMessageHeaders=!0;const b=u.join("");we(hn,`Creating RPC '${e}' stream ${o}: ${b}`,y);const E=d.createWebChannel(b,y);let R=!1,D=!1;const B=new ZA({Io:z=>{D?we(hn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(R||(we(hn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),R=!0),we(hn,`RPC '${e}' stream ${o} sending:`,z),E.send(z))},To:()=>E.close()}),L=(z,F,Y)=>{z.listen(F,ne=>{try{Y(ne)}catch(re){setTimeout(()=>{throw re},0)}})};return L(E,xl.EventType.OPEN,()=>{D||(we(hn,`RPC '${e}' stream ${o} transport opened.`),B.yo())}),L(E,xl.EventType.CLOSE,()=>{D||(D=!0,we(hn,`RPC '${e}' stream ${o} transport closed`),B.So())}),L(E,xl.EventType.ERROR,z=>{D||(D=!0,$s(hn,`RPC '${e}' stream ${o} transport errored:`,z),B.So(new be(he.UNAVAILABLE,"The operation could not be completed")))}),L(E,xl.EventType.MESSAGE,z=>{var F;if(!D){const Y=z.data[0];at(!!Y);const ne=Y,re=ne.error||((F=ne[0])===null||F===void 0?void 0:F.error);if(re){we(hn,`RPC '${e}' stream ${o} received error:`,re);const V=re.status;let q=function(A){const S=Pt[A];if(S!==void 0)return Q1(S)}(V),N=re.message;q===void 0&&(q=he.INTERNAL,N="Unknown error status: "+V+" with message "+re.message),D=!0,B.So(new be(q,N)),E.close()}else we(hn,`RPC '${e}' stream ${o} received:`,Y),B.bo(Y)}}),L(h,_1.STAT_EVENT,z=>{z.stat===um.PROXY?we(hn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===um.NOPROXY&&we(hn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{B.wo()},0),B}}function Vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(r){return new uA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n,a=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=n,this.ko=a,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),a=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-a);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,a,o,u,d,h,y){this.ui=e,this.Ho=a,this.Jo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ab(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,o])=>{this.Yo===n&&this.P_(a,o)},a=>{e(()=>{const o=new be(he.UNKNOWN,"Fetching auth token failed: "+a.message);return this.I_(o)})})}P_(e,n){const a=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{a(()=>this.listener.Eo())}),this.stream.Ro(()=>{a(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{a(()=>this.I_(o))}),this.stream.onMessage(o=>{a(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ex extends sb{constructor(e,n,a,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,d),this.serializer=u}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=dA(this.serializer,e),a=function(u){if(!("targetChange"in u))return Me.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Me.min():d.readTime?Cr(d.readTime):Me.min()}(e);return this.listener.d_(n,a)}A_(e){const n={};n.database=_m(this.serializer),n.addTarget=function(u,d){let h;const y=d.target;if(h=hm(y)?{documents:pA(u,y)}:{query:gA(u,y)._t},h.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){h.resumeToken=X1(u,d.resumeToken);const g=gm(u,d.expectedCount);g!==null&&(h.expectedCount=g)}else if(d.snapshotVersion.compareTo(Me.min())>0){h.readTime=Yc(u,d.snapshotVersion.toTimestamp());const g=gm(u,d.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const a=vA(this.serializer,e);a&&(n.labels=a),this.a_(n)}R_(e){const n={};n.database=_m(this.serializer),n.removeTarget=e,this.a_(n)}}class tx extends sb{constructor(e,n,a,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,d),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return at(!!e.streamToken),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){at(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=mA(e.writeResults,e.commitTime),a=Cr(e.commitTime);return this.listener.g_(a,n)}p_(){const e={};e.database=_m(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(a=>hA(this.serializer,a))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx extends class{}{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new be(he.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,a,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Mo(e,ym(n,a),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(he.UNKNOWN,u.toString())})}Lo(e,n,a,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,h])=>this.connection.Lo(e,ym(n,a),o,d,h,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new be(he.UNKNOWN,d.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class rx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ui(n),this.D_=!1):we("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o(d=>{a.enqueueAndForget(async()=>{Ya(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await async function(y){const g=De(y);g.L_.add(4),await lo(g),g.q_.set("Unknown"),g.L_.delete(4),await eu(g)}(this))})}),this.q_=new rx(a,o)}}async function eu(r){if(Ya(r))for(const e of r.B_)await e(!0)}async function lo(r){for(const e of r.B_)await e(!1)}function ob(r,e){const n=De(r);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),np(n)?tp(n):uo(n).r_()&&ep(n,e))}function Jm(r,e){const n=De(r),a=uo(n);n.N_.delete(e),a.r_()&&lb(n,e),n.N_.size===0&&(a.r_()?a.o_():Ya(n)&&n.q_.set("Unknown"))}function ep(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(r).A_(e)}function lb(r,e){r.Q_.xe(e),uo(r).R_(e)}function tp(r){r.Q_=new aA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),uo(r).start(),r.q_.v_()}function np(r){return Ya(r)&&!uo(r).n_()&&r.N_.size>0}function Ya(r){return De(r).L_.size===0}function ub(r){r.Q_=void 0}async function ax(r){r.q_.set("Online")}async function sx(r){r.N_.forEach((e,n)=>{ep(r,e)})}async function ox(r,e){ub(r),np(r)?(r.q_.M_(e),tp(r)):r.q_.set("Unknown")}async function lx(r,e,n){if(r.q_.set("Online"),e instanceof Y1&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const h of u.targetIds)o.N_.has(h)&&(await o.remoteSyncer.rejectListen(h,d),o.N_.delete(h),o.Q_.removeTarget(h))}(r,e)}catch(a){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Xc(r,a)}else if(e instanceof zc?r.Q_.Ke(e):e instanceof K1?r.Q_.He(e):r.Q_.We(e),!n.isEqual(Me.min()))try{const a=await ib(r.localStore);n.compareTo(a)>=0&&await function(u,d){const h=u.Q_.rt(d);return h.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const b=u.N_.get(g);b&&u.N_.set(g,b.withResumeToken(y.resumeToken,d))}}),h.targetMismatches.forEach((y,g)=>{const b=u.N_.get(y);if(!b)return;u.N_.set(y,b.withResumeToken(un.EMPTY_BYTE_STRING,b.snapshotVersion)),lb(u,y);const E=new Hi(b.target,y,g,b.sequenceNumber);ep(u,E)}),u.remoteSyncer.applyRemoteEvent(h)}(r,n)}catch(a){we("RemoteStore","Failed to raise snapshot:",a),await Xc(r,a)}}async function Xc(r,e,n){if(!Wl(e))throw e;r.L_.add(1),await lo(r),r.q_.set("Offline"),n||(n=()=>ib(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{we("RemoteStore","Retrying IndexedDB access"),await n(),r.L_.delete(1),await eu(r)})}function cb(r,e){return e().catch(n=>Xc(r,n,e))}async function pf(r){const e=De(r),n=Yi(e);let a=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ux(e);)try{const o=await $A(e.localStore,a);if(o===null){e.O_.length===0&&n.o_();break}a=o.batchId,cx(e,o)}catch(o){await Xc(e,o)}fb(e)&&db(e)}function ux(r){return Ya(r)&&r.O_.length<10}function cx(r,e){r.O_.push(e);const n=Yi(r);n.r_()&&n.V_&&n.m_(e.mutations)}function fb(r){return Ya(r)&&!Yi(r).n_()&&r.O_.length>0}function db(r){Yi(r).start()}async function fx(r){Yi(r).p_()}async function dx(r){const e=Yi(r);for(const n of r.O_)e.m_(n.mutations)}async function hx(r,e,n){const a=r.O_.shift(),o=Qm.from(a,e,n);await cb(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await pf(r)}async function mx(r,e){e&&Yi(r).V_&&await async function(a,o){if(function(d){return nA(d)&&d!==he.ABORTED}(o.code)){const u=a.O_.shift();Yi(a).s_(),await cb(a,()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o)),await pf(a)}}(r,e),fb(r)&&db(r)}async function q0(r,e){const n=De(r);n.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const a=Ya(n);n.L_.add(3),await lo(n),a&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await eu(n)}async function px(r,e){const n=De(r);e?(n.L_.delete(2),await eu(n)):e||(n.L_.add(2),await lo(n),n.q_.set("Unknown"))}function uo(r){return r.K_||(r.K_=function(n,a,o){const u=De(n);return u.w_(),new ex(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Eo:ax.bind(null,r),Ro:sx.bind(null,r),mo:ox.bind(null,r),d_:lx.bind(null,r)}),r.B_.push(async e=>{e?(r.K_.s_(),np(r)?tp(r):r.q_.set("Unknown")):(await r.K_.stop(),ub(r))})),r.K_}function Yi(r){return r.U_||(r.U_=function(n,a,o){const u=De(n);return u.w_(),new tx(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fx.bind(null,r),mo:mx.bind(null,r),f_:dx.bind(null,r),g_:hx.bind(null,r)}),r.B_.push(async e=>{e?(r.U_.s_(),await pf(r)):(await r.U_.stop(),r.O_.length>0&&(we("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))})),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const d=Date.now()+a,h=new rp(e,n,d,o,u);return h.start(a),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ip(r,e){if(ui("AsyncQueue",`${e}: ${r}`),Wl(r))return new be(he.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.comparator=e?(n,a)=>e(n,a)||Ae.comparator(n.key,a.key):(n,a)=>Ae.comparator(n.key,a.key),this.keyedMap=Rl(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new qs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,a)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new qs;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this.W_=new St(Ae.comparator)}track(e){const n=e.doc.key,a=this.W_.get(n);a?e.type!==0&&a.type===3?this.W_=this.W_.insert(n,e):e.type===3&&a.type!==1?this.W_=this.W_.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.W_=this.W_.remove(n):e.type===1&&a.type===2?this.W_=this.W_.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,a)=>{e.push(a)}),e}}class Ws{constructor(e,n,a,o,u,d,h,y,g){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,n,a,o,u){const d=[];return n.forEach(h=>{d.push({type:0,doc:h})}),new Ws(e,n,qs.emptySet(n),d,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yx{constructor(){this.queries=G0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,a){const o=De(n),u=o.queries;o.queries=G0(),u.forEach((d,h)=>{for(const y of h.j_)y.onError(a)})})(this,new be(he.ABORTED,"Firestore shutting down"))}}function G0(){return new oo(r=>M1(r),uf)}async function ap(r,e){const n=De(r);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.H_()&&e.J_()&&(a=2):(u=new gx,a=e.J_()?0:1);try{switch(a){case 0:u.z_=await n.onListen(o,!0);break;case 1:u.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const h=ip(d,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(h)}n.queries.set(o,u),u.j_.push(e),e.Z_(n.onlineState),u.z_&&e.X_(u.z_)&&op(n)}async function sp(r,e){const n=De(r),a=e.query;let o=3;const u=n.queries.get(a);if(u){const d=u.j_.indexOf(e);d>=0&&(u.j_.splice(d,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function vx(r,e){const n=De(r);let a=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const h of d.j_)h.X_(o)&&(a=!0);d.z_=o}}a&&op(n)}function _x(r,e,n){const a=De(r),o=a.queries.get(e);if(o)for(const u of o.j_)u.onError(n);a.queries.delete(e)}function op(r){r.Y_.forEach(e=>{e.next()})}var Em,$0;($0=Em||(Em={})).ea="default",$0.Cache="cache";class lp{constructor(e,n,a){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=a||{}}X_(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Ws(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const a=n!=="Offline";return(!this.options._a||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.key=e}}class mb{constructor(e){this.key=e}}class bx{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$e(),this.mutatedKeys=$e(),this.Aa=k1(e),this.Ra=new qs(this.Aa)}get Va(){return this.Ta}ma(e,n){const a=n?n.fa:new F0,o=n?n.Ra:this.Ra;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,h=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,E)=>{const R=o.get(b),D=cf(this.query,E)?E:null,B=!!R&&this.mutatedKeys.has(R.key),L=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let z=!1;R&&D?R.data.isEqual(D.data)?B!==L&&(a.track({type:3,doc:D}),z=!0):this.ga(R,D)||(a.track({type:2,doc:D}),z=!0,(y&&this.Aa(D,y)>0||g&&this.Aa(D,g)<0)&&(h=!0)):!R&&D?(a.track({type:0,doc:D}),z=!0):R&&!D&&(a.track({type:1,doc:R}),z=!0,(y||g)&&(h=!0)),z&&(D?(d=d.add(D),u=L?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),a.track({type:1,doc:b})}return{Ra:d,fa:a,ns:h,mutatedKeys:u}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort((b,E)=>function(D,B){const L=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return L(D)-L(B)}(b.type,E.type)||this.Aa(b.doc,E.doc)),this.pa(a),o=o!=null&&o;const h=n&&!o?this.ya():[],y=this.da.size===0&&this.current&&!o?1:0,g=y!==this.Ea;return this.Ea=y,d.length!==0||g?{snapshot:new Ws(this.query,e.Ra,u,d,e.mutatedKeys,y===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new F0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=$e(),this.Ra.forEach(a=>{this.Sa(a.key)&&(this.da=this.da.add(a.key))});const n=[];return e.forEach(a=>{this.da.has(a)||n.push(new mb(a))}),this.da.forEach(a=>{e.has(a)||n.push(new hb(a))}),n}ba(e){this.Ta=e.Ts,this.da=$e();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ws.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Ex{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class Sx{constructor(e){this.key=e,this.va=!1}}class wx{constructor(e,n,a,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new oo(h=>M1(h),uf),this.Ma=new Map,this.xa=new Set,this.Oa=new St(Ae.comparator),this.Na=new Map,this.La=new Xm,this.Ba={},this.ka=new Map,this.qa=Xs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Tx(r,e,n=!0){const a=bb(r);let o;const u=a.Fa.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await pb(a,e,n,!0),o}async function Ax(r,e){const n=bb(r);await pb(n,e,!0,!1)}async function pb(r,e,n,a){const o=await QA(r.localStore,xr(e)),u=o.targetId,d=r.sharedClientState.addLocalQueryTarget(u,n);let h;return a&&(h=await xx(r,e,u,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&ob(r.remoteStore,o),h}async function xx(r,e,n,a,o){r.Ka=(E,R,D)=>async function(L,z,F,Y){let ne=z.view.ma(F);ne.ns&&(ne=await U0(L.localStore,z.query,!1).then(({documents:N})=>z.view.ma(N,ne)));const re=Y&&Y.targetChanges.get(z.targetId),V=Y&&Y.targetMismatches.get(z.targetId)!=null,q=z.view.applyChanges(ne,L.isPrimaryClient,re,V);return K0(L,z.targetId,q.wa),q.snapshot}(r,E,R,D);const u=await U0(r.localStore,e,!0),d=new bx(e,u.Ts),h=d.ma(u.documents),y=Jl.createSynthesizedTargetChangeForCurrentChange(n,a&&r.onlineState!=="Offline",o),g=d.applyChanges(h,r.isPrimaryClient,y);K0(r,n,g.wa);const b=new Ex(e,n,d);return r.Fa.set(e,b),r.Ma.has(n)?r.Ma.get(n).push(e):r.Ma.set(n,[e]),g.snapshot}async function Rx(r,e,n){const a=De(r),o=a.Fa.get(e),u=a.Ma.get(o.targetId);if(u.length>1)return a.Ma.set(o.targetId,u.filter(d=>!uf(d,e))),void a.Fa.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await bm(a.localStore,o.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(o.targetId),n&&Jm(a.remoteStore,o.targetId),Sm(a,o.targetId)}).catch(Xl)):(Sm(a,o.targetId),await bm(a.localStore,o.targetId,!0))}async function Cx(r,e){const n=De(r),a=n.Fa.get(e),o=n.Ma.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),Jm(n.remoteStore,a.targetId))}async function Nx(r,e,n){const a=Px(r);try{const o=await function(d,h){const y=De(d),g=At.now(),b=h.reduce((D,B)=>D.add(B.key),$e());let E,R;return y.persistence.runTransaction("Locally write mutations","readwrite",D=>{let B=ci(),L=$e();return y.cs.getEntries(D,b).next(z=>{B=z,B.forEach((F,Y)=>{Y.isValidDocument()||(L=L.add(F))})}).next(()=>y.localDocuments.getOverlayedDocuments(D,B)).next(z=>{E=z;const F=[];for(const Y of h){const ne=W4(Y,E.get(Y.key).overlayedDocument);ne!=null&&F.push(new Zi(Y.key,ne,x1(ne.value.mapValue),Rr.exists(!0)))}return y.mutationQueue.addMutationBatch(D,g,F,h)}).next(z=>{R=z;const F=z.applyToLocalDocumentSet(E,L);return y.documentOverlayCache.saveOverlays(D,z.batchId,F)})}).then(()=>({batchId:R.batchId,changes:V1(E)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),function(d,h,y){let g=d.Ba[d.currentUser.toKey()];g||(g=new St(et)),g=g.insert(h,y),d.Ba[d.currentUser.toKey()]=g}(a,o.batchId,n),await tu(a,o.changes),await pf(a.remoteStore)}catch(o){const u=ip(o,"Failed to persist write");n.reject(u)}}async function gb(r,e){const n=De(r);try{const a=await FA(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Na.get(u);d&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.va=!0:o.modifiedDocuments.size>0?at(d.va):o.removedDocuments.size>0&&(at(d.va),d.va=!1))}),await tu(n,a,e)}catch(a){await Xl(a)}}function Q0(r,e,n){const a=De(r);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Fa.forEach((u,d)=>{const h=d.view.Z_(e);h.snapshot&&o.push(h.snapshot)}),function(d,h){const y=De(d);y.onlineState=h;let g=!1;y.queries.forEach((b,E)=>{for(const R of E.j_)R.Z_(h)&&(g=!0)}),g&&op(y)}(a.eventManager,e),o.length&&a.Ca.d_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function Ox(r,e,n){const a=De(r);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Na.get(e),u=o&&o.key;if(u){let d=new St(Ae.comparator);d=d.insert(u,pn.newNoDocument(u,Me.min()));const h=$e().add(u),y=new hf(Me.min(),new Map,new St(et),d,h);await gb(a,y),a.Oa=a.Oa.remove(u),a.Na.delete(e),up(a)}else await bm(a.localStore,e,!1).then(()=>Sm(a,e,n)).catch(Xl)}async function Ix(r,e){const n=De(r),a=e.batch.batchId;try{const o=await qA(n.localStore,e);vb(n,a,null),yb(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await tu(n,o)}catch(o){await Xl(o)}}async function Dx(r,e,n){const a=De(r);try{const o=await function(d,h){const y=De(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let b;return y.mutationQueue.lookupMutationBatch(g,h).next(E=>(at(E!==null),b=E.keys(),y.mutationQueue.removeMutationBatch(g,E))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,b,h)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b)).next(()=>y.localDocuments.getDocuments(g,b))})}(a.localStore,e);vb(a,e,n),yb(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await tu(a,o)}catch(o){await Xl(o)}}function yb(r,e){(r.ka.get(e)||[]).forEach(n=>{n.resolve()}),r.ka.delete(e)}function vb(r,e,n){const a=De(r);let o=a.Ba[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.Ba[a.currentUser.toKey()]=o}}function Sm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Ma.get(e))r.Fa.delete(a),n&&r.Ca.$a(a,n);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach(a=>{r.La.containsKey(a)||_b(r,a)})}function _b(r,e){r.xa.delete(e.path.canonicalString());const n=r.Oa.get(e);n!==null&&(Jm(r.remoteStore,n),r.Oa=r.Oa.remove(e),r.Na.delete(n),up(r))}function K0(r,e,n){for(const a of n)a instanceof hb?(r.La.addReference(a.key,e),jx(r,a)):a instanceof mb?(we("SyncEngine","Document no longer in limbo: "+a.key),r.La.removeReference(a.key,e),r.La.containsKey(a.key)||_b(r,a.key)):Ie()}function jx(r,e){const n=e.key,a=n.path.canonicalString();r.Oa.get(n)||r.xa.has(a)||(we("SyncEngine","New document in limbo: "+n),r.xa.add(a),up(r))}function up(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const n=new Ae(dt.fromString(e)),a=r.qa.next();r.Na.set(a,new Sx(n)),r.Oa=r.Oa.insert(n,a),ob(r.remoteStore,new Hi(xr(lf(n.path)),a,"TargetPurposeLimboResolution",Um.oe))}}async function tu(r,e,n){const a=De(r),o=[],u=[],d=[];a.Fa.isEmpty()||(a.Fa.forEach((h,y)=>{d.push(a.Ka(y,e,n).then(g=>{var b;if((g||n)&&a.isPrimaryClient){const E=g?!g.fromCache:(b=n==null?void 0:n.targetChanges.get(y.targetId))===null||b===void 0?void 0:b.current;a.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(g){o.push(g);const E=Zm.Wi(y.targetId,g);u.push(E)}}))}),await Promise.all(d),a.Ca.d_(o),await async function(y,g){const b=De(y);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>pe.forEach(g,R=>pe.forEach(R.$i,D=>b.persistence.referenceDelegate.addReference(E,R.targetId,D)).next(()=>pe.forEach(R.Ui,D=>b.persistence.referenceDelegate.removeReference(E,R.targetId,D)))))}catch(E){if(!Wl(E))throw E;we("LocalStore","Failed to update sequence numbers: "+E)}for(const E of g){const R=E.targetId;if(!E.fromCache){const D=b.os.get(R),B=D.snapshotVersion,L=D.withLastLimboFreeSnapshotVersion(B);b.os=b.os.insert(R,L)}}}(a.localStore,u))}async function Mx(r,e){const n=De(r);if(!n.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const a=await rb(n.localStore,e);n.currentUser=e,function(u,d){u.ka.forEach(h=>{h.forEach(y=>{y.reject(new be(he.CANCELLED,d))})}),u.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await tu(n,a.hs)}}function kx(r,e){const n=De(r),a=n.Na.get(e);if(a&&a.va)return $e().add(a.key);{let o=$e();const u=n.Ma.get(e);if(!u)return o;for(const d of u){const h=n.Fa.get(d);o=o.unionWith(h.view.Va)}return o}}function bb(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=gb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ox.bind(null,e),e.Ca.d_=vx.bind(null,e.eventManager),e.Ca.$a=_x.bind(null,e.eventManager),e}function Px(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ix.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dx.bind(null,e),e}class Wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return HA(this.persistence,new UA,e.initialUser,this.serializer)}Ga(e){return new VA(Wm.Zr,this.serializer)}Wa(e){return new YA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wc.provider={build:()=>new Wc};class wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Q0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mx.bind(null,this.syncEngine),await px(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yx}()}createDatastore(e){const n=mf(e.databaseInfo.databaseId),a=function(u){return new JA(u)}(e.databaseInfo);return function(u,d,h,y){return new nx(u,d,h,y)}(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return function(a,o,u,d,h){return new ix(a,o,u,d,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Q0(this.syncEngine,n,0),function(){return H0.D()?new H0:new XA}())}createSyncEngine(e,n){return function(o,u,d,h,y,g,b){const E=new wx(o,u,d,h,y,g);return b&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=De(o);we("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await lo(u),u.k_.shutdown(),u.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=w1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,async d=>{we("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(a,d=>(we("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=ip(n,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function Lh(r,e){r.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let a=n.initialUser;r.setCredentialChangeListener(async o=>{a.isEqual(o)||(await rb(e.localStore,o),a=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Y0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await Eb(r);we("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(a=>q0(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,o)=>q0(e.remoteStore,o)),r._onlineComponents=e}async function Eb(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lh(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===he.FAILED_PRECONDITION||o.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;$s("Error using user provided cache. Falling back to memory cache: "+n),await Lh(r,new Wc)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await Lh(r,new Wc);return r._offlineComponents}async function fp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await Y0(r,r._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await Y0(r,new wm))),r._onlineComponents}function Sb(r){return Eb(r).then(e=>e.persistence)}function wb(r){return fp(r).then(e=>e.remoteStore)}function Lx(r){return fp(r).then(e=>e.syncEngine)}async function Zc(r){const e=await fp(r),n=e.eventManager;return n.onListen=Tx.bind(null,e.syncEngine),n.onUnlisten=Rx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ax.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Cx.bind(null,e.syncEngine),n}function zx(r){return r.asyncQueue.enqueue(async()=>{const e=await Sb(r),n=await wb(r);return e.setNetworkEnabled(!0),function(o){const u=De(o);return u.L_.delete(0),eu(u)}(n)})}function Ux(r){return r.asyncQueue.enqueue(async()=>{const e=await Sb(r),n=await wb(r);return e.setNetworkEnabled(!1),async function(o){const u=De(o);u.L_.add(0),await lo(u),u.q_.set("Offline")}(n)})}function Bx(r,e,n={}){const a=new si;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,h,y,g){const b=new cp({next:R=>{b.Za(),d.enqueueAndForget(()=>sp(u,E));const D=R.docs.has(h);!D&&R.fromCache?g.reject(new be(he.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&R.fromCache&&y&&y.source==="server"?g.reject(new be(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(R)},error:R=>g.reject(R)}),E=new lp(lf(h.path),b,{includeMetadataChanges:!0,_a:!0});return ap(u,E)}(await Zc(r),r.asyncQueue,e,n,a)),a.promise}function Hx(r,e,n={}){const a=new si;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,h,y,g){const b=new cp({next:R=>{b.Za(),d.enqueueAndForget(()=>sp(u,E)),R.fromCache&&y.source==="server"?g.reject(new be(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(R)},error:R=>g.reject(R)}),E=new lp(h,b,{includeMetadataChanges:!0,_a:!0});return ap(u,E)}(await Zc(r),r.asyncQueue,e,n,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(r,e,n){if(!n)throw new be(he.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function qx(r,e,n,a){if(e===!0&&a===!0)throw new be(he.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function W0(r){if(!Ae.isDocumentKey(r))throw new be(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Z0(r){if(Ae.isDocumentKey(r))throw new be(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function gf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ie()}function Vn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new be(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gf(r);throw new be(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){var n,a;if(e.host===void 0){if(e.ssl!==void 0)throw new be(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new be(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tb((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,o){return a.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yf{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J0(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new a4;switch(a.type){case"firstParty":return new u4(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new be(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const a=X0.get(n);a&&(we("ComponentProvider","Removing Datastore"),X0.delete(n),a.terminate())}(this),Promise.resolve()}}function Fx(r,e,n,a={}){var o;const u=(r=Vn(r,yf))._getSettings(),d=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==d&&$s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},u),{host:d,ssl:!1})),a.mockUserToken){let h,y;if(typeof a.mockUserToken=="string")h=a.mockUserToken,y=mn.MOCK_USER;else{h=o1(a.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const g=a.mockUserToken.sub||a.mockUserToken.user_id;if(!g)throw new be(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new mn(g)}r._authCredentials=new s4(new S1(h,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class wn{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class Gi extends Ji{constructor(e,n,a){super(e,n,lf(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Ae(e))}withConverter(e){return new Gi(this.firestore,e,this._path)}}function Bi(r,e,...n){if(r=yn(r),Ab("collection","path",e),r instanceof yf){const a=dt.fromString(e,...n);return Z0(a),new Gi(r,null,a)}{if(!(r instanceof wn||r instanceof Gi))throw new be(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(dt.fromString(e,...n));return Z0(a),new Gi(r.firestore,null,a)}}function gn(r,e,...n){if(r=yn(r),arguments.length===1&&(e=w1.newId()),Ab("doc","path",e),r instanceof yf){const a=dt.fromString(e,...n);return W0(a),new wn(r,null,new Ae(a))}{if(!(r instanceof wn||r instanceof Gi))throw new be(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(dt.fromString(e,...n));return W0(a),new wn(r.firestore,r instanceof Gi?r.converter:null,new Ae(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ab(this,"async_queue_retry"),this.Vu=()=>{const a=Vh();a&&we("AsyncQueue","Visibility state changed to "+a.visibilityState),this.t_.jo()},this.mu=e;const n=Vh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new si;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wl(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(a=>{this.Eu=a,this.du=!1;const o=function(d){let h=d.message||"";return d.stack&&(h=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),h}(a);throw ui("INTERNAL UNHANDLED ERROR: ",o),a}).then(a=>(this.du=!1,a))));return this.mu=n,n}enqueueAfterDelay(e,n,a){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=rp.createAndSchedule(this,e,n,a,u=>this.yu(u));return this.Tu.push(o),o}fu(){this.Eu&&Ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,a)=>n.targetTimeMs-a.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function t_(r){return function(n,a){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of a)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class fi extends yf{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new e_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e_(e),this._firestoreClient=void 0,await e}}}function Gx(r,e){const n=typeof r=="object"?r:Lm(),a=typeof r=="string"?r:"(default)",o=sf(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=Pm("firestore");u&&Fx(o,...u)}return o}function co(r){if(r._terminated)throw new be(he.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||$x(r),r._firestoreClient}function $x(r){var e,n,a;const o=r._freezeSettings(),u=function(h,y,g,b){return new S4(h,y,g,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,Tb(b.experimentalLongPollingOptions),b.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((a=o.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new Vx(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(h){const y=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(y),_online:y}}(r._componentsProvider))}function Qx(r){return zx(co(r=Vn(r,fi)))}function Kx(r){return Ux(co(r=Vn(r,fi)))}function Yx(r){return $T(r.app,"firestore",r._databaseId.database),r._delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(un.fromBase64String(e))}catch(n){throw new be(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zs(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=/^__.*__$/;class Wx{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(e,this.data,n,this.fieldTransforms)}}class xb{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new Zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class mp{constructor(e,n,a,o,u,d){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new mp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const a=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:a,xu:!1});return o.Ou(e),o}Nu(e){var n;const a=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:a,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Rb(this.Cu)&&Xx.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Zx{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||mf(e)}Qu(e,n,a,o=!1){return new mp({Cu:e,methodName:n,qu:a,path:on.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pp(r){const e=r._freezeSettings(),n=mf(r._databaseId);return new Zx(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Jx(r,e,n,a,o,u={}){const d=r.Qu(u.merge||u.mergeFields?2:0,e,n,o);yp("Data must be an object, but it was:",d,a);const h=Cb(a,d);let y,g;if(u.merge)y=new Pn(d.fieldMask),g=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const E of u.mergeFields){const R=Tm(e,E,n);if(!d.contains(R))throw new be(he.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Ob(b,R)||b.push(R)}y=new Pn(b),g=d.fieldTransforms.filter(E=>y.covers(E.field))}else y=null,g=d.fieldTransforms;return new Wx(new Rn(h),y,g)}class bf extends _f{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bf}}class gp extends _f{_toFieldTransform(e){return new Q4(e.path,new ql)}isEqual(e){return e instanceof gp}}function eR(r,e,n,a){const o=r.Qu(1,e,n);yp("Data must be an object, but it was:",o,a);const u=[],d=Rn.empty();Ka(a,(y,g)=>{const b=vp(e,y,n);g=yn(g);const E=o.Nu(b);if(g instanceof bf)u.push(b);else{const R=nu(g,E);R!=null&&(u.push(b),d.set(b,R))}});const h=new Pn(u);return new xb(d,h,o.fieldTransforms)}function tR(r,e,n,a,o,u){const d=r.Qu(1,e,n),h=[Tm(e,a,n)],y=[o];if(u.length%2!=0)throw new be(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)h.push(Tm(e,u[R])),y.push(u[R+1]);const g=[],b=Rn.empty();for(let R=h.length-1;R>=0;--R)if(!Ob(g,h[R])){const D=h[R];let B=y[R];B=yn(B);const L=d.Nu(D);if(B instanceof bf)g.push(D);else{const z=nu(B,L);z!=null&&(g.push(D),b.set(D,z))}}const E=new Pn(g);return new xb(b,E,d.fieldTransforms)}function nR(r,e,n,a=!1){return nu(n,r.Qu(a?4:3,e))}function nu(r,e){if(Nb(r=yn(r)))return yp("Unsupported field value:",e,r),Cb(r,e);if(r instanceof _f)return function(a,o){if(!Rb(o.Cu))throw o.Bu(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(a,o){const u=[];let d=0;for(const h of a){let y=nu(h,o.Lu(d));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),d++}return{arrayValue:{values:u}}}(r,e)}return function(a,o){if((a=yn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return F4(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=At.fromDate(a);return{timestampValue:Yc(o.serializer,u)}}if(a instanceof At){const u=new At(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Yc(o.serializer,u)}}if(a instanceof dp)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Zs)return{bytesValue:X1(o.serializer,a._byteString)};if(a instanceof wn){const u=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(u))throw o.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ym(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof hp)return function(d,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw h.Bu("VectorValues must only contain numeric values.");return $m(h.serializer,y)})}}}}}}(a,o);throw o.Bu(`Unsupported field value: ${gf(a)}`)}(r,e)}function Cb(r,e){const n={};return T1(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(r,(a,o)=>{const u=nu(o,e.Mu(a));u!=null&&(n[a]=u)}),{mapValue:{fields:n}}}function Nb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof At||r instanceof dp||r instanceof Zs||r instanceof wn||r instanceof _f||r instanceof hp)}function yp(r,e,n){if(!Nb(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const a=gf(n);throw a==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+a)}}function Tm(r,e,n){if((e=yn(e))instanceof vf)return e._internalPath;if(typeof e=="string")return vp(r,e);throw Jc("Field path arguments must be of type string or ",r,!1,void 0,n)}const rR=new RegExp("[~\\*/\\[\\]]");function vp(r,e,n){if(e.search(rR)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new vf(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Jc(r,e,n,a,o){const u=a&&!a.isEmpty(),d=o!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${a}`),d&&(y+=` in document ${o}`),y+=")"),new be(he.INVALID_ARGUMENT,h+r+y)}function Ob(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_p("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iR extends Ib{data(){return super.data()}}function _p(r,e){return typeof e=="string"?vp(r,e):e instanceof vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new be(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bp{}class jb extends bp{}function ja(r,e,...n){let a=[];e instanceof bp&&a.push(e),a=a.concat(n),function(u){const d=u.filter(y=>y instanceof Sp).length,h=u.filter(y=>y instanceof Ep).length;if(d>1||d>0&&h>0)throw new be(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const o of a)r=o._apply(r);return r}class Ep extends jb{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Ep(e,n,a)}_apply(e){const n=this._parse(e);return Mb(e._query,n),new Ji(e.firestore,e.converter,mm(e._query,n))}_parse(e){const n=pp(e.firestore);return function(u,d,h,y,g,b,E){let R;if(g.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new be(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){r_(E,b);const D=[];for(const B of E)D.push(n_(y,u,B));R={arrayValue:{values:D}}}else R=n_(y,u,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||r_(E,b),R=nR(h,d,E,b==="in"||b==="not-in");return Vt.create(g,b,R)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Sp extends bp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sp(e,n)}_parse(e){const n=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const h=u.getFlattenedFilters();for(const y of h)Mb(d,y),d=mm(d,y)}(e._query,n),new Ji(e.firestore,e.converter,mm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wp extends jb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wp(e,n)}_apply(e){const n=function(o,u,d){if(o.startAt!==null)throw new be(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new be(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hl(u,d)}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new so(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function Ma(r,e="asc"){const n=e,a=_p("orderBy",r);return wp._create(a,n)}function n_(r,e,n){if(typeof(n=yn(n))=="string"){if(n==="")throw new be(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!j1(e)&&n.indexOf("/")!==-1)throw new be(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(dt.fromString(n));if(!Ae.isDocumentKey(a))throw new be(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return w0(r,new Ae(a))}if(n instanceof wn)return w0(r,n._key);throw new be(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gf(n)}.`)}function r_(r,e){if(!Array.isArray(r)||r.length===0)throw new be(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mb(r,e){const n=function(o,u){for(const d of o)for(const h of d.getFlattenedFilters())if(u.indexOf(h.op)>=0)return h.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new be(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aR{convertValue(e,n="none"){switch($a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Ka(e,(o,u)=>{a[o]=this.convertValue(u,n)}),a}convertVectorValue(e){var n,a,o;const u=(o=(a=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||a===void 0?void 0:a.values)===null||o===void 0?void 0:o.map(d=>Ot(d.doubleValue));return new hp(u)}convertGeoPoint(e){return new dp(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(a=>this.convertValue(a,n))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Hm(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(zl(e));default:return null}}convertTimestamp(e){const n=Ki(e);return new At(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=dt.fromString(e);at(nb(a));const o=new Ul(a.get(1),a.get(3)),u=new Ae(a.popFirst(5));return o.isEqual(n)||ui(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(r,e,n){let a;return a=r?r.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kb extends Ib{constructor(e,n,a,o,u,d){super(e,n,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(_p("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}}class Uc extends kb{data(e={}){return super.data(e)}}class Pb{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Nl(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(a=>{e.call(n,new Uc(this._firestore,this._userDataWriter,a.key,a,new Nl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(h=>{const y=new Uc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Nl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>u||h.type!==3).map(h=>{const y=new Uc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Nl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,b=-1;return h.type!==0&&(g=d.indexOf(h.doc.key),d=d.delete(h.doc.key)),h.type!==1&&(d=d.add(h.doc),b=d.indexOf(h.doc.key)),{type:oR(h.type),doc:y,oldIndex:g,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(r){r=Vn(r,wn);const e=Vn(r.firestore,fi);return Bx(co(e),r._key).then(n=>zb(e,r,n))}class Tp extends aR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function ka(r){r=Vn(r,Ji);const e=Vn(r.firestore,fi),n=co(e),a=new Tp(e);return Db(r._query),Hx(n,r._query).then(o=>new Pb(e,a,r,o))}function Ef(r,e,n,...a){r=Vn(r,wn);const o=Vn(r.firestore,fi),u=pp(o);let d;return d=typeof(e=yn(e))=="string"||e instanceof vf?tR(u,"updateDoc",r._key,e,n,a):eR(u,"updateDoc",r._key,e),Lb(o,[d.toMutation(r._key,Rr.exists(!0))])}function lR(r,e){const n=Vn(r.firestore,fi),a=gn(r),o=sR(r.converter,e);return Lb(n,[Jx(pp(r.firestore),"addDoc",a._key,o,r.converter!==null,{}).toMutation(a._key,Rr.exists(!1))]).then(()=>a)}function Vb(r,...e){var n,a,o;r=yn(r);let u={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||t_(e[d])||(u=e[d],d++);const h={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(t_(e[d])){const E=e[d];e[d]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[d+1]=(a=E.error)===null||a===void 0?void 0:a.bind(E),e[d+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let y,g,b;if(r instanceof wn)g=Vn(r.firestore,fi),b=lf(r._key.path),y={next:E=>{e[d]&&e[d](zb(g,r,E))},error:e[d+1],complete:e[d+2]};else{const E=Vn(r,Ji);g=Vn(E.firestore,fi),b=E._query;const R=new Tp(g);y={next:D=>{e[d]&&e[d](new Pb(g,R,E,D))},error:e[d+1],complete:e[d+2]},Db(r._query)}return function(R,D,B,L){const z=new cp(L),F=new lp(D,z,B);return R.asyncQueue.enqueueAndForget(async()=>ap(await Zc(R),F)),()=>{z.Za(),R.asyncQueue.enqueueAndForget(async()=>sp(await Zc(R),F))}}(co(g),b,h,y)}function Lb(r,e){return function(a,o){const u=new si;return a.asyncQueue.enqueueAndForget(async()=>Nx(await Lx(a),o,u)),u.promise}(co(r),e)}function zb(r,e,n){const a=n.docs.get(e._key),o=new Tp(r);return new kb(r,o,e._key,a,new Nl(n.hasPendingWrites,n.fromCache),e.converter)}function Js(){return new gp("serverTimestamp")}(function(e,n=!0){(function(o){ao=o})(d1),Gs(new Ha("firestore",(a,{instanceIdentifier:o,options:u})=>{const d=a.getProvider("app").getImmediate(),h=new fi(new o4(a.getProvider("auth-internal")),new f4(a.getProvider("app-check-internal")),function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new be(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(g.options.projectId,b)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),h._setSettings(u),h},"PUBLIC").setMultipleInstances(!0)),Ar(v0,"4.7.3",e),Ar(v0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firebasestorage.googleapis.com",Bb="storageBucket",uR=2*60*1e3,cR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt extends Wi{constructor(e,n,a=0){super(zh(e),`Firebase Storage: ${n} (${zh(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zt||(Zt={}));function zh(r){return"storage/"+r}function Hb(){const r="An unknown error occurred, please check the error payload for server response.";return new Jt(Zt.UNKNOWN,r)}function fR(r){return new Jt(Zt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function dR(r){return new Jt(Zt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hR(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jt(Zt.UNAUTHENTICATED,r)}function mR(){return new Jt(Zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pR(r){return new Jt(Zt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function gR(){return new Jt(Zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yR(){return new Jt(Zt.CANCELED,"User canceled the upload/download.")}function vR(r){return new Jt(Zt.INVALID_URL,"Invalid URL '"+r+"'.")}function _R(r){return new Jt(Zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function bR(){return new Jt(Zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Bb+"' property when initializing the app?")}function ER(){return new Jt(Zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Am(r){return new Jt(Zt.INVALID_ARGUMENT,r)}function qb(){return new Jt(Zt.APP_DELETED,"The Firebase app was deleted.")}function SR(r){return new Jt(Zt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sl(r){throw new Jt(Zt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ii=class Bc{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=Bc.makeFromUrl(e,n)}catch{return new Bc(e,"")}if(a.path==="")return a;throw _R(e)}static makeFromUrl(e,n){let a=null;const o="([A-Za-z0-9.\\-_]+)";function u(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const d="(/(.*))?$",h=new RegExp("^gs://"+o+d,"i"),y={bucket:1,path:3};function g(re){re.path_=decodeURIComponent(re.path)}const b="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",D=new RegExp(`^https?://${E}/${b}/b/${o}/o${R}`,"i"),B={bucket:1,path:3},L=n===Ub?"(?:storage.googleapis.com|storage.cloud.google.com)":n,z="([^?#]*)",F=new RegExp(`^https?://${L}/${o}/${z}`,"i"),ne=[{regex:h,indices:y,postModify:u},{regex:D,indices:B,postModify:g},{regex:F,indices:{bucket:1,path:2},postModify:g}];for(let re=0;re<ne.length;re++){const V=ne[re],q=V.regex.exec(e);if(q){const N=q[V.indices.bucket];let O=q[V.indices.path];O||(O=""),a=new Bc(N,O),V.postModify(a);break}}if(a==null)throw vR(e);return a}};class wR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(r,e,n){let a=1,o=null,u=null,d=!1,h=0;function y(){return h===2}let g=!1;function b(...z){g||(g=!0,e.apply(null,z))}function E(z){o=setTimeout(()=>{o=null,r(D,y())},z)}function R(){u&&clearTimeout(u)}function D(z,...F){if(g){R();return}if(z){R(),b.call(null,z,...F);return}if(y()||d){R(),b.call(null,z,...F);return}a<64&&(a*=2);let ne;h===1?(h=2,ne=0):ne=(a+Math.random())*1e3,E(ne)}let B=!1;function L(z){B||(B=!0,R(),!g&&(o!==null?(z||(h=2),clearTimeout(o),E(0)):z||(h=1)))}return E(0),u=setTimeout(()=>{d=!0,L(!0)},n),L}function AR(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(r){return r!==void 0}function RR(r){return typeof r=="object"&&!Array.isArray(r)}function Fb(r){return typeof r=="string"||r instanceof String}function i_(r,e,n,a){if(a<e)throw Am(`Invalid value for '${r}'. Expected ${e} or greater.`);if(a>n)throw Am(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(r,e,n){let a=e;return n==null&&(a=`https://${e}`),`${n}://${a}/v0${r}`}function $b(r){const e=encodeURIComponent;let n="?";for(const a in r)if(r.hasOwnProperty(a)){const o=e(a)+"="+e(r[a]);n=n+o+"&"}return n=n.slice(0,-1),n}var Ba;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Ba||(Ba={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,a,o,u,d,h,y,g,b,E,R=!0){this.url_=e,this.method_=n,this.headers_=a,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=h,this.errorCallback_=y,this.timeout_=g,this.progressCallback_=b,this.connectionFactory_=E,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,B)=>{this.resolve_=D,this.reject_=B,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Dc(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=h=>{const y=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,g)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const h=u.getErrorCode()===Ba.NO_ERROR,y=u.getStatus();if(!h||CR(y,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Ba.ABORT;a(!1,new Dc(!1,null,b));return}const g=this.successCodes_.indexOf(y)!==-1;a(!0,new Dc(g,u))})},n=(a,o)=>{const u=this.resolve_,d=this.reject_,h=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(h,h.getResponse());xR(y)?u(y):u()}catch(y){d(y)}else if(h!==null){const y=Hb();y.serverResponse=h.getErrorText(),this.errorCallback_?d(this.errorCallback_(h,y)):d(y)}else if(o.canceled){const y=this.appDelete_?qb():yR();d(y)}else{const y=gR();d(y)}};this.canceled_?n(!1,new Dc(!1,null,!0)):this.backoffId_=TR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dc{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function OR(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function IR(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function DR(r,e){e&&(r["X-Firebase-GMPID"]=e)}function jR(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function MR(r,e,n,a,o,u,d=!0){const h=$b(r.urlParams),y=r.url+h,g=Object.assign({},r.headers);return DR(g,e),OR(g,n),IR(g,u),jR(g,a),new NR(y,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(r){let e;try{e=JSON.parse(r)}catch{return null}return RR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function PR(r,e){const n=e.split("/").filter(a=>a.length>0).join("/");return r.length===0?n:r+"/"+n}function Kb(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(r,e){return e}class Sn{constructor(e,n,a,o){this.server=e,this.local=n||e,this.writable=!!a,this.xform=o||VR}}let jc=null;function LR(r){return!Fb(r)||r.length<2?r:Kb(r)}function zR(){if(jc)return jc;const r=[];r.push(new Sn("bucket")),r.push(new Sn("generation")),r.push(new Sn("metageneration")),r.push(new Sn("name","fullPath",!0));function e(u,d){return LR(d)}const n=new Sn("name");n.xform=e,r.push(n);function a(u,d){return d!==void 0?Number(d):d}const o=new Sn("size");return o.xform=a,r.push(o),r.push(new Sn("timeCreated")),r.push(new Sn("updated")),r.push(new Sn("md5Hash",null,!0)),r.push(new Sn("cacheControl",null,!0)),r.push(new Sn("contentDisposition",null,!0)),r.push(new Sn("contentEncoding",null,!0)),r.push(new Sn("contentLanguage",null,!0)),r.push(new Sn("contentType",null,!0)),r.push(new Sn("metadata","customMetadata",!0)),jc=r,jc}function UR(r,e){function n(){const a=r.bucket,o=r.fullPath,u=new ii(a,o);return e._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function BR(r,e,n){const a={};a.type="file";const o=n.length;for(let u=0;u<o;u++){const d=n[u];a[d.local]=d.xform(a,e[d.server])}return UR(a,r),a}function HR(r,e,n){const a=Qb(e);return a===null?null:BR(r,a,n)}function qR(r,e,n,a){const o=Qb(e);if(o===null||!Fb(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(g=>{const b=r.bucket,E=r.fullPath,R="/b/"+d(b)+"/o/"+d(E),D=Gb(R,n,a),B=$b({alt:"media",token:g});return D+B})[0]}class FR{constructor(e,n,a,o){this.url=e,this.method=n,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(r){if(!r)throw Hb()}function $R(r,e){function n(a,o){const u=HR(r,o,e);return GR(u!==null),qR(u,o,r.host,r._protocol)}return n}function QR(r){function e(n,a){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=mR():o=hR():n.getStatus()===402?o=dR(r.bucket):n.getStatus()===403?o=pR(r.path):o=a,o.status=n.getStatus(),o.serverResponse=a.serverResponse,o}return e}function KR(r){const e=QR(r);function n(a,o){let u=e(a,o);return a.getStatus()===404&&(u=fR(r.path)),u.serverResponse=o.serverResponse,u}return n}function YR(r,e,n){const a=e.fullServerUrl(),o=Gb(a,r.host,r._protocol),u="GET",d=r.maxOperationRetryTime,h=new FR(o,u,$R(r,n),d);return h.errorHandler=KR(e),h}class XR{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ba.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ba.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ba.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,a,o){if(this.sent_)throw Sl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Sl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Sl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Sl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Sl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class WR extends XR{initXhr(){this.xhr_.responseType="text"}}function ZR(){return new WR}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this._service=e,n instanceof ii?this._location=n:this._location=ii.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qa(e,n)}get root(){const e=new ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Kb(this._location.path)}get storage(){return this._service}get parent(){const e=kR(this._location.path);if(e===null)return null;const n=new ii(this._location.bucket,e);return new Qa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw SR(e)}}function JR(r){r._throwIfRoot("getDownloadURL");const e=YR(r.storage,r._location,zR());return r.storage.makeRequestWithTokens(e,ZR).then(n=>{if(n===null)throw ER();return n})}function eC(r,e){const n=PR(r._location.path,e),a=new ii(r._location.bucket,n);return new Qa(r.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(r){return/^[A-Za-z]+:\/\//.test(r)}function nC(r,e){return new Qa(r,e)}function Yb(r,e){if(r instanceof Ap){const n=r;if(n._bucket==null)throw bR();const a=new Qa(n,n._bucket);return e!=null?Yb(a,e):a}else return e!==void 0?eC(r,e):r}function rC(r,e){if(e&&tC(e)){if(r instanceof Ap)return nC(r,e);throw Am("To use ref(service, url), the first argument must be a Storage instance.")}else return Yb(r,e)}function a_(r,e){const n=e==null?void 0:e[Bb];return n==null?null:ii.makeFromBucketSpec(n,r)}function iC(r,e,n,a={}){r.host=`${e}:${n}`,r._protocol="http";const{mockUserToken:o}=a;o&&(r._overrideAuthToken=typeof o=="string"?o:o1(o,r.app.options.projectId))}class Ap{constructor(e,n,a,o,u){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=Ub,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uR,this._maxUploadRetryTime=cR,this._requests=new Set,o!=null?this._bucket=ii.makeFromBucketSpec(o,this._host):this._bucket=a_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ii.makeFromBucketSpec(this._url,e):this._bucket=a_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){i_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){i_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qa(this,e)}_makeRequest(e,n,a,o,u=!0){if(this._deleted)return new wR(qb());{const d=MR(e,this._appId,a,o,n,this._firebaseVersion,u);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,o).getPromise()}}const s_="@firebase/storage",o_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="storage";function aC(r){return r=yn(r),JR(r)}function sC(r,e){return r=yn(r),rC(r,e)}function oC(r=Lm(),e){r=yn(r);const a=sf(r,Xb).getImmediate({identifier:e}),o=Pm("storage");return o&&lC(a,...o),a}function lC(r,e,n,a={}){iC(r,e,n,a)}function uC(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),a=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Ap(n,a,o,e,d1)}function cC(){Gs(new Ha(Xb,uC,"PUBLIC").setMultipleInstances(!0)),Ar(s_,o_,""),Ar(s_,o_,"esm2017")}cC();var fC="firebase",dC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(fC,dC,"app");class hC{constructor(){this.app=null,this.db=null,this.storage=null,this.isInitialized=!1,this.isNetworkEnabled=!1,this.initializationPromise=null,this.referenceCount=0}async initialize(e){if(this.initializationPromise){console.log("⏳ Firebase initialization already in progress, waiting...");try{return await this.initializationPromise,this.referenceCount++,console.log(`📊 Firebase references: ${this.referenceCount}`),{app:this.app,db:this.db,storage:this.storage}}catch{return console.error("⚠️ Previous initialization failed, retrying..."),this.initializationPromise=null,this.initialize(e)}}if(this.isInitialized&&this.app&&this.db)return this.referenceCount++,console.log(`📊 Firebase references: ${this.referenceCount}`),{app:this.app,db:this.db,storage:this.storage};this.initializationPromise=this._doInitialize(e);try{const n=await this.initializationPromise;return this.referenceCount++,console.log(`📊 Firebase references: ${this.referenceCount}`),n}catch(n){throw this.initializationPromise=null,n}}async initializeForPayment(){try{const{MENU_CONFIG:e}=await Pl(async()=>{const{MENU_CONFIG:n}=await Promise.resolve().then(()=>f_);return{MENU_CONFIG:n}},void 0);return await this.initialize(e.firebaseConfig)}catch(e){throw console.error("❌ Failed to initialize Firebase for payment page:",e),e}}async _doInitialize(e){try{if(console.log("🚀 Global Firebase Manager: Initializing..."),!e||!e.apiKey){console.error("❌ No Firebase configuration provided, using default config");const{MENU_CONFIG:a}=await Pl(async()=>{const{MENU_CONFIG:o}=await Promise.resolve().then(()=>f_);return{MENU_CONFIG:o}},void 0);if(e=a.firebaseConfig,!e||!e.apiKey)throw new Error("Firebase configuration is missing. Please check config.js")}console.log("✅ Firebase config verified:",{apiKey:e.apiKey?"***configured***":"missing",authDomain:e.authDomain,projectId:e.projectId}),await this._cleanupExistingApps(),await new Promise(a=>setTimeout(a,100));const n=`restaurant-cms-global-${Date.now()}`;return this.app=h1(e,n),this.db=Gx(this.app),this.storage=oC(this.app),await this._ensureNetworkConnection(),this.isInitialized=!0,console.log("✅ Global Firebase Manager: Initialized successfully"),{app:this.app,db:this.db,storage:this.storage}}catch(n){throw console.error("❌ Global Firebase Manager: Initialization failed:",n),this.isInitialized=!1,this.initializationPromise=null,n}}async _cleanupExistingApps(){try{const e=YT();e.length>0&&(console.log(`🧹 Cleaning up ${e.length} existing Firebase apps`),await Promise.all(e.map(n=>h0(n))))}catch(e){console.warn("⚠️ Warning during app cleanup:",e.message)}}async _ensureNetworkConnection(){if(!(this.isNetworkEnabled||!this.db))try{console.log("🌐 Enabling Firebase network..."),await Qx(this.db),this.isNetworkEnabled=!0,console.log("✅ Firebase network enabled")}catch(e){e.code==="failed-precondition"||e.message.includes("already enabled")||e.message.includes("INTERNAL ASSERTION FAILED")?(console.log("ℹ️ Network already enabled or in transition"),this.isNetworkEnabled=!0):(console.warn("⚠️ Network enable warning:",e.message),this.isNetworkEnabled=!0)}}async release(){this.referenceCount--,console.log(`📊 Firebase references: ${this.referenceCount}`),this.referenceCount<=0&&await this._cleanup()}async _cleanup(){try{if(console.log("🧹 Global Firebase Manager: Cleaning up..."),this.isInitialized=!1,this.db){try{console.log("📴 Disabling Firestore network..."),await Kx(this.db)}catch(e){e.message.includes("failed-precondition")||console.warn("⚠️ Network disable warning:",e.message)}try{console.log("🔚 Terminating Firestore..."),await Yx(this.db)}catch(e){e.message.includes("failed-precondition")||console.warn("⚠️ Database termination warning:",e.message)}}if(this.app)try{console.log("🗑️ Deleting Firebase app..."),await h0(this.app)}catch(e){console.warn("⚠️ App deletion warning:",e.message)}this.app=null,this.db=null,this.storage=null,this.isNetworkEnabled=!1,this.initializationPromise=null,this.referenceCount=0,console.log("✅ Global Firebase Manager: Cleanup completed")}catch(e){console.error("❌ Global Firebase Manager: Cleanup failed:",e),this.app=null,this.db=null,this.storage=null,this.isInitialized=!1,this.isNetworkEnabled=!1,this.initializationPromise=null,this.referenceCount=0}}getDatabase(){if(!this.isInitialized||!this.db)throw new Error("Firebase not initialized. Call initialize() first.");return this.db}getApp(){if(!this.isInitialized||!this.app)throw new Error("Firebase not initialized. Call initialize() first.");return this.app}getStorage(){if(!this.isInitialized||!this.storage)throw new Error("Firebase Storage not initialized. Call initialize() first.");return this.storage}isReady(){return this.isInitialized&&this.app&&this.db}}const It=new hC,l_=Object.freeze(Object.defineProperty({__proto__:null,default:It,globalFirebaseManager:It},Symbol.toStringTag,{value:"Module"}));class Hc{constructor(e,n){this.firebaseManager=e,this.businessId=n,e||console.warn("⚠️ OrderService created without Firebase manager")}async createOrder(e){try{if(!this.firebaseManager)throw new Error("Firebase manager is not initialized. Please check your Firebase configuration.");if(!e)throw new Error("Order data is required");if(!e.items||!Array.isArray(e.items)||e.items.length===0)throw new Error("Order must contain at least one item");if(!e.customer||!e.customer.name||!e.customer.phone)throw new Error("Customer name and phone are required");if(!e.total||e.total<=0)throw new Error("Order total must be greater than 0");console.log("🔄 Creating order with validated data:",e);const n=this.firebaseManager.getDatabase();if(!n)throw new Error("Firebase database not available. Connection may be offline.");const a=Bi(n,"orders"),o={businessId:this.businessId,items:e.items,customer:{name:e.customer.name,phone:e.customer.phone,email:e.customer.email||"",address:e.customer.address||""},total:e.total,currency:"ARS",status:"pending",paymentStatus:"pending",paymentMethod:e.paymentMethod||"mercadopago",mercadopagoId:null,createdAt:At.now(),updatedAt:At.now(),notes:e.notes||""},u=await lR(a,o);return console.log("✅ Order created with ID:",u.id),{orderId:u.id,...o}}catch(n){throw console.error("❌ Error creating order:",n.message),console.error("Order data:",e),console.error("Firebase manager available:",!!this.firebaseManager),n}}async updateOrderStatus(e,n,a=null){try{const o=this.firebaseManager.getDatabase(),u=gn(o,"orders",e),d={status:n,updatedAt:At.now()};a&&(d.paymentStatus=a),await Ef(u,d),console.log("✅ Order status updated:",e,n)}catch(o){throw console.error("❌ Error updating order status:",o),o}}async getOrder(e){try{const n=this.firebaseManager.getDatabase(),a=gn(n,"orders",e),o=await Xn(a);if(o.exists())return{orderId:o.id,...o.data()};throw new Error("Order not found")}catch(n){throw console.error("❌ Error getting order:",n),n}}}var Wb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},u_=za.createContext&&za.createContext(Wb),$i=function(){return $i=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},$i.apply(this,arguments)},mC=function(r,e){var n={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(n[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(r);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(r,a[o])&&(n[a[o]]=r[a[o]]);return n};function Zb(r){return r&&r.map(function(e,n){return za.createElement(e.tag,$i({key:n},e.attr),Zb(e.child))})}function Qe(r){return function(e){return za.createElement(pC,$i({attr:$i({},r.attr)},e),Zb(r.child))}}function pC(r){var e=function(n){var a=r.attr,o=r.size,u=r.title,d=mC(r,["attr","size","title"]),h=o||n.size||"1em",y;return n.className&&(y=n.className),r.className&&(y=(y?y+" ":"")+r.className),za.createElement("svg",$i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,d,{className:y,style:$i($i({color:r.color||n.color},n.style),r.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),u&&za.createElement("title",null,u),r.children)};return u_!==void 0?za.createElement(u_.Consumer,null,function(n){return e(n)}):e(Wb)}function gC(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"}}]})(r)}function Jb(r){return Qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"}}]})(r)}function yC(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(r)}function e2(r){return Qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"}}]})(r)}function Uh(r){return Qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}}]})(r)}function vC(r){return Qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(r)}function t2(r){return Qe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"}}]})(r)}function n2(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(r)}function c_(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(r)}function _C(r){return Qe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"}}]})(r)}function bC(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(r)}function r2(r){return Qe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"}}]})(r)}function i2(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(r)}function a2(r){return Qe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(r)}function EC(r){return Qe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(r)}function s2(r){return Qe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z"}}]})(r)}function SC(r){return Qe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M471.1 96C405 96 353.3 137.3 320 174.6 286.7 137.3 235 96 168.9 96 75.8 96 0 167.8 0 256s75.8 160 168.9 160c66.1 0 117.8-41.3 151.1-78.6 33.3 37.3 85 78.6 151.1 78.6 93.1 0 168.9-71.8 168.9-160S564.2 96 471.1 96zM168.9 320c-40.2 0-72.9-28.7-72.9-64s32.7-64 72.9-64c38.2 0 73.4 36.1 94 64-20.4 27.6-55.9 64-94 64zm302.2 0c-38.2 0-73.4-36.1-94-64 20.4-27.6 55.9-64 94-64 40.2 0 72.9 28.7 72.9 64s-32.7 64-72.9 64z"}}]})(r)}function o2(r){return Qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(r)}function xp(r){return Qe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(r)}function wC(r){return Qe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"}}]})(r)}function TC(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"}}]})(r)}function AC(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(r)}function xC(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(r)}function RC(r){return Qe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}]})(r)}function CC(r){return Qe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(r)}function NC(r){return Qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M312 320h136V56c0-13.3-10.7-24-24-24H24C10.7 32 0 42.7 0 56v400c0 13.3 10.7 24 24 24h264V344c0-13.2 10.8-24 24-24zm129 55l-98 98c-4.5 4.5-10.6 7-17 7h-6V352h128v6.1c0 6.3-2.5 12.4-7 16.9z"}}]})(r)}function eo(r){return Qe({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"}}]})(r)}function OC(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"}}]})(r)}function l2(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(r)}function xm(r){return Qe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(r)}function IC(r){return Qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}}]})(r)}function u2(r){return Qe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"}}]})(r)}function DC(r){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"}}]})(r)}function jC(r){return Qe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(r)}function Rp(r){return Qe({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"}}]})(r)}class Cp{constructor(e,n){this.firebaseConfig=e,this.businessId=n,this.app=null,this.db=null,this.storage=null,this.initialized=!1,this.orderService=null,this.firebaseManager=It}async initialize(){return await this._ensureInitialized()}async _ensureInitialized(){if(!this.initialized)try{const{app:e,db:n,storage:a}=await It.initialize(this.firebaseConfig);this.app=e,this.db=n,this.storage=a,this.initialized=!0,this.orderService=new Hc(It,this.businessId)}catch(e){throw new Error(`Failed to initialize MenuSDK: ${e.message}`)}}async _resolveImageUrl(e){if(!e)return null;try{if(e.startsWith("http://")||e.startsWith("https://"))return e;if(await this._ensureInitialized(),!this.storage)return console.error("Firebase Storage not initialized"),null;const n=sC(this.storage,e);return await aC(n)}catch(n){return console.error("Failed to resolve image URL:",{path:e,error:n.message}),null}}async getBusinessInfo(){try{await this._ensureInitialized(),console.log("🔍 Fetching business info for:",this.businessId);const e=gn(this.db,"businesses",this.businessId),n=await Xn(e);if(n.exists())return console.log("✅ Business info loaded from businesses collection"),n.data();console.log("📍 Trying restaurants collection for compatibility...");const a=gn(this.db,"restaurants",this.businessId),o=await Xn(a);if(o.exists()){console.log("✅ Business info loaded from restaurants collection (compatibilidad)");const u=o.data();return{...u,businessType:u.businessType||"restaurant"}}throw new Error("Business not found in either businesses or restaurants collection")}catch(e){throw console.error("❌ Error getting business info:",e),e}}async getRestaurantInfo(){try{await this._ensureInitialized(),console.log("🔍 Fetching business info for:",this.businessId);try{return await this.getBusinessInfo()}catch{const n=gn(this.db,"restaurants",this.businessId),a=await Xn(n);if(!a.exists())throw new Error("Restaurant not found");return console.log("✅ Restaurant info loaded successfully"),a.data()}}catch(e){throw console.error("❌ Error getting restaurant info:",e),e.code==="unavailable"?new Error("Firebase service is temporarily unavailable. Please try again later."):e.code==="permission-denied"?new Error("Access denied. Please check your Firebase security rules."):e}}async getFullMenu(){try{await this._ensureInitialized(),console.log("[Menu] Fetching full menu for business:",this.businessId);let e=Bi(this.db,"businesses",this.businessId,"menu"),n=ja(e,Ma("order","asc")),a=await ka(n);a.empty&&(console.log("📍 Trying restaurants collection for menu..."),e=Bi(this.db,"restaurants",this.businessId,"menu"),n=ja(e,Ma("order","asc")),a=await ka(n)),console.log("📂 Found",a.size,"menu categories");const o=[];for(const u of a.docs){const d={id:u.id,...u.data(),items:[]},h=Bi(u.ref,"items"),y=ja(h,Ma("name","asc")),g=await ka(y);console.log(`📋 Category "${d.name}": ${g.size} items`);for(const b of g.docs){const E={id:b.id,...b.data()};let R=E.imageUrl||E.image;if(R)try{const D=await this._resolveImageUrl(R);E.image=D,E.imageUrl=D}catch(D){console.warn(`⚠️ Could not resolve image for item ${E.name}:`,D.message),E.image=null,E.imageUrl=null}else E.image=null,E.imageUrl=null;E.isHidden||d.items.push(E)}d.items.length>0&&o.push(d)}return console.log("✅ Full menu loaded successfully:",o.length,"categories"),o}catch(e){throw console.error("❌ Error getting full menu:",e),e.code==="unavailable"?new Error("Firebase service is temporarily unavailable. Please try again later."):e.code==="permission-denied"?new Error("Access denied. Please check your Firebase security rules."):e}}async getFullMenuWithHidden(){try{await this._ensureInitialized(),console.log("🍽️ Fetching full menu with hidden items for business:",this.businessId);let e=Bi(this.db,"businesses",this.businessId,"menu"),n=ja(e,Ma("order","asc")),a=await ka(n);a.empty&&(console.log("📍 Trying restaurants collection for menu..."),e=Bi(this.db,"restaurants",this.businessId,"menu"),n=ja(e,Ma("order","asc")),a=await ka(n)),console.log("📂 Found",a.size,"menu categories");const o=[];for(const u of a.docs){const d={id:u.id,...u.data(),items:[]},h=Bi(u.ref,"items"),y=ja(h,Ma("name","asc")),g=await ka(y);console.log(`📋 Category "${d.name}": ${g.size} items (including hidden)`);for(const b of g.docs){const E={id:b.id,...b.data()};let R=E.imageUrl||E.image;if(R)try{const D=await this._resolveImageUrl(R);E.image=D,E.imageUrl=D}catch(D){console.warn(`⚠️ Could not resolve image for item ${E.name}:`,D.message),E.image=null,E.imageUrl=null}else E.image=null,E.imageUrl=null;d.items.push(E)}o.push(d)}return console.log("✅ Full menu with hidden items loaded successfully:",o.length,"categories"),o}catch(e){throw console.error("❌ Error getting full menu with hidden items:",e),e.code==="unavailable"?new Error("Firebase service is temporarily unavailable. Please try again later."):e.code==="permission-denied"?new Error("Access denied. Please check your Firebase security rules."):e}}async getCategory(e){try{await this._ensureInitialized();let n=gn(this.db,"businesses",this.businessId,"menu",e),a=await Xn(n);if(a.exists()||(n=gn(this.db,"restaurants",this.businessId,"menu",e),a=await Xn(n)),!a.exists())throw new Error("Category not found");const o={id:a.id,...a.data(),items:[]},u=Bi(a.ref,"items"),d=ja(u,Ma("name","asc")),h=await ka(d);for(const y of h.docs){const g={id:y.id,...y.data()};let b=g.imageUrl||g.image;if(b)try{const E=await this._resolveImageUrl(b);g.image=E,g.imageUrl=E}catch(E){console.warn(`⚠️ Could not resolve image for item ${g.name}:`,E.message),g.image=null,g.imageUrl=null}o.items.push(g)}return o}catch(n){throw console.error("Error getting category:",n),n}}async searchItems(e){try{const n=await this.getFullMenu(),a=[];n.forEach(u=>{u.items.forEach(d=>{a.push({...d,categoryName:u.name,categoryId:u.id})})});const o=e.toLowerCase();return a.filter(u=>u.name.toLowerCase().includes(o)||u.description&&u.description.toLowerCase().includes(o))}catch(n){throw console.error("Error searching items:",n),n}}async createOrder(e){if(!this.orderService)throw new Error("SDK not initialized. Call initialize() first.");return await this.orderService.createOrder(e)}async updateOrderStatus(e,n,a=null){if(!this.orderService)throw new Error("SDK not initialized. Call initialize() first.");return await this.orderService.updateOrderStatus(e,n,a)}async getOrder(e){if(!this.orderService)throw new Error("SDK not initialized. Call initialize() first.");return await this.orderService.getOrder(e)}async getFeaturedItems(){try{const e=await this.getFullMenu(),n=[];return e.forEach(a=>{const o=a.items.filter(u=>u.isFeatured&&u.isAvailable!==!1&&!u.isHidden);n.push(...o.map(u=>({...u,categoryName:a.name,categoryId:a.id})))}),n}catch(e){throw console.error("Error getting featured items:",e),e}}async getAvailableItems(){try{const e=await this.getFullMenu(),n=[];return e.forEach(a=>{const o=a.items.filter(u=>u.trackStock?u.stock>0&&u.isAvailable!==!1&&!u.isHidden:u.isAvailable!==!1&&!u.isHidden);n.push(...o.map(u=>({...u,categoryName:a.name,categoryId:a.id})))}),n}catch(e){throw console.error("Error getting available items:",e),e}}getStockStatus(e){return e.trackStock?e.isHidden?{status:"hidden",text:"Oculto",icon:"👁️‍🗨️",cssClass:"stock-hidden"}:e.isAvailable===!1?{status:"unavailable",text:"No disponible",icon:"🚫",cssClass:"stock-unavailable"}:e.stock<=0?{status:"out-of-stock",text:"Sin stock",icon:"❌",cssClass:"stock-empty"}:e.stock<=(e.minStock||5)?{status:"low-stock",text:`Stock bajo (${e.stock})`,icon:"⚠️",cssClass:"stock-low"}:{status:"in-stock",text:`En stock (${e.stock})`,icon:"✅",cssClass:"stock-normal"}:{status:"not-tracked",text:"Sin control de stock",icon:"📦",cssClass:"stock-normal"}}}function Np(r,e){return new Cp(r,e)}const MC=Object.freeze(Object.defineProperty({__proto__:null,MenuSDK:Cp,createMenuSDK:Np},Symbol.toStringTag,{value:"Module"})),Wt={firebaseConfig:{apiKey:"AIzaSyDHi_a1trI35goPoKcNPUDBMOSLKjvZKyc",authDomain:"cms-menu-7b4a4.firebaseapp.com",projectId:"cms-menu-7b4a4",storageBucket:"cms-menu-7b4a4.firebasestorage.app",messagingSenderId:"509736809578",appId:"1:509736809578:web:15471af092f3b46392c613",measurementId:"G-X4F9XDEL13"},businessId:"OANNHilb2kZOVQKx7fb80hPrAL92",itemVisibility:{hideInvisibleItems:!0,adminCanSeeHidden:!0},mercadoPago:{publicKey:"APP_USR-aff124d3-9db8-432f-b97e-7cfd30fca245",currency:"ARS",enabled:!0},baseUrl:"https://juanmaacampos.github.io/shop_template",backendUrl:"https://us-central1-cms-menu-7b4a4.cloudfunctions.net",backUrls:{success:"https://juanmaacampos.github.io/shop_template/#/payment/success",pending:"https://juanmaacampos.github.io/shop_template/#/payment/pending",failure:"https://juanmaacampos.github.io/shop_template/#/payment/failure"},testing:{enabled:!1,showTestingPanel:!1,mockData:!1},templateType:"store",locale:"es-AR",timezone:"America/Argentina/Buenos_Aires"},Op={businessName:"Mi Negocio",menuName:"catálogo",menuNameCapitalized:"Nuestro Catálogo",items:"productos",itemsCapitalized:"Productos",addToCart:"Agregar al Carrito",orderSummary:"Carrito de Compras",categoriesOfMenu:"Categorías de Productos",featuredProducts:"Productos Destacados",allProducts:"Todos los Productos",serviceOptions:{delivery:"Envío a Domicilio",pickup:"Retiro en Local",shipping:"Envío Nacional",dineIn:"Para Comer Aquí",takeaway:"Para Llevar"}},Ml={store:{businessName:"Mi Tienda",menuName:"catálogo",menuNameCapitalized:"Nuestro Catálogo",items:"productos",itemsCapitalized:"Productos",addToCart:"Agregar al Carrito",orderSummary:"Carrito de Compras",categoriesOfMenu:"Categorías de Productos",featuredProducts:"Productos Destacados",allProducts:"Todos los Productos",serviceOptions:{delivery:"Envío a Domicilio",pickup:"Retiro en Tienda",shipping:"Envío Nacional"}}};function c2(r="store"){Ml[r]?(Object.assign(Op,Ml[r]),console.log(`✅ Aplicada configuración para: ${r}`)):(console.warn(`⚠️ Tipo de negocio no reconocido: ${r}`),console.log(`📝 Tipos disponibles: ${Object.keys(Ml).join(", ")}`))}Wt.templateType&&Ml[Wt.templateType]&&c2(Wt.templateType);const f_=Object.freeze(Object.defineProperty({__proto__:null,BUSINESS_TEMPLATES:Ml,MENU_CONFIG:Wt,STORE_TERMINOLOGY:Op,applyBusinessTemplate:c2},Symbol.toStringTag,{value:"Module"}));function kC({featuredItems:r=[],loading:e}){const[n,a]=U.useState([]),[o,u]=U.useState(null),[d,h]=U.useState(!1),y=U.useRef(null),g=U.useRef(),[b,E]=U.useState(0),R=U.useRef(null),[D,B]=U.useState(220);U.useEffect(()=>{R.current&&B(R.current.offsetHeight)},[n]),U.useEffect(()=>{if(!r||r.length===0)return;const re=r.filter(N=>N.isFeatured),V={};re.forEach(N=>{V[N.categoryId]||(V[N.categoryId]=[]),V[N.categoryId].push(N)});const q=Object.values(V).map(N=>N[Math.floor(Math.random()*N.length)]);a(q)},[r]);const[L,z]=U.useState(0);U.useEffect(()=>{function re(){y.current&&z(y.current.offsetHeight)}return re(),window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[]),U.useEffect(()=>{if(n.length===0||D===0)return;let re=null;const V=D*.7;let q=!0;function N(O){if(!q)return;re||(re=O);const A=(O-re)/1e3;re=O,E(S=>{let j=d?S:S-V*A;const k=D*n.length*2;return j<=-k&&(j=0),j}),g.current=requestAnimationFrame(N)}return g.current=requestAnimationFrame(N),()=>{q=!1,cancelAnimationFrame(g.current)}},[d,n,D]);const F=re=>{h(!0),u(re)},Y=()=>{h(!1),u(null)};if(e)return p.jsx("div",{className:"vertical-carousel loading",children:"Cargando..."});if(!n.length)return p.jsx("div",{className:"vertical-carousel empty",children:"Sin productos destacados"});const ne=[...n,...n];return p.jsx("div",{className:"vertical-carousel",ref:y,style:{height:"100%",minHeight:400,maxHeight:"100vh",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden"},children:p.jsx("div",{className:"vertical-carousel-inner",style:{height:ne.length*D,transform:`translateY(${b%(n.length*D)}px)`,willChange:"transform",transition:d?"transform 0.5s cubic-bezier(0.4,0,0.2,1)":"none"},children:ne.map((re,V)=>p.jsxs("div",{ref:V===0?R:null,className:`carousel-item${o===V%n.length?" hovered":""}`,style:{height:320,width:320,minWidth:320,minHeight:320,maxWidth:420,maxHeight:420,margin:"0 auto 40px auto",position:"relative",cursor:"pointer",borderRadius:32,overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.13)",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:()=>F(V%n.length),onMouseLeave:Y,children:[p.jsx("img",{src:re.imageUrl||re.image||"/default-product.png",alt:re.name,className:"carousel-img",style:{width:"100%",height:"100%",aspectRatio:"1/1",objectFit:"cover",borderRadius:32,boxShadow:"0 2px 12px rgba(0,0,0,0.10)",transition:"filter 0.3s"}}),o===V%n.length&&p.jsx("div",{className:"carousel-overlay",children:p.jsxs("div",{className:"carousel-info",children:[p.jsx("span",{className:"carousel-name",children:re.name}),p.jsxs("span",{className:"carousel-price",children:["$",parseFloat(re.price).toFixed(2)]})]})})]},V))})})}function PC({featuredItems:r=[],loading:e}){const[n,a]=U.useState([]),[o,u]=U.useState(null),[d,h]=U.useState(!1),y=U.useRef(null),g=U.useRef(),[b,E]=U.useState(0),R=U.useRef(null),[D,B]=U.useState(180);U.useEffect(()=>{R.current&&B(R.current.offsetWidth)},[n]),U.useEffect(()=>{if(!r||r.length===0)return;const Y=r.filter(V=>V.isFeatured),ne={};Y.forEach(V=>{ne[V.categoryId]||(ne[V.categoryId]=[]),ne[V.categoryId].push(V)});const re=Object.values(ne).map(V=>V[Math.floor(Math.random()*V.length)]);a(re)},[r]),U.useEffect(()=>{if(n.length===0||D===0)return;let Y=null;const ne=D*.7;let re=!0;function V(q){if(!re)return;Y||(Y=q);const N=(q-Y)/1e3;Y=q,E(O=>{let A=d?O:O+ne*N;const S=D*n.length*2;return A>=S&&(A=0),A}),g.current=requestAnimationFrame(V)}return g.current=requestAnimationFrame(V),()=>{re=!1,cancelAnimationFrame(g.current)}},[d,n,D]);const L=Y=>{h(!0),u(Y)},z=()=>{h(!1),u(null)};if(e)return p.jsx("div",{className:"horizontal-carousel loading",children:"Cargando..."});if(!n.length)return p.jsx("div",{className:"horizontal-carousel empty",children:"Sin productos destacados"});const F=[...n,...n];return p.jsx("div",{className:"horizontal-carousel",ref:y,style:{width:"100%",minHeight:150,maxWidth:"100vw",overflow:"hidden",position:"relative",display:"flex",alignItems:"center",margin:"1.5rem 0 0 0"},children:p.jsx("div",{className:"horizontal-carousel-inner",style:{display:"flex",flexDirection:"row",height:"100%",transform:`translateX(-${b%(n.length*D)}px)`,willChange:"transform",transition:d?"transform 0.5s cubic-bezier(0.4,0,0.2,1)":"none"},children:F.map((Y,ne)=>p.jsxs("div",{ref:ne===0?R:null,className:`carousel-item${o===ne%n.length?" hovered":""}`,style:{width:180,minWidth:180,maxWidth:220,height:180,margin:"0 12px",position:"relative",cursor:"pointer",borderRadius:16,overflow:"hidden",boxShadow:"0 2px 12px rgba(0,0,0,0.10)",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:()=>L(ne%n.length),onMouseLeave:z,children:[p.jsx("img",{src:Y.imageUrl||Y.image||"/default-product.png",alt:Y.name,className:"carousel-img",style:{width:"100%",height:"100%",aspectRatio:"1/1",objectFit:"cover",borderRadius:16,boxShadow:"0 2px 12px rgba(0,0,0,0.10)",transition:"filter 0.3s"}}),o===ne%n.length&&p.jsx("div",{className:"carousel-overlay",children:p.jsxs("div",{className:"carousel-info",children:[p.jsx("span",{className:"carousel-name",children:Y.name}),p.jsxs("span",{className:"carousel-price",children:["$",parseFloat(Y.price).toFixed(2)]})]})})]},ne))})})}function VC({featuredItems:r=[],loading:e}){const[n,a]=U.useState([]),[o,u]=U.useState(null),[d,h]=U.useState(!1),y=U.useRef(null),g=U.useRef(),[b,E]=U.useState(0),R=U.useRef(null),[D,B]=U.useState(220);U.useEffect(()=>{R.current&&B(R.current.offsetHeight)},[n]),U.useEffect(()=>{if(!r||r.length===0)return;const re=r.filter(N=>N.isFeatured),V={};re.forEach(N=>{V[N.categoryId]||(V[N.categoryId]=[]),V[N.categoryId].push(N)});const q=Object.values(V).map(N=>N[Math.floor(Math.random()*N.length)]);a(q)},[r]);const[L,z]=U.useState(0);U.useEffect(()=>{function re(){y.current&&z(y.current.offsetHeight)}return re(),window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[]),U.useEffect(()=>{if(n.length===0||D===0)return;let re=null;const V=D*.7;let q=!0;function N(O){if(!q)return;re||(re=O);const A=(O-re)/1e3;re=O,E(S=>{let j=d?S:S+V*A;const k=D*n.length*2;return j>=k&&(j=0),j}),g.current=requestAnimationFrame(N)}return g.current=requestAnimationFrame(N),()=>{q=!1,cancelAnimationFrame(g.current)}},[d,n,D]);const F=re=>{h(!0),u(re)},Y=()=>{h(!1),u(null)};if(e)return p.jsx("div",{className:"vertical-carousel loading",children:"Cargando..."});if(!n.length)return p.jsx("div",{className:"vertical-carousel empty",children:"Sin productos destacados"});const ne=[...n,...n];return p.jsx("div",{className:"vertical-carousel",ref:y,style:{height:"100%",minHeight:400,maxHeight:"100vh",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden"},children:p.jsx("div",{className:"vertical-carousel-inner",style:{height:ne.length*D,transform:`translateY(-${b%(n.length*D)}px)`,willChange:"transform",transition:d?"transform 0.5s cubic-bezier(0.4,0,0.2,1)":"none"},children:ne.map((re,V)=>p.jsxs("div",{ref:V===0?R:null,className:`carousel-item${o===V%n.length?" hovered":""}`,style:{height:320,width:320,minWidth:320,minHeight:320,maxWidth:420,maxHeight:420,margin:"0 auto 40px auto",position:"relative",cursor:"pointer",borderRadius:32,overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.13)",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:()=>F(V%n.length),onMouseLeave:Y,children:[p.jsx("img",{src:re.imageUrl||re.image||"/default-product.png",alt:re.name,className:"carousel-img",style:{width:"100%",height:"100%",aspectRatio:"1/1",objectFit:"cover",borderRadius:32,boxShadow:"0 2px 12px rgba(0,0,0,0.10)",transition:"filter 0.3s"}}),o===V%n.length&&p.jsx("div",{className:"carousel-overlay",children:p.jsxs("div",{className:"carousel-info",children:[p.jsx("span",{className:"carousel-name",children:re.name}),p.jsxs("span",{className:"carousel-price",children:["$",parseFloat(re.price).toFixed(2)]})]})})]},V))})})}const LC=()=>{const r=U.useRef(null),e=U.useRef(null),n=U.useRef(null),a=U.useRef(null),o=U.useRef(null),[u,d]=U.useState(!1),[h,y]=U.useState(null);U.useEffect(()=>{const R=new Cp(Wt.firebaseConfig,Wt.businessId);R.initialize().then(()=>{y(R)}).catch(D=>{console.error("Error initializing MenuSDK:",D)})},[]);const{featuredItems:g,loading:b}=Iw(h),E=()=>{document.getElementById("menu").scrollIntoView({behavior:"smooth"})};return U.useEffect(()=>{const R=()=>d(window.innerWidth<=768);return R(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),p.jsxs("header",{ref:r,className:"header",id:"home",children:[p.jsx("div",{className:"header-bg"}),p.jsx("div",{className:"container",children:p.jsxs("div",{className:"header-content",children:[p.jsxs("div",{className:"header-left",children:[p.jsxs("h1",{ref:e,className:"header-title",children:["DIGITAL",p.jsx("br",{}),"STORE"]}),p.jsx("p",{ref:n,className:"header-subtitle",children:"Tu Tienda Online"}),p.jsx("button",{ref:a,className:"btn-primary header-cta",onClick:E,children:"Ver Productos"}),u&&p.jsx(PC,{featuredItems:g,loading:b})]}),!u&&p.jsxs("div",{ref:o,className:"header-right",style:{display:"flex",gap:"2rem",justifyContent:"center"},children:[p.jsx(VC,{featuredItems:g,loading:b}),p.jsx(kC,{featuredItems:g,loading:b})]})]})})]})},zC=()=>p.jsx("footer",{className:"footer",children:p.jsxs("div",{className:"container",children:[p.jsxs("div",{className:"footer-content",children:[p.jsxs("div",{className:"footer-brand",children:[p.jsx("h3",{children:"DIGITAL STORE"}),p.jsx("p",{children:"Tu propia tienda digital :)"})]}),p.jsxs("div",{className:"footer-social",children:[p.jsx("h4",{children:"Seguinos:"}),p.jsxs("div",{className:"social-links",children:[p.jsx("a",{href:"#",className:"social-link",children:p.jsx(Jb,{})}),p.jsx("a",{href:"#",className:"social-link",children:p.jsx(gC,{})}),p.jsx("a",{href:"#",className:"social-link",children:p.jsx(yC,{})}),p.jsx("a",{href:"#",className:"social-link",children:p.jsx(e2,{})})]})]}),p.jsxs("div",{className:"footer-contact",children:[p.jsx("h4",{children:"Contact"}),p.jsx("p",{children:"123 Main Street"}),p.jsx("p",{children:"+1 (555) 123-4567"}),p.jsx("p",{children:"info@yourrestaurant.com"})]})]}),p.jsx("div",{className:"footer-bottom",children:p.jsxs("p",{children:["© 2025 DIGITAL STORE. Plantilla creada por ",p.jsx("a",{href:"https://jmcdev.site",target:"_blank",rel:"noopener noreferrer",children:"JMCDEV"}),"."]})})]})});function UC(r=[],e,n=!0,a=null){const[o,u]=U.useState({}),[d,h]=U.useState(!1),[y,g]=U.useState(null),[b,E]=U.useState(!1),[R,D]=U.useState(null),B=U.useRef(new Map);return U.useEffect(()=>{if(!n||!e||!r.length||!a){B.current.forEach(z=>z()),B.current.clear(),E(!1);return}return h(!0),g(null),(async()=>{try{console.log("📦 Setting up real-time stock listeners for products:",r),B.current.forEach(z=>z()),B.current.clear();for(const z of r){const{id:F,categoryId:Y}=z;if(!F||!Y){console.warn("⚠️ Product missing ID or categoryId:",z);continue}const ne=gn(a,"businesses",e,"menu",Y,"items",F),re=Vb(ne,V=>{if(V.exists()){const q=V.data();console.log(`📦 Stock update for ${F}:`,{stock:q.stock,isAvailable:q.isAvailable,trackStock:q.trackStock}),u(N=>({...N,[F]:{id:F,categoryId:Y,stock:q.stock||0,isAvailable:q.isAvailable!==!1,trackStock:q.trackStock||!1,name:q.name,price:q.price,lastUpdated:new Date}})),D(new Date)}else u(q=>{const N={...q};return delete N[F],N})},V=>{console.error(`❌ Stock listener error for product ${F}:`,V),g(V.message)});B.current.set(F,re)}E(!0),h(!1)}catch(z){console.error("❌ Error setting up stock listeners:",z),g(z.message),h(!1),E(!1)}})(),()=>{console.log("🧹 Cleaning up stock listeners"),B.current.forEach(z=>z()),B.current.clear(),E(!1)}},[r.map(L=>`${L.id}-${L.categoryId}`).join(","),e,n,a]),{stockData:o,loading:d,error:y,isRealTimeActive:b,lastUpdated:R,getProductStock:L=>{var z;return((z=o[L])==null?void 0:z.stock)||0},isProductAvailable:L=>{var z;return((z=o[L])==null?void 0:z.isAvailable)!==!1},isStockTracked:L=>{var z;return((z=o[L])==null?void 0:z.trackStock)||!1},getStockStatus:L=>{const z=o[L];return z?z.trackStock?z.isAvailable?z.stock<=0?"out-of-stock":z.stock<=5?"low-stock":"in-stock":"unavailable":"not-tracked":"unknown"}}}const BC=({item:r,onAddToCart:e,showImage:n=!0,showPrice:a=!0,showDescription:o=!0,terminology:u={},businessId:d=null,categoryId:h=null,enableRealTimeStock:y=!1,db:g=null})=>{const b=U.useRef(null),E=Kl(),R=ne=>{ne.target.closest(".product-card-footer button")||E(`/producto/${r.id}`)},D=r.imageUrl||r.image;r.stock;const B=r.isAvailable!==!1,L=()=>r.isHidden||r.isAvailable===!1?!1:r.trackStock?r.stock>0:!0,z=()=>r.isHidden||!L()?"product-card-button disabled":r.trackStock&&r.stock<=(r.minStock||5)?"product-card-button warning":"product-card-button",F=()=>r.isHidden||r.isAvailable===!1?"No disponible":r.trackStock&&r.stock<=0?"Sin stock":r.trackStock&&r.stock<=5?`Agregar (quedan ${r.stock})`:u.addToCart||"Agregar al Carrito",Y=()=>r.trackStock?r.stock<=0||r.isAvailable===!1?p.jsx("span",{className:"stock-badge out-of-stock",children:"Sin Stock"}):r.stock<=5?p.jsx("span",{className:"stock-badge low-stock",children:"Poco Stock"}):p.jsx("span",{className:"stock-badge in-stock",children:"En Stock"}):B&&!r.isHidden?p.jsx("span",{className:"stock-badge available",children:"En Stock"}):null;return p.jsxs("div",{ref:b,className:`product-card ${r.isHidden?"hidden":""}`,onClick:R,style:{cursor:"pointer"},children:[n&&p.jsxs("div",{className:"product-card-image",children:[D?p.jsx("img",{src:D,alt:r.name}):p.jsx("div",{className:"product-card-placeholder",children:p.jsx(Rp,{})}),Y()]}),p.jsxs("div",{className:"product-card-content",children:[p.jsxs("div",{className:"product-card-header",children:[p.jsx("h3",{className:"product-card-title",children:r.name}),a&&p.jsxs("span",{className:"product-card-price",children:["$",r.price]})]}),o&&r.description&&p.jsx("p",{className:"product-card-description",children:r.description}),p.jsx("div",{className:"product-card-footer",children:e&&p.jsx("button",{className:z(),onClick:()=>!r.isHidden&&L()&&e(r),disabled:r.isHidden||!L(),children:F()})})]})]})};function HC({menu:r,onAddToCart:e,loading:n,error:a,showImages:o=!0,showPrices:u=!0,showDescription:d=!0,terminology:h={},businessId:y=null,enableRealTimeStock:g=!1,db:b=null}){return n?p.jsxs("div",{className:"menu-loading",children:["🍽️ Cargando ",h.menuName||"menú"," delicioso..."]}):a?p.jsxs("div",{className:"menu-error",children:["❌ Error: ",a]}):!r||r.length===0?p.jsxs("div",{className:"menu-empty",children:["📋 No hay ",h.items||"platos"," disponibles"]}):p.jsx("div",{className:"menu-display",children:r.map(E=>p.jsxs("div",{className:"menu-category",id:`category-${E.id}`,children:[p.jsx("h2",{className:"category-title",children:E.name}),E.description&&p.jsx("p",{className:"category-description",children:E.description}),p.jsx("div",{className:"menu-items",children:E.items.map(R=>p.jsx(qC,{item:R,onAddToCart:e,showImage:o,showPrice:u,showDescription:d,terminology:h,businessId:y,categoryId:E.id,enableRealTimeStock:g,db:b},R.id))})]},E.id))})}function qC({item:r,onAddToCart:e,showImage:n=!0,showPrice:a=!0,showDescription:o=!0,terminology:u={},businessId:d=null,categoryId:h=null,enableRealTimeStock:y=!1,db:g=null}){(z=>z.images&&Array.isArray(z.images)&&z.images.length>0?z.images:z.image?[{url:z.image}]:[])(r);const E=y&&d&&h&&r.trackStock&&g,R=E?[{id:r.id,categoryId:h}]:[],{getProductStock:D,isProductAvailable:B}=UC(R,d,E,g),L={...r,stock:E?D(r.id):r.stock||0,isAvailable:E?B(r.id):r.isAvailable!==!1};return p.jsx(BC,{item:L,onAddToCart:e,showImage:n,showPrice:a,showDescription:o,terminology:u,businessId:d,categoryId:h,enableRealTimeStock:y,db:g})}class FC{constructor(){this.instances=new Map}getInstance(e,n){const a=`${n}-${e.projectId}`;if(this.instances.has(a))console.log("♻️ Reusing existing MenuSDK instance for:",n);else{console.log("🏗️ Creating new MenuSDK instance for:",n);const o=Np(e,n);this.instances.set(a,o)}return this.instances.get(a)}clearInstance(e,n){const a=`${n}-${e.projectId}`;this.instances.has(a)&&(console.log("🗑️ Clearing MenuSDK instance for:",n),this.instances.delete(a))}clearAll(){console.log("🧹 Clearing all MenuSDK instances"),this.instances.clear()}}const GC=new FC;var Bh={},Hh={},wl={},qh={},d_;function $C(){return d_||(d_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};r.default=e}(qh)),qh}var Fh,h_;function QC(){if(h_)return Fh;h_=1;var r="Expected a function",e=NaN,n="[object Symbol]",a=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt,y=typeof xc=="object"&&xc&&xc.Object===Object&&xc,g=typeof self=="object"&&self&&self.Object===Object&&self,b=y||g||Function("return this")(),E=Object.prototype,R=E.toString,D=Math.max,B=Math.min,L=function(){return b.Date.now()};function z(V,q,N){var O,A,S,j,k,C,Z=0,me=!1,$=!1,w=!0;if(typeof V!="function")throw new TypeError(r);q=re(q)||0,F(N)&&(me=!!N.leading,$="maxWait"in N,S=$?D(re(N.maxWait)||0,q):S,w="trailing"in N?!!N.trailing:w);function ge(ye){var Se=O,Oe=A;return O=A=void 0,Z=ye,j=V.apply(Oe,Se),j}function G(ye){return Z=ye,k=setTimeout(Q,q),me?ge(ye):j}function _(ye){var Se=ye-C,Oe=ye-Z,ke=q-Se;return $?B(ke,S-Oe):ke}function M(ye){var Se=ye-C,Oe=ye-Z;return C===void 0||Se>=q||Se<0||$&&Oe>=S}function Q(){var ye=L();if(M(ye))return W(ye);k=setTimeout(Q,_(ye))}function W(ye){return k=void 0,w&&O?ge(ye):(O=A=void 0,j)}function ae(){k!==void 0&&clearTimeout(k),Z=0,O=C=A=k=void 0}function ce(){return k===void 0?j:W(L())}function le(){var ye=L(),Se=M(ye);if(O=arguments,A=this,C=ye,Se){if(k===void 0)return G(C);if($)return k=setTimeout(Q,q),ge(C)}return k===void 0&&(k=setTimeout(Q,q)),j}return le.cancel=ae,le.flush=ce,le}function F(V){var q=typeof V;return!!V&&(q=="object"||q=="function")}function Y(V){return!!V&&typeof V=="object"}function ne(V){return typeof V=="symbol"||Y(V)&&R.call(V)==n}function re(V){if(typeof V=="number")return V;if(ne(V))return e;if(F(V)){var q=typeof V.valueOf=="function"?V.valueOf():V;V=F(q)?q+"":q}if(typeof V!="string")return V===0?V:+V;V=V.replace(a,"");var N=u.test(V);return N||d.test(V)?h(V.slice(2),N?2:8):o.test(V)?e:+V}return Fh=z,Fh}var Gh={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var m_;function Sf(){return m_||(m_=1,function(r){(function(){var e={}.hasOwnProperty;function n(){for(var u="",d=0;d<arguments.length;d++){var h=arguments[d];h&&(u=o(u,a(h)))}return u}function a(u){if(typeof u=="string"||typeof u=="number")return u;if(typeof u!="object")return"";if(Array.isArray(u))return n.apply(null,u);if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]"))return u.toString();var d="";for(var h in u)e.call(u,h)&&u[h]&&(d=o(d,h));return d}function o(u,d){return d?u?u+" "+d:u+d:u}r.exports?(n.default=n,r.exports=n):window.classNames=n})()}(Gh)),Gh.exports}var _e={},$h={},p_;function f2(){return p_||(p_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=n(Or());function n(o){return o&&o.__esModule?o:{default:o}}var a={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(u){return e.default.createElement("ul",{style:{display:"block"}},u)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(u){return e.default.createElement("button",null,u+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null,unslick:!1};r.default=a}($h)),$h}var g_;function ru(){if(g_)return _e;g_=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.checkSpecKeys=_e.checkNavigable=_e.changeSlide=_e.canUseDOM=_e.canGoNext=void 0,_e.clamp=g,_e.extractObject=void 0,_e.filterSettings=ge,_e.validSettings=_e.swipeStart=_e.swipeMove=_e.swipeEnd=_e.slidesOnRight=_e.slidesOnLeft=_e.slideHandler=_e.siblingDirection=_e.safePreventDefault=_e.lazyStartIndex=_e.lazySlidesOnRight=_e.lazySlidesOnLeft=_e.lazyEndIndex=_e.keyHandler=_e.initializedState=_e.getWidth=_e.getTrackLeft=_e.getTrackCSS=_e.getTrackAnimateCSS=_e.getTotalSlides=_e.getSwipeDirection=_e.getSlideCount=_e.getRequiredLazySlides=_e.getPreClones=_e.getPostClones=_e.getOnDemandLazySlides=_e.getNavigableIndexes=_e.getHeight=void 0;var r=n(Or()),e=n(f2());function n(G){return G&&G.__esModule?G:{default:G}}function a(G){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},a(G)}function o(G,_){var M=Object.keys(G);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(G);_&&(Q=Q.filter(function(W){return Object.getOwnPropertyDescriptor(G,W).enumerable})),M.push.apply(M,Q)}return M}function u(G){for(var _=1;_<arguments.length;_++){var M=arguments[_]!=null?arguments[_]:{};_%2?o(Object(M),!0).forEach(function(Q){d(G,Q,M[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(M)):o(Object(M)).forEach(function(Q){Object.defineProperty(G,Q,Object.getOwnPropertyDescriptor(M,Q))})}return G}function d(G,_,M){return _=h(_),_ in G?Object.defineProperty(G,_,{value:M,enumerable:!0,configurable:!0,writable:!0}):G[_]=M,G}function h(G){var _=y(G,"string");return a(_)=="symbol"?_:String(_)}function y(G,_){if(a(G)!="object"||!G)return G;var M=G[Symbol.toPrimitive];if(M!==void 0){var Q=M.call(G,_);if(a(Q)!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(G)}function g(G,_,M){return Math.max(_,Math.min(G,M))}var b=_e.safePreventDefault=function(_){var M=["onTouchStart","onTouchMove","onWheel"];M.includes(_._reactName)||_.preventDefault()},E=_e.getOnDemandLazySlides=function(_){for(var M=[],Q=R(_),W=D(_),ae=Q;ae<W;ae++)_.lazyLoadedList.indexOf(ae)<0&&M.push(ae);return M};_e.getRequiredLazySlides=function(_){for(var M=[],Q=R(_),W=D(_),ae=Q;ae<W;ae++)M.push(ae);return M};var R=_e.lazyStartIndex=function(_){return _.currentSlide-B(_)},D=_e.lazyEndIndex=function(_){return _.currentSlide+L(_)},B=_e.lazySlidesOnLeft=function(_){return _.centerMode?Math.floor(_.slidesToShow/2)+(parseInt(_.centerPadding)>0?1:0):0},L=_e.lazySlidesOnRight=function(_){return _.centerMode?Math.floor((_.slidesToShow-1)/2)+1+(parseInt(_.centerPadding)>0?1:0):_.slidesToShow},z=_e.getWidth=function(_){return _&&_.offsetWidth||0},F=_e.getHeight=function(_){return _&&_.offsetHeight||0},Y=_e.getSwipeDirection=function(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Q,W,ae,ce;return Q=_.startX-_.curX,W=_.startY-_.curY,ae=Math.atan2(W,Q),ce=Math.round(ae*180/Math.PI),ce<0&&(ce=360-Math.abs(ce)),ce<=45&&ce>=0||ce<=360&&ce>=315?"left":ce>=135&&ce<=225?"right":M===!0?ce>=35&&ce<=135?"up":"down":"vertical"},ne=_e.canGoNext=function(_){var M=!0;return _.infinite||(_.centerMode&&_.currentSlide>=_.slideCount-1||_.slideCount<=_.slidesToShow||_.currentSlide>=_.slideCount-_.slidesToShow)&&(M=!1),M};_e.extractObject=function(_,M){var Q={};return M.forEach(function(W){return Q[W]=_[W]}),Q},_e.initializedState=function(_){var M=r.default.Children.count(_.children),Q=_.listRef,W=Math.ceil(z(Q)),ae=_.trackRef&&_.trackRef.node,ce=Math.ceil(z(ae)),le;if(_.vertical)le=W;else{var ye=_.centerMode&&parseInt(_.centerPadding)*2;typeof _.centerPadding=="string"&&_.centerPadding.slice(-1)==="%"&&(ye*=W/100),le=Math.ceil((W-ye)/_.slidesToShow)}var Se=Q&&F(Q.querySelector('[data-index="0"]')),Oe=Se*_.slidesToShow,ke=_.currentSlide===void 0?_.initialSlide:_.currentSlide;_.rtl&&_.currentSlide===void 0&&(ke=M-1-_.initialSlide);var ze=_.lazyLoadedList||[],He=E(u(u({},_),{},{currentSlide:ke,lazyLoadedList:ze}));ze=ze.concat(He);var Ve={slideCount:M,slideWidth:le,listWidth:W,trackWidth:ce,currentSlide:ke,slideHeight:Se,listHeight:Oe,lazyLoadedList:ze};return _.autoplaying===null&&_.autoplay&&(Ve.autoplaying="playing"),Ve},_e.slideHandler=function(_){var M=_.waitForAnimate,Q=_.animating,W=_.fade,ae=_.infinite,ce=_.index,le=_.slideCount,ye=_.lazyLoad,Se=_.currentSlide,Oe=_.centerMode,ke=_.slidesToScroll,ze=_.slidesToShow,He=_.useCSS,Ve=_.lazyLoadedList;if(M&&Q)return{};var je=ce,Ge,ht,Re,mt={},pt={},gt=ae?ce:g(ce,0,le-1);if(W){if(!ae&&(ce<0||ce>=le))return{};ce<0?je=ce+le:ce>=le&&(je=ce-le),ye&&Ve.indexOf(je)<0&&(Ve=Ve.concat(je)),mt={animating:!0,currentSlide:je,lazyLoadedList:Ve,targetSlide:je},pt={animating:!1,targetSlide:je}}else Ge=je,je<0?(Ge=je+le,ae?le%ke!==0&&(Ge=le-le%ke):Ge=0):!ne(_)&&je>Se?je=Ge=Se:Oe&&je>=le?(je=ae?le:le-1,Ge=ae?0:le-1):je>=le&&(Ge=je-le,ae?le%ke!==0&&(Ge=0):Ge=le-ze),!ae&&je+ze>=le&&(Ge=le-ze),ht=S(u(u({},_),{},{slideIndex:je})),Re=S(u(u({},_),{},{slideIndex:Ge})),ae||(ht===Re&&(je=Ge),ht=Re),ye&&(Ve=Ve.concat(E(u(u({},_),{},{currentSlide:je})))),He?(mt={animating:!0,currentSlide:Ge,trackStyle:A(u(u({},_),{},{left:ht})),lazyLoadedList:Ve,targetSlide:gt},pt={animating:!1,currentSlide:Ge,trackStyle:O(u(u({},_),{},{left:Re})),swipeLeft:null,targetSlide:gt}):mt={currentSlide:Ge,trackStyle:O(u(u({},_),{},{left:Re})),lazyLoadedList:Ve,targetSlide:gt};return{state:mt,nextState:pt}},_e.changeSlide=function(_,M){var Q,W,ae,ce,le,ye=_.slidesToScroll,Se=_.slidesToShow,Oe=_.slideCount,ke=_.currentSlide,ze=_.targetSlide,He=_.lazyLoad,Ve=_.infinite;if(ce=Oe%ye!==0,Q=ce?0:(Oe-ke)%ye,M.message==="previous")ae=Q===0?ye:Se-Q,le=ke-ae,He&&!Ve&&(W=ke-ae,le=W===-1?Oe-1:W),Ve||(le=ze-ye);else if(M.message==="next")ae=Q===0?ye:Q,le=ke+ae,He&&!Ve&&(le=(ke+ye)%Oe+Q),Ve||(le=ze+ye);else if(M.message==="dots")le=M.index*M.slidesToScroll;else if(M.message==="children"){if(le=M.index,Ve){var je=Z(u(u({},_),{},{targetSlide:le}));le>M.currentSlide&&je==="left"?le=le-Oe:le<M.currentSlide&&je==="right"&&(le=le+Oe)}}else M.message==="index"&&(le=Number(M.index));return le},_e.keyHandler=function(_,M,Q){return _.target.tagName.match("TEXTAREA|INPUT|SELECT")||!M?"":_.keyCode===37?Q?"next":"previous":_.keyCode===39?Q?"previous":"next":""},_e.swipeStart=function(_,M,Q){return _.target.tagName==="IMG"&&b(_),!M||!Q&&_.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:_.touches?_.touches[0].pageX:_.clientX,startY:_.touches?_.touches[0].pageY:_.clientY,curX:_.touches?_.touches[0].pageX:_.clientX,curY:_.touches?_.touches[0].pageY:_.clientY}}},_e.swipeMove=function(_,M){var Q=M.scrolling,W=M.animating,ae=M.vertical,ce=M.swipeToSlide,le=M.verticalSwiping,ye=M.rtl,Se=M.currentSlide,Oe=M.edgeFriction,ke=M.edgeDragged,ze=M.onEdge,He=M.swiped,Ve=M.swiping,je=M.slideCount,Ge=M.slidesToScroll,ht=M.infinite,Re=M.touchObject,mt=M.swipeEvent,pt=M.listHeight,gt=M.listWidth;if(!Q){if(W)return b(_);ae&&ce&&le&&b(_);var xt,Wn={},Zn=S(M);Re.curX=_.touches?_.touches[0].pageX:_.clientX,Re.curY=_.touches?_.touches[0].pageY:_.clientY,Re.swipeLength=Math.round(Math.sqrt(Math.pow(Re.curX-Re.startX,2)));var di=Math.round(Math.sqrt(Math.pow(Re.curY-Re.startY,2)));if(!le&&!Ve&&di>10)return{scrolling:!0};le&&(Re.swipeLength=di);var or=(ye?-1:1)*(Re.curX>Re.startX?1:-1);le&&(or=Re.curY>Re.startY?1:-1);var yt=Math.ceil(je/Ge),Ue=Y(M.touchObject,le),Lt=Re.swipeLength;return ht||(Se===0&&(Ue==="right"||Ue==="down")||Se+1>=yt&&(Ue==="left"||Ue==="up")||!ne(M)&&(Ue==="left"||Ue==="up"))&&(Lt=Re.swipeLength*Oe,ke===!1&&ze&&(ze(Ue),Wn.edgeDragged=!0)),!He&&mt&&(mt(Ue),Wn.swiped=!0),ae?xt=Zn+Lt*(pt/gt)*or:ye?xt=Zn-Lt*or:xt=Zn+Lt*or,le&&(xt=Zn+Lt*or),Wn=u(u({},Wn),{},{touchObject:Re,swipeLeft:xt,trackStyle:O(u(u({},M),{},{left:xt}))}),Math.abs(Re.curX-Re.startX)<Math.abs(Re.curY-Re.startY)*.8||Re.swipeLength>10&&(Wn.swiping=!0,b(_)),Wn}},_e.swipeEnd=function(_,M){var Q=M.dragging,W=M.swipe,ae=M.touchObject,ce=M.listWidth,le=M.touchThreshold,ye=M.verticalSwiping,Se=M.listHeight,Oe=M.swipeToSlide,ke=M.scrolling,ze=M.onSwipe,He=M.targetSlide,Ve=M.currentSlide,je=M.infinite;if(!Q)return W&&b(_),{};var Ge=ye?Se/le:ce/le,ht=Y(ae,ye),Re={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(ke||!ae.swipeLength)return Re;if(ae.swipeLength>Ge){b(_),ze&&ze(ht);var mt,pt,gt=je?Ve:He;switch(ht){case"left":case"up":pt=gt+q(M),mt=Oe?V(M,pt):pt,Re.currentDirection=0;break;case"right":case"down":pt=gt-q(M),mt=Oe?V(M,pt):pt,Re.currentDirection=1;break;default:mt=gt}Re.triggerSlideHandler=mt}else{var xt=S(M);Re.trackStyle=A(u(u({},M),{},{left:xt}))}return Re};var re=_e.getNavigableIndexes=function(_){for(var M=_.infinite?_.slideCount*2:_.slideCount,Q=_.infinite?_.slidesToShow*-1:0,W=_.infinite?_.slidesToShow*-1:0,ae=[];Q<M;)ae.push(Q),Q=W+_.slidesToScroll,W+=Math.min(_.slidesToScroll,_.slidesToShow);return ae},V=_e.checkNavigable=function(_,M){var Q=re(_),W=0;if(M>Q[Q.length-1])M=Q[Q.length-1];else for(var ae in Q){if(M<Q[ae]){M=W;break}W=Q[ae]}return M},q=_e.getSlideCount=function(_){var M=_.centerMode?_.slideWidth*Math.floor(_.slidesToShow/2):0;if(_.swipeToSlide){var Q,W=_.listRef,ae=W.querySelectorAll&&W.querySelectorAll(".slick-slide")||[];if(Array.from(ae).every(function(ye){if(_.vertical){if(ye.offsetTop+F(ye)/2>_.swipeLeft*-1)return Q=ye,!1}else if(ye.offsetLeft-M+z(ye)/2>_.swipeLeft*-1)return Q=ye,!1;return!0}),!Q)return 0;var ce=_.rtl===!0?_.slideCount-_.currentSlide:_.currentSlide,le=Math.abs(Q.dataset.index-ce)||1;return le}else return _.slidesToScroll},N=_e.checkSpecKeys=function(_,M){return M.reduce(function(Q,W){return Q&&_.hasOwnProperty(W)},!0)?null:console.error("Keys Missing:",_)},O=_e.getTrackCSS=function(_){N(_,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var M,Q,W=_.slideCount+2*_.slidesToShow;_.vertical?Q=W*_.slideHeight:M=C(_)*_.slideWidth;var ae={opacity:1,transition:"",WebkitTransition:""};if(_.useTransform){var ce=_.vertical?"translate3d(0px, "+_.left+"px, 0px)":"translate3d("+_.left+"px, 0px, 0px)",le=_.vertical?"translate3d(0px, "+_.left+"px, 0px)":"translate3d("+_.left+"px, 0px, 0px)",ye=_.vertical?"translateY("+_.left+"px)":"translateX("+_.left+"px)";ae=u(u({},ae),{},{WebkitTransform:ce,transform:le,msTransform:ye})}else _.vertical?ae.top=_.left:ae.left=_.left;return _.fade&&(ae={opacity:1}),M&&(ae.width=M),Q&&(ae.height=Q),window&&!window.addEventListener&&window.attachEvent&&(_.vertical?ae.marginTop=_.left+"px":ae.marginLeft=_.left+"px"),ae},A=_e.getTrackAnimateCSS=function(_){N(_,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var M=O(_);return _.useTransform?(M.WebkitTransition="-webkit-transform "+_.speed+"ms "+_.cssEase,M.transition="transform "+_.speed+"ms "+_.cssEase):_.vertical?M.transition="top "+_.speed+"ms "+_.cssEase:M.transition="left "+_.speed+"ms "+_.cssEase,M},S=_e.getTrackLeft=function(_){if(_.unslick)return 0;N(_,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var M=_.slideIndex,Q=_.trackRef,W=_.infinite,ae=_.centerMode,ce=_.slideCount,le=_.slidesToShow,ye=_.slidesToScroll,Se=_.slideWidth,Oe=_.listWidth,ke=_.variableWidth,ze=_.slideHeight,He=_.fade,Ve=_.vertical,je=0,Ge,ht,Re=0;if(He||_.slideCount===1)return 0;var mt=0;if(W?(mt=-j(_),ce%ye!==0&&M+ye>ce&&(mt=-(M>ce?le-(M-ce):ce%ye)),ae&&(mt+=parseInt(le/2))):(ce%ye!==0&&M+ye>ce&&(mt=le-ce%ye),ae&&(mt=parseInt(le/2))),je=mt*Se,Re=mt*ze,Ve?Ge=M*ze*-1+Re:Ge=M*Se*-1+je,ke===!0){var pt,gt=Q&&Q.node;if(pt=M+j(_),ht=gt&&gt.childNodes[pt],Ge=ht?ht.offsetLeft*-1:0,ae===!0){pt=W?M+j(_):M,ht=gt&&gt.children[pt],Ge=0;for(var xt=0;xt<pt;xt++)Ge-=gt&&gt.children[xt]&&gt.children[xt].offsetWidth;Ge-=parseInt(_.centerPadding),Ge+=ht&&(Oe-ht.offsetWidth)/2}}return Ge},j=_e.getPreClones=function(_){return _.unslick||!_.infinite?0:_.variableWidth?_.slideCount:_.slidesToShow+(_.centerMode?1:0)},k=_e.getPostClones=function(_){return _.unslick||!_.infinite?0:_.slideCount},C=_e.getTotalSlides=function(_){return _.slideCount===1?1:j(_)+_.slideCount+k(_)},Z=_e.siblingDirection=function(_){return _.targetSlide>_.currentSlide?_.targetSlide>_.currentSlide+me(_)?"left":"right":_.targetSlide<_.currentSlide-$(_)?"right":"left"},me=_e.slidesOnRight=function(_){var M=_.slidesToShow,Q=_.centerMode,W=_.rtl,ae=_.centerPadding;if(Q){var ce=(M-1)/2+1;return parseInt(ae)>0&&(ce+=1),W&&M%2===0&&(ce+=1),ce}return W?0:M-1},$=_e.slidesOnLeft=function(_){var M=_.slidesToShow,Q=_.centerMode,W=_.rtl,ae=_.centerPadding;if(Q){var ce=(M-1)/2+1;return parseInt(ae)>0&&(ce+=1),!W&&M%2===0&&(ce+=1),ce}return W?M-1:0};_e.canUseDOM=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};var w=_e.validSettings=Object.keys(e.default);function ge(G){return w.reduce(function(_,M){return G.hasOwnProperty(M)&&(_[M]=G[M]),_},{})}return _e}var Tl={},y_;function KC(){if(y_)return Tl;y_=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.Track=void 0;var r=a(Or()),e=a(Sf()),n=ru();function a(A){return A&&A.__esModule?A:{default:A}}function o(A){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},o(A)}function u(){return u=Object.assign?Object.assign.bind():function(A){for(var S=1;S<arguments.length;S++){var j=arguments[S];for(var k in j)Object.prototype.hasOwnProperty.call(j,k)&&(A[k]=j[k])}return A},u.apply(this,arguments)}function d(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function h(A,S){for(var j=0;j<S.length;j++){var k=S[j];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,ne(k.key),k)}}function y(A,S,j){return S&&h(A.prototype,S),Object.defineProperty(A,"prototype",{writable:!1}),A}function g(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),S&&b(A,S)}function b(A,S){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,C){return k.__proto__=C,k},b(A,S)}function E(A){var S=B();return function(){var k=L(A),C;if(S){var Z=L(this).constructor;C=Reflect.construct(k,arguments,Z)}else C=k.apply(this,arguments);return R(this,C)}}function R(A,S){if(S&&(o(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D(A)}function D(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function B(){try{var A=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B=function(){return!!A})()}function L(A){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},L(A)}function z(A,S){var j=Object.keys(A);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(A);S&&(k=k.filter(function(C){return Object.getOwnPropertyDescriptor(A,C).enumerable})),j.push.apply(j,k)}return j}function F(A){for(var S=1;S<arguments.length;S++){var j=arguments[S]!=null?arguments[S]:{};S%2?z(Object(j),!0).forEach(function(k){Y(A,k,j[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(j)):z(Object(j)).forEach(function(k){Object.defineProperty(A,k,Object.getOwnPropertyDescriptor(j,k))})}return A}function Y(A,S,j){return S=ne(S),S in A?Object.defineProperty(A,S,{value:j,enumerable:!0,configurable:!0,writable:!0}):A[S]=j,A}function ne(A){var S=re(A,"string");return o(S)=="symbol"?S:String(S)}function re(A,S){if(o(A)!="object"||!A)return A;var j=A[Symbol.toPrimitive];if(j!==void 0){var k=j.call(A,S);if(o(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(A)}var V=function(S){var j,k,C,Z,me;S.rtl?me=S.slideCount-1-S.index:me=S.index,C=me<0||me>=S.slideCount,S.centerMode?(Z=Math.floor(S.slidesToShow/2),k=(me-S.currentSlide)%S.slideCount===0,me>S.currentSlide-Z-1&&me<=S.currentSlide+Z&&(j=!0)):j=S.currentSlide<=me&&me<S.currentSlide+S.slidesToShow;var $;S.targetSlide<0?$=S.targetSlide+S.slideCount:S.targetSlide>=S.slideCount?$=S.targetSlide-S.slideCount:$=S.targetSlide;var w=me===$;return{"slick-slide":!0,"slick-active":j,"slick-center":k,"slick-cloned":C,"slick-current":w}},q=function(S){var j={};return(S.variableWidth===void 0||S.variableWidth===!1)&&(j.width=S.slideWidth),S.fade&&(j.position="relative",S.vertical?j.top=-S.index*parseInt(S.slideHeight):j.left=-S.index*parseInt(S.slideWidth),j.opacity=S.currentSlide===S.index?1:0,j.zIndex=S.currentSlide===S.index?999:998,S.useCSS&&(j.transition="opacity "+S.speed+"ms "+S.cssEase+", visibility "+S.speed+"ms "+S.cssEase)),j},N=function(S,j){return S.key||j},O=function(S){var j,k=[],C=[],Z=[],me=r.default.Children.count(S.children),$=(0,n.lazyStartIndex)(S),w=(0,n.lazyEndIndex)(S);return r.default.Children.forEach(S.children,function(ge,G){var _,M={message:"children",index:G,slidesToScroll:S.slidesToScroll,currentSlide:S.currentSlide};!S.lazyLoad||S.lazyLoad&&S.lazyLoadedList.indexOf(G)>=0?_=ge:_=r.default.createElement("div",null);var Q=q(F(F({},S),{},{index:G})),W=_.props.className||"",ae=V(F(F({},S),{},{index:G}));if(k.push(r.default.cloneElement(_,{key:"original"+N(_,G),"data-index":G,className:(0,e.default)(ae,W),tabIndex:"-1","aria-hidden":!ae["slick-active"],style:F(F({outline:"none"},_.props.style||{}),Q),onClick:function(ye){_.props&&_.props.onClick&&_.props.onClick(ye),S.focusOnSelect&&S.focusOnSelect(M)}})),S.infinite&&S.fade===!1){var ce=me-G;ce<=(0,n.getPreClones)(S)&&(j=-ce,j>=$&&(_=ge),ae=V(F(F({},S),{},{index:j})),C.push(r.default.cloneElement(_,{key:"precloned"+N(_,j),"data-index":j,tabIndex:"-1",className:(0,e.default)(ae,W),"aria-hidden":!ae["slick-active"],style:F(F({},_.props.style||{}),Q),onClick:function(ye){_.props&&_.props.onClick&&_.props.onClick(ye),S.focusOnSelect&&S.focusOnSelect(M)}}))),j=me+G,j<w&&(_=ge),ae=V(F(F({},S),{},{index:j})),Z.push(r.default.cloneElement(_,{key:"postcloned"+N(_,j),"data-index":j,tabIndex:"-1",className:(0,e.default)(ae,W),"aria-hidden":!ae["slick-active"],style:F(F({},_.props.style||{}),Q),onClick:function(ye){_.props&&_.props.onClick&&_.props.onClick(ye),S.focusOnSelect&&S.focusOnSelect(M)}}))}}),S.rtl?C.concat(k,Z).reverse():C.concat(k,Z)};return Tl.Track=function(A){g(j,A);var S=E(j);function j(){var k;d(this,j);for(var C=arguments.length,Z=new Array(C),me=0;me<C;me++)Z[me]=arguments[me];return k=S.call.apply(S,[this].concat(Z)),Y(D(k),"node",null),Y(D(k),"handleRef",function($){k.node=$}),k}return y(j,[{key:"render",value:function(){var C=O(this.props),Z=this.props,me=Z.onMouseEnter,$=Z.onMouseOver,w=Z.onMouseLeave,ge={onMouseEnter:me,onMouseOver:$,onMouseLeave:w};return r.default.createElement("div",u({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},ge),C)}}]),j}(r.default.PureComponent),Tl}var Al={},v_;function YC(){if(v_)return Al;v_=1;function r(V){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},r(V)}Object.defineProperty(Al,"__esModule",{value:!0}),Al.Dots=void 0;var e=o(Or()),n=o(Sf()),a=ru();function o(V){return V&&V.__esModule?V:{default:V}}function u(V,q){var N=Object.keys(V);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(V);q&&(O=O.filter(function(A){return Object.getOwnPropertyDescriptor(V,A).enumerable})),N.push.apply(N,O)}return N}function d(V){for(var q=1;q<arguments.length;q++){var N=arguments[q]!=null?arguments[q]:{};q%2?u(Object(N),!0).forEach(function(O){h(V,O,N[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(N)):u(Object(N)).forEach(function(O){Object.defineProperty(V,O,Object.getOwnPropertyDescriptor(N,O))})}return V}function h(V,q,N){return q=E(q),q in V?Object.defineProperty(V,q,{value:N,enumerable:!0,configurable:!0,writable:!0}):V[q]=N,V}function y(V,q){if(!(V instanceof q))throw new TypeError("Cannot call a class as a function")}function g(V,q){for(var N=0;N<q.length;N++){var O=q[N];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(V,E(O.key),O)}}function b(V,q,N){return q&&g(V.prototype,q),Object.defineProperty(V,"prototype",{writable:!1}),V}function E(V){var q=R(V,"string");return r(q)=="symbol"?q:String(q)}function R(V,q){if(r(V)!="object"||!V)return V;var N=V[Symbol.toPrimitive];if(N!==void 0){var O=N.call(V,q);if(r(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(V)}function D(V,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(q&&q.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Object.defineProperty(V,"prototype",{writable:!1}),q&&B(V,q)}function B(V,q){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,A){return O.__proto__=A,O},B(V,q)}function L(V){var q=Y();return function(){var O=ne(V),A;if(q){var S=ne(this).constructor;A=Reflect.construct(O,arguments,S)}else A=O.apply(this,arguments);return z(this,A)}}function z(V,q){if(q&&(r(q)==="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F(V)}function F(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function Y(){try{var V=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y=function(){return!!V})()}function ne(V){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},ne(V)}var re=function(q){var N;return q.infinite?N=Math.ceil(q.slideCount/q.slidesToScroll):N=Math.ceil((q.slideCount-q.slidesToShow)/q.slidesToScroll)+1,N};return Al.Dots=function(V){D(N,V);var q=L(N);function N(){return y(this,N),q.apply(this,arguments)}return b(N,[{key:"clickHandler",value:function(A,S){S.preventDefault(),this.props.clickHandler(A)}},{key:"render",value:function(){for(var A=this.props,S=A.onMouseEnter,j=A.onMouseOver,k=A.onMouseLeave,C=A.infinite,Z=A.slidesToScroll,me=A.slidesToShow,$=A.slideCount,w=A.currentSlide,ge=re({slideCount:$,slidesToScroll:Z,slidesToShow:me,infinite:C}),G={onMouseEnter:S,onMouseOver:j,onMouseLeave:k},_=[],M=0;M<ge;M++){var Q=(M+1)*Z-1,W=C?Q:(0,a.clamp)(Q,0,$-1),ae=W-(Z-1),ce=C?ae:(0,a.clamp)(ae,0,$-1),le=(0,n.default)({"slick-active":C?w>=ce&&w<=W:w===ce}),ye={message:"dots",index:M,slidesToScroll:Z,currentSlide:w},Se=this.clickHandler.bind(this,ye);_=_.concat(e.default.createElement("li",{key:M,className:le},e.default.cloneElement(this.props.customPaging(M),{onClick:Se})))}return e.default.cloneElement(this.props.appendDots(_),d({className:this.props.dotsClass},G))}}]),N}(e.default.PureComponent),Al}var Pa={},__;function XC(){if(__)return Pa;__=1;function r(V){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},r(V)}Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.PrevArrow=Pa.NextArrow=void 0;var e=o(Or()),n=o(Sf()),a=ru();function o(V){return V&&V.__esModule?V:{default:V}}function u(){return u=Object.assign?Object.assign.bind():function(V){for(var q=1;q<arguments.length;q++){var N=arguments[q];for(var O in N)Object.prototype.hasOwnProperty.call(N,O)&&(V[O]=N[O])}return V},u.apply(this,arguments)}function d(V,q){var N=Object.keys(V);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(V);q&&(O=O.filter(function(A){return Object.getOwnPropertyDescriptor(V,A).enumerable})),N.push.apply(N,O)}return N}function h(V){for(var q=1;q<arguments.length;q++){var N=arguments[q]!=null?arguments[q]:{};q%2?d(Object(N),!0).forEach(function(O){y(V,O,N[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(N)):d(Object(N)).forEach(function(O){Object.defineProperty(V,O,Object.getOwnPropertyDescriptor(N,O))})}return V}function y(V,q,N){return q=R(q),q in V?Object.defineProperty(V,q,{value:N,enumerable:!0,configurable:!0,writable:!0}):V[q]=N,V}function g(V,q){if(!(V instanceof q))throw new TypeError("Cannot call a class as a function")}function b(V,q){for(var N=0;N<q.length;N++){var O=q[N];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(V,R(O.key),O)}}function E(V,q,N){return q&&b(V.prototype,q),Object.defineProperty(V,"prototype",{writable:!1}),V}function R(V){var q=D(V,"string");return r(q)=="symbol"?q:String(q)}function D(V,q){if(r(V)!="object"||!V)return V;var N=V[Symbol.toPrimitive];if(N!==void 0){var O=N.call(V,q);if(r(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(V)}function B(V,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(q&&q.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Object.defineProperty(V,"prototype",{writable:!1}),q&&L(V,q)}function L(V,q){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,A){return O.__proto__=A,O},L(V,q)}function z(V){var q=ne();return function(){var O=re(V),A;if(q){var S=re(this).constructor;A=Reflect.construct(O,arguments,S)}else A=O.apply(this,arguments);return F(this,A)}}function F(V,q){if(q&&(r(q)==="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y(V)}function Y(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function ne(){try{var V=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ne=function(){return!!V})()}function re(V){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},re(V)}return Pa.PrevArrow=function(V){B(N,V);var q=z(N);function N(){return g(this,N),q.apply(this,arguments)}return E(N,[{key:"clickHandler",value:function(A,S){S&&S.preventDefault(),this.props.clickHandler(A,S)}},{key:"render",value:function(){var A={"slick-arrow":!0,"slick-prev":!0},S=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(A["slick-disabled"]=!0,S=null);var j={key:"0","data-role":"none",className:(0,n.default)(A),style:{display:"block"},onClick:S},k={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},C;return this.props.prevArrow?C=e.default.cloneElement(this.props.prevArrow,h(h({},j),k)):C=e.default.createElement("button",u({key:"0",type:"button"},j)," ","Previous"),C}}]),N}(e.default.PureComponent),Pa.NextArrow=function(V){B(N,V);var q=z(N);function N(){return g(this,N),q.apply(this,arguments)}return E(N,[{key:"clickHandler",value:function(A,S){S&&S.preventDefault(),this.props.clickHandler(A,S)}},{key:"render",value:function(){var A={"slick-arrow":!0,"slick-next":!0},S=this.clickHandler.bind(this,{message:"next"});(0,a.canGoNext)(this.props)||(A["slick-disabled"]=!0,S=null);var j={key:"1","data-role":"none",className:(0,n.default)(A),style:{display:"block"},onClick:S},k={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},C;return this.props.nextArrow?C=e.default.cloneElement(this.props.nextArrow,h(h({},j),k)):C=e.default.createElement("button",u({key:"1",type:"button"},j)," ","Next"),C}}]),N}(e.default.PureComponent),Pa}var d2=function(){if(typeof Map<"u")return Map;function r(e,n){var a=-1;return e.some(function(o,u){return o[0]===n?(a=u,!0):!1}),a}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var a=r(this.__entries__,n),o=this.__entries__[a];return o&&o[1]},e.prototype.set=function(n,a){var o=r(this.__entries__,n);~o?this.__entries__[o][1]=a:this.__entries__.push([n,a])},e.prototype.delete=function(n){var a=this.__entries__,o=r(a,n);~o&&a.splice(o,1)},e.prototype.has=function(n){return!!~r(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,a){a===void 0&&(a=null);for(var o=0,u=this.__entries__;o<u.length;o++){var d=u[o];n.call(a,d[1],d[0])}},e}()}(),Rm=typeof window<"u"&&typeof document<"u"&&window.document===document,ef=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),WC=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ef):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),ZC=2;function JC(r,e){var n=!1,a=!1,o=0;function u(){n&&(n=!1,r()),a&&h()}function d(){WC(u)}function h(){var y=Date.now();if(n){if(y-o<ZC)return;a=!0}else n=!0,a=!1,setTimeout(d,e);o=y}return h}var e6=20,t6=["top","right","bottom","left","width","height","size","weight"],n6=typeof MutationObserver<"u",r6=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=JC(this.refresh.bind(this),e6)}return r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var n=this.observers_,a=n.indexOf(e);~a&&n.splice(a,1),!n.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},r.prototype.connect_=function(){!Rm||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),n6?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!Rm||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var n=e.propertyName,a=n===void 0?"":n,o=t6.some(function(u){return!!~a.indexOf(u)});o&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),h2=function(r,e){for(var n=0,a=Object.keys(e);n<a.length;n++){var o=a[n];Object.defineProperty(r,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return r},to=function(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||ef},m2=wf(0,0,0,0);function tf(r){return parseFloat(r)||0}function b_(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(a,o){var u=r["border-"+o+"-width"];return a+tf(u)},0)}function i6(r){for(var e=["top","right","bottom","left"],n={},a=0,o=e;a<o.length;a++){var u=o[a],d=r["padding-"+u];n[u]=tf(d)}return n}function a6(r){var e=r.getBBox();return wf(0,0,e.width,e.height)}function s6(r){var e=r.clientWidth,n=r.clientHeight;if(!e&&!n)return m2;var a=to(r).getComputedStyle(r),o=i6(a),u=o.left+o.right,d=o.top+o.bottom,h=tf(a.width),y=tf(a.height);if(a.boxSizing==="border-box"&&(Math.round(h+u)!==e&&(h-=b_(a,"left","right")+u),Math.round(y+d)!==n&&(y-=b_(a,"top","bottom")+d)),!l6(r)){var g=Math.round(h+u)-e,b=Math.round(y+d)-n;Math.abs(g)!==1&&(h-=g),Math.abs(b)!==1&&(y-=b)}return wf(o.left,o.top,h,y)}var o6=function(){return typeof SVGGraphicsElement<"u"?function(r){return r instanceof to(r).SVGGraphicsElement}:function(r){return r instanceof to(r).SVGElement&&typeof r.getBBox=="function"}}();function l6(r){return r===to(r).document.documentElement}function u6(r){return Rm?o6(r)?a6(r):s6(r):m2}function c6(r){var e=r.x,n=r.y,a=r.width,o=r.height,u=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,d=Object.create(u.prototype);return h2(d,{x:e,y:n,width:a,height:o,top:n,right:e+a,bottom:o+n,left:e}),d}function wf(r,e,n,a){return{x:r,y:e,width:n,height:a}}var f6=function(){function r(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=wf(0,0,0,0),this.target=e}return r.prototype.isActive=function(){var e=u6(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},r}(),d6=function(){function r(e,n){var a=c6(n);h2(this,{target:e,contentRect:a})}return r}(),h6=function(){function r(e,n,a){if(this.activeObservations_=[],this.observations_=new d2,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=a}return r.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof to(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new f6(e)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof to(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},r.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(a){return new d6(a.target,a.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),p2=typeof WeakMap<"u"?new WeakMap:new d2,g2=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=r6.getInstance(),a=new h6(e,n,this);p2.set(this,a)}return r}();["observe","unobserve","disconnect"].forEach(function(r){g2.prototype[r]=function(){var e;return(e=p2.get(this))[r].apply(e,arguments)}});var m6=function(){return typeof ef.ResizeObserver<"u"?ef.ResizeObserver:g2}();const p6=Object.freeze(Object.defineProperty({__proto__:null,default:m6},Symbol.toStringTag,{value:"Module"})),g6=GE(p6);var E_;function y6(){if(E_)return wl;E_=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.InnerSlider=void 0;var r=g(Or()),e=g($C()),n=g(QC()),a=g(Sf()),o=ru(),u=KC(),d=YC(),h=XC(),y=g(g6);function g(C){return C&&C.__esModule?C:{default:C}}function b(C){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},b(C)}function E(){return E=Object.assign?Object.assign.bind():function(C){for(var Z=1;Z<arguments.length;Z++){var me=arguments[Z];for(var $ in me)Object.prototype.hasOwnProperty.call(me,$)&&(C[$]=me[$])}return C},E.apply(this,arguments)}function R(C,Z){if(C==null)return{};var me=D(C,Z),$,w;if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(C);for(w=0;w<ge.length;w++)$=ge[w],!(Z.indexOf($)>=0)&&Object.prototype.propertyIsEnumerable.call(C,$)&&(me[$]=C[$])}return me}function D(C,Z){if(C==null)return{};var me={},$=Object.keys(C),w,ge;for(ge=0;ge<$.length;ge++)w=$[ge],!(Z.indexOf(w)>=0)&&(me[w]=C[w]);return me}function B(C,Z){var me=Object.keys(C);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(C);Z&&($=$.filter(function(w){return Object.getOwnPropertyDescriptor(C,w).enumerable})),me.push.apply(me,$)}return me}function L(C){for(var Z=1;Z<arguments.length;Z++){var me=arguments[Z]!=null?arguments[Z]:{};Z%2?B(Object(me),!0).forEach(function($){S(C,$,me[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(me)):B(Object(me)).forEach(function($){Object.defineProperty(C,$,Object.getOwnPropertyDescriptor(me,$))})}return C}function z(C,Z){if(!(C instanceof Z))throw new TypeError("Cannot call a class as a function")}function F(C,Z){for(var me=0;me<Z.length;me++){var $=Z[me];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(C,j($.key),$)}}function Y(C,Z,me){return Z&&F(C.prototype,Z),Object.defineProperty(C,"prototype",{writable:!1}),C}function ne(C,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(Z&&Z.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),Z&&re(C,Z)}function re(C,Z){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($,w){return $.__proto__=w,$},re(C,Z)}function V(C){var Z=O();return function(){var $=A(C),w;if(Z){var ge=A(this).constructor;w=Reflect.construct($,arguments,ge)}else w=$.apply(this,arguments);return q(this,w)}}function q(C,Z){if(Z&&(b(Z)==="object"||typeof Z=="function"))return Z;if(Z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(C)}function N(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function O(){try{var C=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O=function(){return!!C})()}function A(C){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(me){return me.__proto__||Object.getPrototypeOf(me)},A(C)}function S(C,Z,me){return Z=j(Z),Z in C?Object.defineProperty(C,Z,{value:me,enumerable:!0,configurable:!0,writable:!0}):C[Z]=me,C}function j(C){var Z=k(C,"string");return b(Z)=="symbol"?Z:String(Z)}function k(C,Z){if(b(C)!="object"||!C)return C;var me=C[Symbol.toPrimitive];if(me!==void 0){var $=me.call(C,Z);if(b($)!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(C)}return wl.InnerSlider=function(C){ne(me,C);var Z=V(me);function me($){var w;z(this,me),w=Z.call(this,$),S(N(w),"listRefHandler",function(G){return w.list=G}),S(N(w),"trackRefHandler",function(G){return w.track=G}),S(N(w),"adaptHeight",function(){if(w.props.adaptiveHeight&&w.list){var G=w.list.querySelector('[data-index="'.concat(w.state.currentSlide,'"]'));w.list.style.height=(0,o.getHeight)(G)+"px"}}),S(N(w),"componentDidMount",function(){if(w.props.onInit&&w.props.onInit(),w.props.lazyLoad){var G=(0,o.getOnDemandLazySlides)(L(L({},w.props),w.state));G.length>0&&(w.setState(function(M){return{lazyLoadedList:M.lazyLoadedList.concat(G)}}),w.props.onLazyLoad&&w.props.onLazyLoad(G))}var _=L({listRef:w.list,trackRef:w.track},w.props);w.updateState(_,!0,function(){w.adaptHeight(),w.props.autoplay&&w.autoPlay("update")}),w.props.lazyLoad==="progressive"&&(w.lazyLoadTimer=setInterval(w.progressiveLazyLoad,1e3)),w.ro=new y.default(function(){w.state.animating?(w.onWindowResized(!1),w.callbackTimers.push(setTimeout(function(){return w.onWindowResized()},w.props.speed))):w.onWindowResized()}),w.ro.observe(w.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(M){M.onfocus=w.props.pauseOnFocus?w.onSlideFocus:null,M.onblur=w.props.pauseOnFocus?w.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",w.onWindowResized):window.attachEvent("onresize",w.onWindowResized)}),S(N(w),"componentWillUnmount",function(){w.animationEndCallback&&clearTimeout(w.animationEndCallback),w.lazyLoadTimer&&clearInterval(w.lazyLoadTimer),w.callbackTimers.length&&(w.callbackTimers.forEach(function(G){return clearTimeout(G)}),w.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",w.onWindowResized):window.detachEvent("onresize",w.onWindowResized),w.autoplayTimer&&clearInterval(w.autoplayTimer),w.ro.disconnect()}),S(N(w),"componentDidUpdate",function(G){if(w.checkImagesLoad(),w.props.onReInit&&w.props.onReInit(),w.props.lazyLoad){var _=(0,o.getOnDemandLazySlides)(L(L({},w.props),w.state));_.length>0&&(w.setState(function(W){return{lazyLoadedList:W.lazyLoadedList.concat(_)}}),w.props.onLazyLoad&&w.props.onLazyLoad(_))}w.adaptHeight();var M=L(L({listRef:w.list,trackRef:w.track},w.props),w.state),Q=w.didPropsChange(G);Q&&w.updateState(M,Q,function(){w.state.currentSlide>=r.default.Children.count(w.props.children)&&w.changeSlide({message:"index",index:r.default.Children.count(w.props.children)-w.props.slidesToShow,currentSlide:w.state.currentSlide}),w.props.autoplay?w.autoPlay("update"):w.pause("paused")})}),S(N(w),"onWindowResized",function(G){w.debouncedResize&&w.debouncedResize.cancel(),w.debouncedResize=(0,n.default)(function(){return w.resizeWindow(G)},50),w.debouncedResize()}),S(N(w),"resizeWindow",function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,_=!!(w.track&&w.track.node);if(_){var M=L(L({listRef:w.list,trackRef:w.track},w.props),w.state);w.updateState(M,G,function(){w.props.autoplay?w.autoPlay("update"):w.pause("paused")}),w.setState({animating:!1}),clearTimeout(w.animationEndCallback),delete w.animationEndCallback}}),S(N(w),"updateState",function(G,_,M){var Q=(0,o.initializedState)(G);G=L(L(L({},G),Q),{},{slideIndex:Q.currentSlide});var W=(0,o.getTrackLeft)(G);G=L(L({},G),{},{left:W});var ae=(0,o.getTrackCSS)(G);(_||r.default.Children.count(w.props.children)!==r.default.Children.count(G.children))&&(Q.trackStyle=ae),w.setState(Q,M)}),S(N(w),"ssrInit",function(){if(w.props.variableWidth){var G=0,_=0,M=[],Q=(0,o.getPreClones)(L(L(L({},w.props),w.state),{},{slideCount:w.props.children.length})),W=(0,o.getPostClones)(L(L(L({},w.props),w.state),{},{slideCount:w.props.children.length}));w.props.children.forEach(function(ht){M.push(ht.props.style.width),G+=ht.props.style.width});for(var ae=0;ae<Q;ae++)_+=M[M.length-1-ae],G+=M[M.length-1-ae];for(var ce=0;ce<W;ce++)G+=M[ce];for(var le=0;le<w.state.currentSlide;le++)_+=M[le];var ye={width:G+"px",left:-_+"px"};if(w.props.centerMode){var Se="".concat(M[w.state.currentSlide],"px");ye.left="calc(".concat(ye.left," + (100% - ").concat(Se,") / 2 ) ")}return{trackStyle:ye}}var Oe=r.default.Children.count(w.props.children),ke=L(L(L({},w.props),w.state),{},{slideCount:Oe}),ze=(0,o.getPreClones)(ke)+(0,o.getPostClones)(ke)+Oe,He=100/w.props.slidesToShow*ze,Ve=100/ze,je=-Ve*((0,o.getPreClones)(ke)+w.state.currentSlide)*He/100;w.props.centerMode&&(je+=(100-Ve*He/100)/2);var Ge={width:He+"%",left:je+"%"};return{slideWidth:Ve+"%",trackStyle:Ge}}),S(N(w),"checkImagesLoad",function(){var G=w.list&&w.list.querySelectorAll&&w.list.querySelectorAll(".slick-slide img")||[],_=G.length,M=0;Array.prototype.forEach.call(G,function(Q){var W=function(){return++M&&M>=_&&w.onWindowResized()};if(!Q.onclick)Q.onclick=function(){return Q.parentNode.focus()};else{var ae=Q.onclick;Q.onclick=function(ce){ae(ce),Q.parentNode.focus()}}Q.onload||(w.props.lazyLoad?Q.onload=function(){w.adaptHeight(),w.callbackTimers.push(setTimeout(w.onWindowResized,w.props.speed))}:(Q.onload=W,Q.onerror=function(){W(),w.props.onLazyLoadError&&w.props.onLazyLoadError()}))})}),S(N(w),"progressiveLazyLoad",function(){for(var G=[],_=L(L({},w.props),w.state),M=w.state.currentSlide;M<w.state.slideCount+(0,o.getPostClones)(_);M++)if(w.state.lazyLoadedList.indexOf(M)<0){G.push(M);break}for(var Q=w.state.currentSlide-1;Q>=-(0,o.getPreClones)(_);Q--)if(w.state.lazyLoadedList.indexOf(Q)<0){G.push(Q);break}G.length>0?(w.setState(function(W){return{lazyLoadedList:W.lazyLoadedList.concat(G)}}),w.props.onLazyLoad&&w.props.onLazyLoad(G)):w.lazyLoadTimer&&(clearInterval(w.lazyLoadTimer),delete w.lazyLoadTimer)}),S(N(w),"slideHandler",function(G){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,M=w.props,Q=M.asNavFor,W=M.beforeChange,ae=M.onLazyLoad,ce=M.speed,le=M.afterChange,ye=w.state.currentSlide,Se=(0,o.slideHandler)(L(L(L({index:G},w.props),w.state),{},{trackRef:w.track,useCSS:w.props.useCSS&&!_})),Oe=Se.state,ke=Se.nextState;if(Oe){W&&W(ye,Oe.currentSlide);var ze=Oe.lazyLoadedList.filter(function(He){return w.state.lazyLoadedList.indexOf(He)<0});ae&&ze.length>0&&ae(ze),!w.props.waitForAnimate&&w.animationEndCallback&&(clearTimeout(w.animationEndCallback),le&&le(ye),delete w.animationEndCallback),w.setState(Oe,function(){Q&&w.asNavForIndex!==G&&(w.asNavForIndex=G,Q.innerSlider.slideHandler(G)),ke&&(w.animationEndCallback=setTimeout(function(){var He=ke.animating,Ve=R(ke,["animating"]);w.setState(Ve,function(){w.callbackTimers.push(setTimeout(function(){return w.setState({animating:He})},10)),le&&le(Oe.currentSlide),delete w.animationEndCallback})},ce))})}}),S(N(w),"changeSlide",function(G){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,M=L(L({},w.props),w.state),Q=(0,o.changeSlide)(M,G);if(!(Q!==0&&!Q)&&(_===!0?w.slideHandler(Q,_):w.slideHandler(Q),w.props.autoplay&&w.autoPlay("update"),w.props.focusOnSelect)){var W=w.list.querySelectorAll(".slick-current");W[0]&&W[0].focus()}}),S(N(w),"clickHandler",function(G){w.clickable===!1&&(G.stopPropagation(),G.preventDefault()),w.clickable=!0}),S(N(w),"keyHandler",function(G){var _=(0,o.keyHandler)(G,w.props.accessibility,w.props.rtl);_!==""&&w.changeSlide({message:_})}),S(N(w),"selectHandler",function(G){w.changeSlide(G)}),S(N(w),"disableBodyScroll",function(){var G=function(M){M=M||window.event,M.preventDefault&&M.preventDefault(),M.returnValue=!1};window.ontouchmove=G}),S(N(w),"enableBodyScroll",function(){window.ontouchmove=null}),S(N(w),"swipeStart",function(G){w.props.verticalSwiping&&w.disableBodyScroll();var _=(0,o.swipeStart)(G,w.props.swipe,w.props.draggable);_!==""&&w.setState(_)}),S(N(w),"swipeMove",function(G){var _=(0,o.swipeMove)(G,L(L(L({},w.props),w.state),{},{trackRef:w.track,listRef:w.list,slideIndex:w.state.currentSlide}));_&&(_.swiping&&(w.clickable=!1),w.setState(_))}),S(N(w),"swipeEnd",function(G){var _=(0,o.swipeEnd)(G,L(L(L({},w.props),w.state),{},{trackRef:w.track,listRef:w.list,slideIndex:w.state.currentSlide}));if(_){var M=_.triggerSlideHandler;delete _.triggerSlideHandler,w.setState(_),M!==void 0&&(w.slideHandler(M),w.props.verticalSwiping&&w.enableBodyScroll())}}),S(N(w),"touchEnd",function(G){w.swipeEnd(G),w.clickable=!0}),S(N(w),"slickPrev",function(){w.callbackTimers.push(setTimeout(function(){return w.changeSlide({message:"previous"})},0))}),S(N(w),"slickNext",function(){w.callbackTimers.push(setTimeout(function(){return w.changeSlide({message:"next"})},0))}),S(N(w),"slickGoTo",function(G){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(G=Number(G),isNaN(G))return"";w.callbackTimers.push(setTimeout(function(){return w.changeSlide({message:"index",index:G,currentSlide:w.state.currentSlide},_)},0))}),S(N(w),"play",function(){var G;if(w.props.rtl)G=w.state.currentSlide-w.props.slidesToScroll;else if((0,o.canGoNext)(L(L({},w.props),w.state)))G=w.state.currentSlide+w.props.slidesToScroll;else return!1;w.slideHandler(G)}),S(N(w),"autoPlay",function(G){w.autoplayTimer&&clearInterval(w.autoplayTimer);var _=w.state.autoplaying;if(G==="update"){if(_==="hovered"||_==="focused"||_==="paused")return}else if(G==="leave"){if(_==="paused"||_==="focused")return}else if(G==="blur"&&(_==="paused"||_==="hovered"))return;w.autoplayTimer=setInterval(w.play,w.props.autoplaySpeed+50),w.setState({autoplaying:"playing"})}),S(N(w),"pause",function(G){w.autoplayTimer&&(clearInterval(w.autoplayTimer),w.autoplayTimer=null);var _=w.state.autoplaying;G==="paused"?w.setState({autoplaying:"paused"}):G==="focused"?(_==="hovered"||_==="playing")&&w.setState({autoplaying:"focused"}):_==="playing"&&w.setState({autoplaying:"hovered"})}),S(N(w),"onDotsOver",function(){return w.props.autoplay&&w.pause("hovered")}),S(N(w),"onDotsLeave",function(){return w.props.autoplay&&w.state.autoplaying==="hovered"&&w.autoPlay("leave")}),S(N(w),"onTrackOver",function(){return w.props.autoplay&&w.pause("hovered")}),S(N(w),"onTrackLeave",function(){return w.props.autoplay&&w.state.autoplaying==="hovered"&&w.autoPlay("leave")}),S(N(w),"onSlideFocus",function(){return w.props.autoplay&&w.pause("focused")}),S(N(w),"onSlideBlur",function(){return w.props.autoplay&&w.state.autoplaying==="focused"&&w.autoPlay("blur")}),S(N(w),"render",function(){var G=(0,a.default)("slick-slider",w.props.className,{"slick-vertical":w.props.vertical,"slick-initialized":!0}),_=L(L({},w.props),w.state),M=(0,o.extractObject)(_,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),Q=w.props.pauseOnHover;M=L(L({},M),{},{onMouseEnter:Q?w.onTrackOver:null,onMouseLeave:Q?w.onTrackLeave:null,onMouseOver:Q?w.onTrackOver:null,focusOnSelect:w.props.focusOnSelect&&w.clickable?w.selectHandler:null});var W;if(w.props.dots===!0&&w.state.slideCount>=w.props.slidesToShow){var ae=(0,o.extractObject)(_,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),ce=w.props.pauseOnDotsHover;ae=L(L({},ae),{},{clickHandler:w.changeSlide,onMouseEnter:ce?w.onDotsLeave:null,onMouseOver:ce?w.onDotsOver:null,onMouseLeave:ce?w.onDotsLeave:null}),W=r.default.createElement(d.Dots,ae)}var le,ye,Se=(0,o.extractObject)(_,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);Se.clickHandler=w.changeSlide,w.props.arrows&&(le=r.default.createElement(h.PrevArrow,Se),ye=r.default.createElement(h.NextArrow,Se));var Oe=null;w.props.vertical&&(Oe={height:w.state.listHeight});var ke=null;w.props.vertical===!1?w.props.centerMode===!0&&(ke={padding:"0px "+w.props.centerPadding}):w.props.centerMode===!0&&(ke={padding:w.props.centerPadding+" 0px"});var ze=L(L({},Oe),ke),He=w.props.touchMove,Ve={className:"slick-list",style:ze,onClick:w.clickHandler,onMouseDown:He?w.swipeStart:null,onMouseMove:w.state.dragging&&He?w.swipeMove:null,onMouseUp:He?w.swipeEnd:null,onMouseLeave:w.state.dragging&&He?w.swipeEnd:null,onTouchStart:He?w.swipeStart:null,onTouchMove:w.state.dragging&&He?w.swipeMove:null,onTouchEnd:He?w.touchEnd:null,onTouchCancel:w.state.dragging&&He?w.swipeEnd:null,onKeyDown:w.props.accessibility?w.keyHandler:null},je={className:G,dir:"ltr",style:w.props.style};return w.props.unslick&&(Ve={className:"slick-list"},je={className:G}),r.default.createElement("div",je,w.props.unslick?"":le,r.default.createElement("div",E({ref:w.listRefHandler},Ve),r.default.createElement(u.Track,E({ref:w.trackRefHandler},M),w.props.children)),w.props.unslick?"":ye,w.props.unslick?"":W)}),w.list=null,w.track=null,w.state=L(L({},e.default),{},{currentSlide:w.props.initialSlide,targetSlide:w.props.initialSlide?w.props.initialSlide:0,slideCount:r.default.Children.count(w.props.children)}),w.callbackTimers=[],w.clickable=!0,w.debouncedResize=null;var ge=w.ssrInit();return w.state=L(L({},w.state),ge),w}return Y(me,[{key:"didPropsChange",value:function(w){for(var ge=!1,G=0,_=Object.keys(this.props);G<_.length;G++){var M=_[G];if(!w.hasOwnProperty(M)){ge=!0;break}if(!(b(w[M])==="object"||typeof w[M]=="function"||isNaN(w[M]))&&w[M]!==this.props[M]){ge=!0;break}}return ge||r.default.Children.count(this.props.children)!==r.default.Children.count(w.children)}}]),me}(r.default.Component),wl}var Qh,S_;function v6(){if(S_)return Qh;S_=1;var r=function(e){return e.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}).toLowerCase()};return Qh=r,Qh}var Kh,w_;function _6(){if(w_)return Kh;w_=1;var r=v6(),e=function(o){var u=/[height|width]$/;return u.test(o)},n=function(o){var u="",d=Object.keys(o);return d.forEach(function(h,y){var g=o[h];h=r(h),e(h)&&typeof g=="number"&&(g=g+"px"),g===!0?u+=h:g===!1?u+="not "+h:u+="("+h+": "+g+")",y<d.length-1&&(u+=" and ")}),u},a=function(o){var u="";return typeof o=="string"?o:o instanceof Array?(o.forEach(function(d,h){u+=n(d),h<o.length-1&&(u+=", ")}),u):n(o)};return Kh=a,Kh}var Yh,T_;function b6(){if(T_)return Yh;T_=1;function r(e){this.options=e,!e.deferSetup&&this.setup()}return r.prototype={constructor:r,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},Yh=r,Yh}var Xh,A_;function y2(){if(A_)return Xh;A_=1;function r(a,o){var u=0,d=a.length,h;for(u;u<d&&(h=o(a[u],u),h!==!1);u++);}function e(a){return Object.prototype.toString.apply(a)==="[object Array]"}function n(a){return typeof a=="function"}return Xh={isFunction:n,isArray:e,each:r},Xh}var Wh,x_;function E6(){if(x_)return Wh;x_=1;var r=b6(),e=y2().each;function n(a,o){this.query=a,this.isUnconditional=o,this.handlers=[],this.mql=window.matchMedia(a);var u=this;this.listener=function(d){u.mql=d.currentTarget||d,u.assess()},this.mql.addListener(this.listener)}return n.prototype={constuctor:n,addHandler:function(a){var o=new r(a);this.handlers.push(o),this.matches()&&o.on()},removeHandler:function(a){var o=this.handlers;e(o,function(u,d){if(u.equals(a))return u.destroy(),!o.splice(d,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(a){a.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var a=this.matches()?"on":"off";e(this.handlers,function(o){o[a]()})}},Wh=n,Wh}var Zh,R_;function S6(){if(R_)return Zh;R_=1;var r=E6(),e=y2(),n=e.each,a=e.isFunction,o=e.isArray;function u(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return u.prototype={constructor:u,register:function(d,h,y){var g=this.queries,b=y&&this.browserIsIncapable;return g[d]||(g[d]=new r(d,b)),a(h)&&(h={match:h}),o(h)||(h=[h]),n(h,function(E){a(E)&&(E={match:E}),g[d].addHandler(E)}),this},unregister:function(d,h){var y=this.queries[d];return y&&(h?y.removeHandler(h):(y.clear(),delete this.queries[d])),this}},Zh=u,Zh}var Jh,C_;function w6(){if(C_)return Jh;C_=1;var r=S6();return Jh=new r,Jh}var N_;function T6(){return N_||(N_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=d(Or()),n=y6(),a=d(_6()),o=d(f2()),u=ru();function d(A){return A&&A.__esModule?A:{default:A}}function h(A){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},h(A)}function y(){return y=Object.assign?Object.assign.bind():function(A){for(var S=1;S<arguments.length;S++){var j=arguments[S];for(var k in j)Object.prototype.hasOwnProperty.call(j,k)&&(A[k]=j[k])}return A},y.apply(this,arguments)}function g(A,S){var j=Object.keys(A);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(A);S&&(k=k.filter(function(C){return Object.getOwnPropertyDescriptor(A,C).enumerable})),j.push.apply(j,k)}return j}function b(A){for(var S=1;S<arguments.length;S++){var j=arguments[S]!=null?arguments[S]:{};S%2?g(Object(j),!0).forEach(function(k){V(A,k,j[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(j)):g(Object(j)).forEach(function(k){Object.defineProperty(A,k,Object.getOwnPropertyDescriptor(j,k))})}return A}function E(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function R(A,S){for(var j=0;j<S.length;j++){var k=S[j];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,q(k.key),k)}}function D(A,S,j){return S&&R(A.prototype,S),Object.defineProperty(A,"prototype",{writable:!1}),A}function B(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),S&&L(A,S)}function L(A,S){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,C){return k.__proto__=C,k},L(A,S)}function z(A){var S=ne();return function(){var k=re(A),C;if(S){var Z=re(this).constructor;C=Reflect.construct(k,arguments,Z)}else C=k.apply(this,arguments);return F(this,C)}}function F(A,S){if(S&&(h(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y(A)}function Y(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function ne(){try{var A=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ne=function(){return!!A})()}function re(A){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},re(A)}function V(A,S,j){return S=q(S),S in A?Object.defineProperty(A,S,{value:j,enumerable:!0,configurable:!0,writable:!0}):A[S]=j,A}function q(A){var S=N(A,"string");return h(S)=="symbol"?S:String(S)}function N(A,S){if(h(A)!="object"||!A)return A;var j=A[Symbol.toPrimitive];if(j!==void 0){var k=j.call(A,S);if(h(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(A)}var O=(0,u.canUseDOM)()&&w6();r.default=function(A){B(j,A);var S=z(j);function j(k){var C;return E(this,j),C=S.call(this,k),V(Y(C),"innerSliderRefHandler",function(Z){return C.innerSlider=Z}),V(Y(C),"slickPrev",function(){return C.innerSlider.slickPrev()}),V(Y(C),"slickNext",function(){return C.innerSlider.slickNext()}),V(Y(C),"slickGoTo",function(Z){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return C.innerSlider.slickGoTo(Z,me)}),V(Y(C),"slickPause",function(){return C.innerSlider.pause("paused")}),V(Y(C),"slickPlay",function(){return C.innerSlider.autoPlay("play")}),C.state={breakpoint:null},C._responsiveMediaHandlers=[],C}return D(j,[{key:"media",value:function(C,Z){O.register(C,Z),this._responsiveMediaHandlers.push({query:C,handler:Z})}},{key:"componentDidMount",value:function(){var C=this;if(this.props.responsive){var Z=this.props.responsive.map(function($){return $.breakpoint});Z.sort(function($,w){return $-w}),Z.forEach(function($,w){var ge;w===0?ge=(0,a.default)({minWidth:0,maxWidth:$}):ge=(0,a.default)({minWidth:Z[w-1]+1,maxWidth:$}),(0,u.canUseDOM)()&&C.media(ge,function(){C.setState({breakpoint:$})})});var me=(0,a.default)({minWidth:Z.slice(-1)[0]});(0,u.canUseDOM)()&&this.media(me,function(){C.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(C){O.unregister(C.query,C.handler)})}},{key:"render",value:function(){var C=this,Z,me;this.state.breakpoint?(me=this.props.responsive.filter(function(ce){return ce.breakpoint===C.state.breakpoint}),Z=me[0].settings==="unslick"?"unslick":b(b(b({},o.default),this.props),me[0].settings)):Z=b(b({},o.default),this.props),Z.centerMode&&(Z.slidesToScroll>1,Z.slidesToScroll=1),Z.fade&&(Z.slidesToShow>1,Z.slidesToScroll>1,Z.slidesToShow=1,Z.slidesToScroll=1);var $=e.default.Children.toArray(this.props.children);$=$.filter(function(ce){return typeof ce=="string"?!!ce.trim():!!ce}),Z.variableWidth&&(Z.rows>1||Z.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),Z.variableWidth=!1);for(var w=[],ge=null,G=0;G<$.length;G+=Z.rows*Z.slidesPerRow){for(var _=[],M=G;M<G+Z.rows*Z.slidesPerRow;M+=Z.slidesPerRow){for(var Q=[],W=M;W<M+Z.slidesPerRow&&(Z.variableWidth&&$[W].props.style&&(ge=$[W].props.style.width),!(W>=$.length));W+=1)Q.push(e.default.cloneElement($[W],{key:100*G+10*M+W,tabIndex:-1,style:{width:"".concat(100/Z.slidesPerRow,"%"),display:"inline-block"}}));_.push(e.default.createElement("div",{key:10*G+M},Q))}Z.variableWidth?w.push(e.default.createElement("div",{key:G,style:{width:ge}},_)):w.push(e.default.createElement("div",{key:G},_))}if(Z==="unslick"){var ae="regular slider "+(this.props.className||"");return e.default.createElement("div",{className:ae},$)}else w.length<=Z.slidesToShow&&!Z.infinite&&(Z.unslick=!0);return e.default.createElement(n.InnerSlider,y({style:this.props.style,ref:this.innerSliderRefHandler},(0,u.filterSettings)(Z)),w)}}]),j}(e.default.Component)}(Hh)),Hh}var O_;function A6(){return O_||(O_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=n(T6());function n(a){return a&&a.__esModule?a:{default:a}}r.default=e.default}(Bh)),Bh}var x6=A6();const R6=L_(x6),C6=({menu:r=[],onCategorySelect:e,selectedCategory:n=null})=>{const[a,o]=U.useState(0),[u,d]=U.useState(!0),h=U.useRef(null);U.useRef(null);const y=Array.isArray(r)?r.map(E=>{const R=E.items||[],D=R.find(L=>L.image||L.imageUrl)||R[0],B=(D==null?void 0:D.imageUrl)||(D==null?void 0:D.image);return{name:E.name,displayName:E.name.charAt(0).toUpperCase()+E.name.slice(1),image:B||null,itemCount:R.length,firstItem:D}}).filter(E=>E.itemCount>0):[],g={dots:!0,infinite:y.length>3,speed:500,slidesToShow:3,slidesToScroll:1,arrows:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]},b=(E,R)=>{e&&e(E),h.current&&h.current.slickGoTo(R);const D=document.querySelector(".menu-display");D&&D.scrollIntoView({behavior:"smooth",block:"start"})};return y.length===0?null:p.jsx("div",{className:"category-slider",children:p.jsx("div",{className:"category-slider-container",children:p.jsx(R6,{ref:h,...g,children:y.map((E,R)=>p.jsxs("div",{className:`category-item ${n===E.name?"active":""}`,onClick:()=>b(E.name,R),children:[p.jsxs("div",{className:"category-image",children:[E.image?p.jsx("img",{src:E.image,alt:E.displayName,onError:D=>{D.target.style.display="none",D.target.nextElementSibling&&(D.target.nextElementSibling.style.display="flex")}}):p.jsx("div",{className:"category-image-placeholder",style:{display:"flex"},children:p.jsx("span",{className:"category-icon",children:p.jsx(eo,{})})}),E.image&&p.jsx("div",{className:"category-image-placeholder",style:{display:"none"},children:p.jsx("span",{className:"category-icon",children:p.jsx(eo,{})})}),p.jsx("div",{className:"category-overlay",children:p.jsxs("span",{className:"category-count",children:[E.itemCount," productos"]})})]}),p.jsx("div",{className:"category-info",children:p.jsx("h3",{className:"category-name",children:E.displayName})})]},E.name))})})})},N6=({categories:r=[],selected:e,onSelect:n})=>r.length?p.jsx("div",{className:"category-pills-mobile-wrapper",children:p.jsx("div",{className:"category-pills-mobile-track",children:r.map(a=>p.jsx("button",{className:`category-pill-mobile${e===a.name?" active":""}`,onClick:()=>n&&n(a.name),type:"button",children:a.name},a.id||a.name))})}):null,O6=({onSubmit:r,loading:e,paymentMethod:n})=>{const[a,o]=U.useState({name:"",phone:"",email:"",deliveryOption:"pickup",address:"",notes:""}),[u,d]=U.useState({}),h=()=>{const E={};return a.name.trim()||(E.name="El nombre es requerido"),a.phone.trim()?/^\+?[\d\s-()]{8,}$/.test(a.phone)||(E.phone="Formato de teléfono inválido"):E.phone="El teléfono es requerido",a.email&&!/\S+@\S+\.\S+/.test(a.email)&&(E.email="Formato de email inválido"),d(E),Object.keys(E).length===0},y=E=>{E.preventDefault(),h()&&r(a)},g=E=>{const{name:R,value:D}=E.target;o(B=>({...B,[R]:D})),u[R]&&d(B=>({...B,[R]:""}))},b=E=>{n!=="cash"&&o(R=>({...R,deliveryOption:E.target.value,address:E.target.value==="pickup"?"":R.address}))};return p.jsxs("form",{onSubmit:y,className:"customer-form scrollable-content",children:[p.jsx("h3",{children:"Información de Contacto"}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"name",children:[p.jsx(jC,{style:{marginRight:6,color:"#009688"}})," Nombre completo *"]}),p.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:g,className:u.name?"error":"",disabled:e}),u.name&&p.jsx("span",{className:"error-message",children:u.name})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"phone",children:[p.jsx(TC,{style:{marginRight:6,color:"#009688"}})," Teléfono *"]}),p.jsx("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:g,placeholder:"+54 11 1234-5678",className:u.phone?"error":"",disabled:e}),u.phone&&p.jsx("span",{className:"error-message",children:u.phone})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"email",children:[p.jsx(i2,{style:{marginRight:6,color:"#009688"}})," Email"]}),p.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:g,className:u.email?"error":"",disabled:e}),u.email&&p.jsx("span",{className:"error-message",children:u.email})]}),n==="cash"?p.jsxs("div",{className:"form-group delivery-info",children:[p.jsx("label",{className:"delivery-label",children:"Opción de entrega:"}),p.jsxs("div",{className:"cash-delivery-notice",style:{padding:"1rem",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"8px",marginTop:"0.5rem",display:"flex",alignItems:"center"},children:[p.jsx(eo,{style:{marginRight:"0.5rem",color:"#856404"}}),p.jsx("span",{style:{color:"#856404",fontWeight:"500"},children:"El pago en efectivo solo está disponible para retiro en local"})]})]}):p.jsxs("div",{className:"form-group delivery-options",children:[p.jsx("label",{className:"delivery-label",children:"Opción de entrega:"}),p.jsxs("div",{className:"delivery-choice",style:{display:"flex",gap:"1rem",marginTop:"0.5rem"},children:[p.jsxs("label",{className:"radio-option",style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"0.75rem 1rem",border:"2px solid",borderColor:a.deliveryOption==="pickup"?"#009688":"#ddd",borderRadius:"8px",backgroundColor:a.deliveryOption==="pickup"?"#e0f2f1":"#fff",transition:"all 0.3s ease"},children:[p.jsx("input",{type:"radio",name:"deliveryOption",value:"pickup",checked:a.deliveryOption==="pickup",onChange:b,style:{marginRight:"0.5rem"}}),p.jsx(eo,{style:{marginRight:"0.5rem",color:"#009688"}})," Retiro en local"]}),p.jsxs("label",{className:"radio-option",style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"0.75rem 1rem",border:"2px solid",borderColor:a.deliveryOption==="delivery"?"#009688":"#ddd",borderRadius:"8px",backgroundColor:a.deliveryOption==="delivery"?"#e0f2f1":"#fff",transition:"all 0.3s ease"},children:[p.jsx("input",{type:"radio",name:"deliveryOption",value:"delivery",checked:a.deliveryOption==="delivery",onChange:b,style:{marginRight:"0.5rem"}}),p.jsx(u2,{style:{marginRight:"0.5rem",color:"#009688"}})," Envío a domicilio"]})]})]}),a.deliveryOption==="delivery"&&n!=="cash"&&p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"address",children:[p.jsx(xp,{style:{marginRight:6,color:"#009688"}})," Dirección *"]}),p.jsx("textarea",{id:"address",name:"address",value:a.address,onChange:g,disabled:e,rows:"3",required:!0,placeholder:"Ingresa tu dirección completa"})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"notes",children:[p.jsx(NC,{style:{marginRight:6,color:"#009688"}})," Notas adicionales"]}),p.jsx("textarea",{id:"notes",name:"notes",value:a.notes,onChange:g,placeholder:"Instrucciones especiales, alergias, etc.",disabled:e,rows:"3"})]}),p.jsx("button",{type:"submit",className:"submit-btn",disabled:e,children:e?"Procesando...":"Proceder al Pago"})]})},I6=({onSelect:r,onBack:e,total:n})=>p.jsxs("div",{className:"payment-selection scrollable-content",children:[p.jsxs("div",{className:"payment-header",children:[p.jsx("button",{onClick:e,className:"back-btn",children:"← Volver"}),p.jsx("h3",{children:"Método de Pago"})]}),p.jsx("div",{className:"payment-total",children:p.jsxs("h4",{children:["Total de tu compra: $",n.toFixed(2)," ARS"]})}),p.jsxs("div",{className:"payment-methods",children:[p.jsxs("div",{className:"payment-method cash",onClick:()=>r("cash"),children:[p.jsx("div",{className:"payment-icon",children:p.jsx(wC,{style:{color:"#28a745"}})}),p.jsxs("div",{className:"payment-info",children:[p.jsx("h4",{children:"Efectivo"}),p.jsx("p",{children:"Pago al retirar en tienda"}),p.jsx("small",{children:"Coordinaremos por WhatsApp"})]}),p.jsx("div",{className:"payment-arrow",children:p.jsx(Uh,{style:{color:"#888"}})})]}),p.jsxs("div",{className:"payment-method mercadopago",onClick:()=>r("mercadopago"),children:[p.jsx("div",{className:"payment-icon",children:p.jsx(r2,{style:{color:"#0077ff"}})}),p.jsxs("div",{className:"payment-info",children:[p.jsx("h4",{children:"MercadoPago"}),p.jsx("p",{children:"Tarjeta de crédito/débito"}),p.jsx("small",{children:"Pago seguro online con envío"})]}),p.jsx("div",{className:"payment-arrow",children:p.jsx(Uh,{style:{color:"#888"}})})]}),p.jsxs("div",{className:"payment-method transfer",onClick:()=>r("transfer"),children:[p.jsx("div",{className:"payment-icon",children:p.jsx(DC,{style:{color:"#6c757d"}})}),p.jsxs("div",{className:"payment-info",children:[p.jsx("h4",{children:"Transferencia"}),p.jsx("p",{children:"Transferencia bancaria"}),p.jsx("small",{children:"Te enviaremos los datos bancarios"})]}),p.jsx("div",{className:"payment-arrow",children:p.jsx(Uh,{style:{color:"#888"}})})]})]}),p.jsxs("div",{className:"payment-note",children:[p.jsxs("p",{children:[p.jsx(o2,{style:{color:"#28a745",marginRight:6}})," Todos los pagos son seguros y protegidos"]}),p.jsxs("p",{children:[p.jsx(t2,{style:{color:"#0077ff",marginRight:6}})," Envío gratuito en compras superiores a $5000"]})]})]});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6="type.googleapis.com/google.protobuf.Int64Value",j6="type.googleapis.com/google.protobuf.UInt64Value";function v2(r,e){const n={};for(const a in r)r.hasOwnProperty(a)&&(n[a]=e(r[a]));return n}function Cm(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>Cm(e));if(typeof r=="function"||typeof r=="object")return v2(r,e=>Cm(e));throw new Error("Data cannot be encoded in JSON: "+r)}function nf(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case D6:case j6:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>nf(e)):typeof r=="function"||typeof r=="object"?v2(r,e=>nf(e)):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fs extends Wi{constructor(e,n,a){super(`${Ip}/${e}`,n||""),this.details=a}}function M6(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function k6(r,e){let n=M6(r),a=n,o;try{const u=e&&e.error;if(u){const d=u.status;if(typeof d=="string"){if(!I_[d])return new Fs("internal","internal");n=I_[d],a=d}const h=u.message;typeof h=="string"&&(a=h),o=u.details,o!==void 0&&(o=nf(o))}}catch{}return n==="ok"?null:new Fs(n,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,n,a){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(o=>this.auth=o,()=>{}),this.messaging||n.get().then(o=>this.messaging=o,()=>{}),this.appCheck||a.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:a,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="us-central1";function V6(r){let e=null;return{promise:new Promise((n,a)=>{e=setTimeout(()=>{a(new Fs("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}class L6{constructor(e,n,a,o,u=Nm,d){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new P6(n,a,o),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(u);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Nm}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function z6(r,e,n){r.emulatorOrigin=`http://${e}:${n}`}function U6(r,e,n){return a=>H6(r,e,a,{})}async function B6(r,e,n,a){n["Content-Type"]="application/json";let o;try{o=await a(r,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let u=null;try{u=await o.json()}catch{}return{status:o.status,json:u}}function H6(r,e,n,a){const o=r._url(e);return q6(r,o,n,a)}async function q6(r,e,n,a){n=Cm(n);const o={data:n},u={},d=await r.contextProvider.getContext(a.limitedUseAppCheckTokens);d.authToken&&(u.Authorization="Bearer "+d.authToken),d.messagingToken&&(u["Firebase-Instance-ID-Token"]=d.messagingToken),d.appCheckToken!==null&&(u["X-Firebase-AppCheck"]=d.appCheckToken);const h=a.timeout||7e4,y=V6(h),g=await Promise.race([B6(e,o,u,r.fetchImpl),y.promise,r.cancelAllRequests]);if(y.cancel(),!g)throw new Fs("cancelled","Firebase Functions instance was deleted.");const b=k6(g.status,g.json);if(b)throw b;if(!g.json)throw new Fs("internal","Response is not valid JSON object.");let E=g.json.data;if(typeof E>"u"&&(E=g.json.result),typeof E>"u")throw new Fs("internal","Response is missing data field.");return{data:nf(E)}}const D_="@firebase/functions",j_="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="auth-internal",G6="app-check-internal",$6="messaging-internal";function Q6(r,e){const n=(a,{instanceIdentifier:o})=>{const u=a.getProvider("app").getImmediate(),d=a.getProvider(F6),h=a.getProvider($6),y=a.getProvider(G6);return new L6(u,d,h,y,o,r)};Gs(new Ha(Ip,n,"PUBLIC").setMultipleInstances(!0)),Ar(D_,j_,e),Ar(D_,j_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(r=Lm(),e=Nm){const a=sf(yn(r),Ip).getImmediate({identifier:e}),o=Pm("functions");return o&&Y6(a,...o),a}function Y6(r,e,n){z6(yn(r),e,n)}function X6(r,e,n){return U6(yn(r),e)}Q6(fetch.bind(self));class W6{constructor(){this.functions=null,this.initialized=!1}async _ensureInitialized(){if(!this.initialized)try{const{app:e}=await It.initialize();this.functions=K6(e),this.initialized=!0,console.log("✅ PaymentService initialized")}catch(e){throw console.error("❌ Failed to initialize PaymentService:",e),e}}_validateOrderData(e){var n;if(console.log("🔍 Validating order data:",{hasBusinessId:!!e.businessId,businessId:e.businessId,hasItems:!!e.items,itemsLength:(n=e.items)==null?void 0:n.length,hasCustomer:!!e.customer,customerData:e.customer,hasTotalAmount:!!e.totalAmount,totalAmount:e.totalAmount,hasOrderId:!!e.orderId,orderId:e.orderId,hasBackUrls:!!e.backUrls,backUrls:e.backUrls}),!e.businessId||typeof e.businessId!="string")throw new Error("businessId is required and must be a string");if(!e.items||!Array.isArray(e.items)||e.items.length===0)throw new Error("items is required and must be a non-empty array");if(!e.customer||typeof e.customer!="object"||!e.customer.name||!e.customer.phone)throw new Error("customer is required with name and phone");if(!e.totalAmount||typeof e.totalAmount!="number"||e.totalAmount<=0)throw new Error("totalAmount is required and must be a positive number");if(!e.orderId||typeof e.orderId!="string")throw new Error("orderId is required and must be a string");if(!e.backUrls||typeof e.backUrls!="object"||!e.backUrls.success||!e.backUrls.pending||!e.backUrls.failure)throw new Error("backUrls is required with success, pending, and failure URLs");for(const a of e.items)if(!a.name||typeof a.unit_price!="number"||typeof a.quantity!="number")throw new Error(`Invalid item structure: ${JSON.stringify(a)}`);console.log("✅ Order data validation passed")}async createMercadoPagoPreference(e){try{await this._ensureInitialized(),console.log("🔄 Creating MercadoPago preference...",e),this._validateOrderData(e);try{const n=X6(this.functions,"createMercadoPagoPreference");console.log("📤 Sending data to Cloud Function:",{businessId:e.businessId,itemsCount:e.items.length,totalAmount:e.totalAmount,orderId:e.orderId});const a=await n({businessId:e.businessId,items:e.items,customer:e.customer,totalAmount:e.totalAmount,orderId:e.orderId,backUrls:e.backUrls,notes:e.notes||""});if(a.data.success)return console.log("✅ MercadoPago preference created:",a.data),{success:!0,init_point:a.data.init_point,preference_id:a.data.preference_id,order_id:a.data.order_id};throw console.error("❌ Failed to create preference:",a.data),new Error("Failed to create payment preference")}catch(n){console.error("❌ Firebase callable error details:",{code:n.code,message:n.message,details:n.details,stack:n.stack}),console.warn("⚠️ Firebase callable failed, trying HTTP fallback");const a=await fetch("https://us-central1-cms-menu-7b4a4.cloudfunctions.net/createMercadoPagoPreferenceHTTP",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessId:e.businessId,items:e.items,payer:e.customer,totalAmount:e.totalAmount,orderId:e.orderId,backUrls:e.backUrls,notes:e.notes||""})});if(!a.ok){const u=await a.json();throw console.error("❌ HTTP fallback failed:",{status:a.status,statusText:a.statusText,errorData:u}),new Error(`HTTP function failed: ${u.message||a.statusText}`)}const o=await a.json();return console.log("✅ MercadoPago preference created via HTTP:",o),o}}catch(n){throw console.error("❌ Error creating MercadoPago preference:",{message:n.message,stack:n.stack}),new Error(`Payment error: ${n.message}`)}}generateBackUrls(e,n){const a="https://juanmaacampos.github.io/shop_template";return{success:`${a}/#/payment/success?order=${n}&payment_id={{payment_id}}&status={{status}}&collection_status={{collection_status}}&source=mp_redirect`,pending:`${a}/#/payment/pending?order=${n}&payment_id={{payment_id}}&status={{status}}&collection_status={{collection_status}}&source=mp_redirect`,failure:`${a}/#/payment/failure?order=${n}&payment_id={{payment_id}}&status={{status}}&collection_status={{collection_status}}&source=mp_redirect`}}}const M_=new W6,Z6=({bankInfo:r,totalAmount:e,orderNumber:n="",onConfirm:a,onCancel:o,whatsappNumber:u=""})=>{const[d,h]=U.useState(""),y=async(g,b)=>{try{await navigator.clipboard.writeText(g),h(b),setTimeout(()=>h(""),2e3)}catch(E){console.error("Error al copiar:",E);const R=document.createElement("textarea");R.value=g,document.body.appendChild(R),R.select(),document.execCommand("copy"),document.body.removeChild(R),h(b),setTimeout(()=>h(""),2e3)}};return r?p.jsxs("div",{className:"bank-info-section",children:[p.jsx("h3",{children:"💳 Datos para transferencia bancaria"}),p.jsxs("div",{className:"bank-info-instructions",children:[p.jsx("p",{children:p.jsx("strong",{children:"📋 Instrucciones:"})}),p.jsxs("ol",{children:[p.jsx("li",{children:"Realiza la transferencia por el monto exacto indicado"}),p.jsx("li",{children:"Una vez realizada la transferencia, confirma tu pedido"}),p.jsx("li",{children:"Te enviaremos un mensaje por WhatsApp cuando recibamos la transferencia"})]})]}),p.jsxs("div",{className:"bank-details",children:[r.cbu&&p.jsxs("div",{className:"bank-detail-item",children:[p.jsx("span",{className:"bank-label",children:"CBU:"}),p.jsxs("div",{className:"bank-value-container",children:[p.jsx("span",{className:"bank-value",onClick:()=>y(r.cbu,"cbu"),children:r.cbu}),p.jsx("button",{type:"button",className:`copy-btn ${d==="cbu"?"copied":""}`,onClick:()=>y(r.cbu,"cbu"),title:"Copiar CBU",children:d==="cbu"?"✅ Copiado":"📋 Copiar"})]})]}),r.alias&&p.jsxs("div",{className:"bank-detail-item",children:[p.jsx("span",{className:"bank-label",children:"Alias:"}),p.jsxs("div",{className:"bank-value-container",children:[p.jsx("span",{className:"bank-value",onClick:()=>y(r.alias,"alias"),children:r.alias}),p.jsx("button",{type:"button",className:`copy-btn ${d==="alias"?"copied":""}`,onClick:()=>y(r.alias,"alias"),title:"Copiar Alias",children:d==="alias"?"✅ Copiado":"📋 Copiar"})]})]}),r.bankName&&p.jsxs("div",{className:"bank-detail-item",children:[p.jsx("span",{className:"bank-label",children:"Banco:"}),p.jsxs("div",{className:"bank-value-container",children:[p.jsx("span",{className:"bank-value",onClick:()=>y(r.bankName,"bankName"),children:r.bankName}),p.jsx("button",{type:"button",className:`copy-btn ${d==="bankName"?"copied":""}`,onClick:()=>y(r.bankName,"bankName"),title:"Copiar Banco",children:d==="bankName"?"✅ Copiado":"📋 Copiar"})]})]}),r.accountHolder&&p.jsxs("div",{className:"bank-detail-item",children:[p.jsx("span",{className:"bank-label",children:"Titular:"}),p.jsxs("div",{className:"bank-value-container",children:[p.jsx("span",{className:"bank-value",onClick:()=>y(r.accountHolder,"accountHolder"),children:r.accountHolder}),p.jsx("button",{type:"button",className:`copy-btn ${d==="accountHolder"?"copied":""}`,onClick:()=>y(r.accountHolder,"accountHolder"),title:"Copiar Titular",children:d==="accountHolder"?"✅ Copiado":"📋 Copiar"})]})]}),n&&p.jsxs("div",{className:"bank-detail-item",children:[p.jsx("span",{className:"bank-label",children:"Pedido N°:"}),p.jsxs("div",{className:"bank-value-container",children:[p.jsx("span",{className:"bank-value",onClick:()=>y(n,"orderNumber"),children:n}),p.jsx("button",{type:"button",className:`copy-btn ${d==="orderNumber"?"copied":""}`,onClick:()=>y(n,"orderNumber"),title:"Copiar Número de Pedido",children:d==="orderNumber"?"✅ Copiado":"📋 Copiar"})]})]}),p.jsxs("div",{className:"bank-detail-item highlight",children:[p.jsx("span",{className:"bank-label",children:"Monto a transferir:"}),p.jsxs("div",{className:"bank-value-container",children:[p.jsxs("span",{className:"bank-value total-amount",children:["$",e.toFixed(2)," ARS"]}),p.jsx("button",{type:"button",className:`copy-btn ${d==="totalAmount"?"copied":""}`,onClick:()=>y(e.toFixed(2),"totalAmount"),title:"Copiar Monto",children:d==="totalAmount"?"✅ Copiado":"📋 Copiar"})]})]})]}),p.jsx("div",{className:"whatsapp-notice",children:p.jsxs("p",{children:["📱 ",p.jsx("strong",{children:"Confirmación por WhatsApp:"})," Una vez que realices la transferencia, recibirás un mensaje de confirmación ",u&&`al ${u}`,"cuando se reciba la transferencia y tu pedido será procesado."]})}),p.jsxs("div",{className:"bank-info-actions",children:[p.jsx("button",{onClick:o,className:"btn-secondary",children:"← Cambiar método de pago"}),p.jsx("button",{onClick:a,className:"btn-primary",children:"Confirmar pedido →"})]})]}):p.jsx("div",{className:"bank-info-section",children:p.jsxs("div",{className:"bank-info-error",children:[p.jsx("h3",{children:"⚠️ Información bancaria no disponible"}),p.jsx("p",{children:"Los datos bancarios no están configurados. Por favor contacta al restaurante."}),p.jsx("button",{onClick:o,className:"btn-secondary",children:"Volver"})]})})},Dp=({cart:r=[],updateQuantity:e,removeFromCart:n,clearCart:a,total:o=0,onClose:u,firebaseManager:d})=>{const[h,y]=U.useState("cart"),[g,b]=U.useState(""),[E,R]=U.useState(!1),[D,B]=U.useState(null),[L,z]=U.useState(null),F=typeof o=="number"?o:0;Array.isArray(r)&&r.reduce((A,S)=>A+(S.quantity||0),0),U.useEffect(()=>{console.log("🛒 Cart component props:",{cart:r.length,total:o,firebaseManager:!!d,orderService:!!D})},[r,o,d,D]),U.useEffect(()=>{(async()=>{if(d)console.log("✅ Initializing OrderService with Firebase manager"),B(new Hc(d,Wt.businessId));else try{const{globalFirebaseManager:S}=await Pl(async()=>{const{globalFirebaseManager:j}=await Promise.resolve().then(()=>l_);return{globalFirebaseManager:j}},void 0);S&&(console.log("✅ Initializing OrderService with global Firebase manager"),B(new Hc(S,Wt.businessId)))}catch(S){console.warn("⚠️ Could not initialize OrderService:",S.message)}})()},[d]);const Y=A=>{b(A),y("customer")},ne=async A=>{if(!D)try{const{globalFirebaseManager:S}=await Pl(async()=>{const{globalFirebaseManager:k}=await Promise.resolve().then(()=>l_);return{globalFirebaseManager:k}},void 0),j=new Hc(S,Wt.businessId);return B(j),ne(A)}catch(S){console.error("❌ Failed to initialize OrderService:",S),alert("Error: Servicio de pedidos no disponible. Por favor recarga la página e intenta nuevamente.");return}R(!0);try{const S=`order_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;g==="mercadopago"?await q(S,A):g==="transfer"?await V(S,A):await re(S,A)}catch(S){console.error("❌ Checkout error:",S),alert(`Error al procesar el pedido: ${S.message}

Por favor intenta nuevamente.`)}finally{R(!1)}},re=async(A,S)=>{const j={items:r,customer:S,total:F,notes:S.notes,paymentMethod:"cash"},k=await D.createOrder(j);console.log("✅ Cash order created:",k),alert(`¡Pedido confirmado!

ID: `+k.orderId+`

Te contactaremos por WhatsApp para coordinar el retiro.

Total a pagar: $`+F.toFixed(2)+" ARS"),a(),u()},V=async(A,S)=>{const j={items:r,customer:S,total:F,notes:S.notes,paymentMethod:"transfer"},k=await D.createOrder(j);console.log("✅ Transfer order created:",k),z({...k,total:F,customer:S}),y("bankinfo")},q=async(A,S)=>{console.log("🔄 Processing MercadoPago payment...");const j=window.location.origin,k=M_.generateBackUrls(j,A),C={businessId:Wt.businessId,items:r.map(Z=>({name:Z.name,unit_price:Z.price,quantity:Z.quantity})),customer:{name:S.name,phone:S.phone,email:S.email||"",address:S.address||""},totalAmount:o||0,orderId:A,backUrls:k,notes:S.notes||""};try{const Z=await M_.createMercadoPagoPreference(C);if(Z.success&&Z.init_point)console.log("✅ Redirecting to MercadoPago:",Z.init_point),a(),window.location.href=Z.init_point;else throw new Error("Failed to create payment preference")}catch(Z){throw console.error("❌ MercadoPago error:",Z),new Error(`Error con MercadoPago: ${Z.message}`)}},N=()=>{alert("¡Gracias! Te contactaremos por WhatsApp cuando recibamos la transferencia."),a(),u()},O=()=>{y("customer"),z(null)};return r.length===0?p.jsxs("div",{className:"cart-empty",children:[p.jsx("p",{children:"Tu carrito está vacío"}),p.jsx("button",{onClick:u,className:"close-btn",children:"Cerrar"})]}):p.jsxs("div",{className:"cart-container",children:[p.jsxs("div",{className:"cart-header",children:[p.jsx("h2",{children:"Tu Pedido"}),p.jsx("button",{onClick:u,className:"close-btn",children:"×"})]}),p.jsxs("div",{className:"cart-main-container scrollable-content",children:[h==="cart"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"cart-items",children:r.map(A=>p.jsxs("div",{className:"cart-item",children:[p.jsxs("div",{className:"item-info",children:[p.jsx("h4",{children:A.name}),p.jsxs("p",{className:"item-price",children:["$",A.price]})]}),p.jsxs("div",{className:"quantity-controls",children:[p.jsx("button",{onClick:()=>e(A.id,A.quantity-1),children:"-"}),p.jsx("span",{children:A.quantity}),p.jsx("button",{onClick:()=>e(A.id,A.quantity+1),children:"+"})]}),p.jsx("button",{onClick:()=>n(A.id),className:"remove-btn",children:p.jsx(IC,{style:{color:"#888"}})})]},A.id))}),p.jsx("div",{className:"cart-total",children:p.jsxs("h3",{children:["Total: $",F.toFixed(2)," ARS"]})}),p.jsxs("div",{className:"cart-actions",children:[p.jsx("button",{onClick:a,className:"clear-btn",children:"Vaciar Carrito"}),p.jsx("button",{onClick:()=>y("payment"),className:"checkout-btn",children:"Continuar"})]})]}),h==="payment"&&p.jsx(I6,{onSelect:Y,onBack:()=>y("cart"),total:o}),h==="customer"&&p.jsx(O6,{onSubmit:ne,loading:E,paymentMethod:g,onBack:()=>y("payment")}),h==="bankinfo"&&L&&p.jsx(Z6,{bankInfo:{bankName:"Banco Santander",accountType:"Cuenta Corriente",accountNumber:"123-456789-0",cbu:"0720123188000041234567",alias:"RESTAURANT.ALIAS",holderName:"Restaurante Demo",holderDni:"12.345.678"},totalAmount:L.total,orderNumber:L.orderId,onConfirm:N,onCancel:O,whatsappNumber:"+54 9 11 1234-5678"})]})]})},J6=({cart:r,addToCart:e,updateQuantity:n,removeFromCart:a,clearCart:o,total:u,itemCount:d,firebaseManager:h})=>{const y=U.useRef(null),g=U.useRef(null),[b,E]=U.useState(!1),[R,D]=U.useState(null),B=()=>typeof window<"u"&&window.innerWidth<=768,L=GC.getInstance(Wt.firebaseConfig,Wt.businessId),{menu:z,loading:F,error:Y}=n1(L),ne=Op,re=N=>{D(N)},V=R&&z?z.filter(N=>N.name.toLowerCase()===R.toLowerCase()):z,q=Array.isArray(z)?z.map(N=>({id:N.id||N.name,name:N.name})):[];return p.jsxs("section",{id:"menu",className:"menu-section store-catalog",ref:y,children:[p.jsxs("div",{className:"container",children:[p.jsx("div",{className:"menu-header",style:{justifyContent:"center"},children:p.jsxs("h2",{className:"section-title",ref:g,style:{textAlign:"center",width:"100%"},children:[p.jsx(eo,{})," ",ne.menuNameCapitalized]})}),B()?p.jsx(N6,{categories:q,selected:R,onSelect:re}):p.jsx(C6,{menu:z,onCategorySelect:re,selectedCategory:R}),R&&p.jsxs("div",{className:"category-filter-status",children:[p.jsxs("span",{className:"filter-text",children:["Mostrando: ",p.jsx("strong",{children:R})]}),p.jsx("button",{className:"clear-filter-btn",onClick:()=>D(null),children:"Ver todas las categorías"})]}),p.jsx(HC,{menu:V,loading:F,error:Y,onAddToCart:e,showImages:!0,showPrices:!0,showDescription:!0,terminology:ne,businessId:Wt.businessId,enableRealTimeStock:!0,db:L==null?void 0:L.db})]}),b&&p.jsx("div",{className:"cart-overlay",onClick:N=>N.target.classList.contains("cart-overlay")&&E(!1),children:p.jsx(Dp,{cart:r,updateQuantity:n,removeFromCart:a,clearCart:o,total:u,onClose:()=>E(!1),firebaseManager:h})})]})},e3=()=>{const r=U.useRef(null),e=U.useRef(null),n=U.useRef(null),a=U.useRef(null);return p.jsx("section",{ref:r,className:"location section",id:"location",children:p.jsxs("div",{className:"container",children:[p.jsx("h2",{ref:e,className:"section-title",children:"Encontranos:"}),p.jsxs("div",{className:"location-content",children:[p.jsxs("div",{ref:n,className:"location-info",children:[p.jsxs("div",{className:"info-item",children:[p.jsx(xp,{className:"info-icon"}),p.jsxs("div",{children:[p.jsx("h3",{children:"Dirección"}),p.jsxs("p",{children:["123 Main Street",p.jsx("br",{}),"Downtown, City"]})]})]}),p.jsxs("div",{className:"info-item",children:[p.jsx(bC,{className:"info-icon"}),p.jsxs("div",{children:[p.jsx("h3",{children:"Horarios"}),p.jsxs("p",{children:["Lunes a domingo",p.jsx("br",{}),"11:00 AM - 11:00 PM"]})]})]}),p.jsxs("div",{className:"info-item",children:[p.jsx(AC,{className:"info-icon"}),p.jsxs("div",{children:[p.jsx("h3",{children:"Contacto"}),p.jsx("p",{children:"+54 11 1123-4567"})]})]}),p.jsxs("div",{className:"info-item",children:[p.jsx(Jb,{className:"info-icon"}),p.jsxs("div",{children:[p.jsx("h3",{children:"Síguenos"}),p.jsx("p",{children:"@restaurant"})]})]})]}),p.jsx("div",{ref:a,className:"location-map",style:{width:"100%",height:"100%"},children:p.jsx("iframe",{title:"Ubicación en Google Maps",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d105558.2618251795!2d-58.955988950000005!3d-34.23078795!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95bb723060430bad%3A0xaa31c9f685c849bf!2sCampana%2C%20Provincia%20de%20Buenos%20Aires!5e0!3m2!1ses-419!2sar!4v1750823038951!5m2!1ses-419!2sar",width:"100%",height:"400",style:{border:0,width:"100%",height:400},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})]})})},t3=()=>{const r=U.useRef(null),e=U.useRef(null),n=U.useRef(null),[a,o]=U.useState({name:"",email:"",phone:"",message:""}),u=h=>{o({...a,[h.target.name]:h.target.value})},d=h=>{h.preventDefault();let y=`¡Hola! Me gustaría hacer una consulta:

`;y+=`👤 *Nombre:* ${a.name}
`,y+=`📞 *Teléfono:* ${a.phone}
`,y+=`📧 *Email:* ${a.email}

`,a.message.trim()&&(y+=`💬 *Mensaje:*
${a.message}

`),y+="¡Gracias!";const g="5493492648488",b=encodeURIComponent(y),E=`https://wa.me/${g}?text=${b}`;window.open(E,"_blank"),console.log("Form data:",a),console.log("WhatsApp message:",y)};return p.jsx("section",{ref:r,className:"contact section",id:"contact",children:p.jsxs("div",{className:"container",children:[p.jsx("h2",{ref:e,className:"section-title",children:"Contáctanos"}),p.jsxs("div",{className:"contact-content",children:[p.jsxs("div",{className:"contact-info",children:[p.jsx("h3",{children:"¿Tienes alguna consulta?"}),p.jsx("p",{children:"Completa el formulario y te responderemos por WhatsApp."})]}),p.jsxs("form",{ref:n,className:"contact-form",onSubmit:d,children:[p.jsx("div",{className:"form-group",children:p.jsx("input",{type:"text",name:"name",placeholder:"Nombre completo",value:a.name,onChange:u,required:!0})}),p.jsx("div",{className:"form-group",children:p.jsx("input",{type:"tel",name:"phone",placeholder:"Teléfono",value:a.phone,onChange:u,required:!0})}),p.jsx("div",{className:"form-group",children:p.jsx("input",{type:"email",name:"email",placeholder:"Email",value:a.email,onChange:u,required:!0})}),p.jsx("div",{className:"form-group",children:p.jsx("textarea",{name:"message",placeholder:"Tu mensaje",rows:"4",value:a.message,onChange:u,required:!0})}),p.jsxs("button",{type:"submit",className:"btn-whatsapp",children:[p.jsx(e2,{className:"whatsapp-icon"}),"Enviar por WhatsApp"]})]})]})]})})},n3=({value:r,onChange:e,placeholder:n="Buscar productos..."})=>p.jsxs("div",{className:"search-bar-container",children:[p.jsx("input",{type:"text",className:"search-bar-input",value:r,onChange:a=>e(a.target.value),placeholder:n,"aria-label":"Buscar"}),p.jsx(xC,{className:"search-bar-icon"})]}),_2=U.createContext(),Tf=()=>{const r=U.useContext(_2);if(!r)throw new Error("useMenu must be used within a MenuProvider");return r},r3=({children:r})=>{const[e,n]=U.useState([]),[a,o]=U.useState(null),[u,d]=U.useState(!0),[h,y]=U.useState(null),[g,b]=U.useState(!1),[E,R]=U.useState(null);U.useEffect(()=>{(async()=>{try{d(!0),y(null),console.log("🔥 Initializing Firebase connection...");const ne=Np(Wt.firebaseConfig,Wt.businessId);R(ne);let re=null;try{re=await ne.getRestaurantInfo(),o(re),console.log("✅ Business info loaded successfully")}catch(q){console.warn("⚠️ Business info not found, but continuing with menu data:",q.message),o({businessId:Wt.businessId,name:"Mi Negocio",businessType:"restaurant",isActive:!0})}b(!0),console.log("✅ Firebase connected successfully");const V=await ne.getFullMenu();n(V),console.log("✅ Menu data loaded:",V.length,"categories")}catch(ne){console.error("❌ Firebase connection failed:",ne),y(ne.message),b(!1)}finally{d(!1)}})()},[]);const D=async()=>{if(E)try{d(!0);const Y=await E.getFullMenu();n(Y),y(null)}catch(Y){y(Y.message)}finally{d(!1)}},B=async Y=>{if(!E)throw new Error("Firebase SDK not initialized");if(!g)throw new Error("No connection to Firebase");try{console.log("🔄 Creating order with data:",Y);const ne=await E.createOrder(Y);return console.log("✅ Order created successfully:",ne),ne}catch(ne){throw console.error("❌ Error creating order:",ne),new Error(`Failed to create order: ${ne.message}`)}},L=async(Y,ne,re=null)=>{if(!E)throw new Error("Firebase SDK not initialized");if(!g)throw new Error("No connection to Firebase");try{await E.updateOrderStatus(Y,ne,re)}catch(V){throw console.error("❌ Error updating order status:",V),new Error(`Failed to update order status: ${V.message}`)}},z=async Y=>{if(!E)throw new Error("Firebase SDK not initialized");if(!g)throw new Error("No connection to Firebase");try{return await E.getOrder(Y)}catch(ne){throw console.error("❌ Error getting order:",ne),new Error(`Failed to get order: ${ne.message}`)}},F={menu:e,restaurantInfo:a,isLoading:u,error:h,isConnected:g,refetchMenu:D,sdk:E,firebaseManager:E==null?void 0:E.firebaseManager,createOrder:B,updateOrderStatus:L,getOrder:z};return p.jsx(_2.Provider,{value:F,children:r})},i3=r=>Array.isArray(r)?r.flatMap(e=>(e.items||[]).map(n=>({...n,category:e.name}))):[],a3=r=>Array.isArray(r)?r.map(e=>({id:e.id||e.name,name:e.name,type:"category"})):[],k_=()=>{var B;const r=Kl(),{menu:e}=r1(Wt);let n=null;try{n=(B=Tf())==null?void 0:B.setSelectedCategory}catch{}const[a,o]=U.useState(""),[u,d]=U.useState(!1),h=U.useRef(),y=U.useRef(),g=U.useMemo(()=>i3(e),[e]),b=U.useMemo(()=>a3(e),[e]),{categoryResults:E,productResults:R}=U.useMemo(()=>{if(!a.trim())return{categoryResults:[],productResults:[]};const L=a.toLowerCase(),z=a.length>=3?b.filter(Y=>Y.name&&Y.name.toLowerCase().includes(L)).slice(0,3):[],F=g.filter(Y=>Y.name&&Y.name.toLowerCase().includes(L)||Y.description&&Y.description.toLowerCase().includes(L)).slice(0,8);return{categoryResults:z,productResults:F}},[a,g,b]);U.useEffect(()=>{d(!!a)},[a]),U.useEffect(()=>{const L=z=>{h.current&&!h.current.contains(z.target)&&y.current&&!y.current.contains(z.target)&&d(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const D=L=>{if(o(""),d(!1),L.type==="category"){const z=document.getElementById("menu");if(z){const F=z.querySelector(".clear-filter-btn");F&&F.click()}setTimeout(()=>{const F=document.getElementById(`category-${L.id}`);if(F)F.scrollIntoView({behavior:"smooth",block:"start"});else{const Y=document.getElementById("menu");Y&&Y.scrollIntoView({behavior:"smooth"})}},200)}else r(`/producto/${L.id}`)};return p.jsxs("div",{className:"product-search-container",style:{minWidth:0,width:"100%"},children:[p.jsx("div",{ref:h,style:{width:"100%"},children:p.jsx(n3,{value:a,onChange:o,placeholder:"Buscar productos o categorías..."})}),p.jsx("div",{style:{position:"relative",width:"100%"},children:u&&a&&p.jsxs("div",{ref:y,children:[E.length>0&&p.jsx("ul",{className:"search-results-list",children:E.map(L=>p.jsxs("li",{className:"search-result-item search-result-category",onClick:()=>D(L),children:[p.jsx("span",{className:"result-name",children:L.name}),p.jsx("span",{className:"result-category-label",children:"Categoría"})]},L.id))}),R.length>0&&p.jsx("ul",{className:"search-results-list",children:R.map(L=>p.jsxs("li",{className:"search-result-item",onClick:()=>D(L),children:[p.jsx("span",{className:"result-name",children:L.name}),L.category&&p.jsxs("span",{className:"result-category",children:["(",L.category,")"]})]},L.id))}),E.length===0&&R.length===0&&p.jsx("div",{className:"no-results",children:"No se encontraron resultados."})]})})]})},b2=({onCartClick:r,itemCount:e,hideMainNavLinks:n,hideNavLinks:a})=>{const[o,u]=U.useState("home"),[d,h]=U.useState(!1),[y,g]=U.useState(!1),[b,E]=U.useState(!1);U.useEffect(()=>{const D=()=>{g(window.innerWidth>1024)};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),U.useEffect(()=>{const D=()=>{const B=window.innerHeight,L=window.scrollY;h(L>B*.8||y);const F=["home","menu","location","contact"].find(Y=>{const ne=document.getElementById(Y);if(ne){const re=ne.getBoundingClientRect();return re.top<=window.innerHeight/2&&re.bottom>=window.innerHeight/2}return!1});F&&u(F)};return window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)},[y]);const R=[{id:"home",icon:EC,label:"Inicio"},{id:"menu",icon:t2,label:"Productos"},{id:"location",icon:xp,label:"Ubicación"},{id:"contact",icon:i2,label:"Contacto"}];return p.jsxs("nav",{className:"navbar-modern",children:[p.jsxs("div",{className:"navbar-modern-container",children:[p.jsxs(Ft,{to:"/",className:"navbar-modern-logo",children:[p.jsx(eo,{className:"navbar-modern-logo-icon"}),"Digital Store"]}),p.jsx("div",{className:"navbar-modern-menu",children:!n&&!a&&R.map(({id:D,icon:B,label:L})=>p.jsxs("a",{href:`#${D}`,className:"navbar-modern-link",onClick:z=>{z.preventDefault();const F=document.getElementById(D);F&&F.scrollIntoView({behavior:"smooth"})},children:[p.jsx(B,{className:"navbar-modern-link-icon"})," ",L]},D))}),p.jsxs("div",{className:"navbar-modern-actions",children:[p.jsx("div",{className:"navbar-modern-search-desktop",children:p.jsx(k_,{})}),p.jsxs("a",{href:"#",className:"navbar-modern-cart",onClick:r,children:[p.jsx(RC,{className:"navbar-modern-cart-icon"})," Carrito",e>0&&p.jsx("span",{className:"navbar-modern-cart-badge",children:e})]}),p.jsx("button",{className:"navbar-modern-mobile-btn",onClick:()=>E(D=>!D),children:p.jsx(vC,{className:"navbar-modern-mobile-icon"})})]})]}),b&&p.jsxs("div",{className:"navbar-modern-mobile-menu",children:[p.jsx("div",{className:"navbar-modern-search-mobile",children:p.jsx(k_,{})}),p.jsx("div",{className:"navbar-modern-mobile-links",children:!n&&!a&&R.map(({id:D,icon:B,label:L})=>p.jsxs("a",{href:`#${D}`,className:"navbar-modern-link",onClick:z=>{z.preventDefault();const F=document.getElementById(D);F&&F.scrollIntoView({behavior:"smooth"}),E(!1)},children:[p.jsx(B,{className:"navbar-modern-link-icon"})," ",L]},D))})]})]})},s3=()=>{const{isConnected:r,isLoading:e,error:n}=Tf();return e?p.jsxs("div",{style:{position:"fixed",top:10,right:10,background:"#f39c12",color:"white",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",zIndex:1e3},children:[p.jsx(OC,{style:{marginRight:6}})," Conectando a Firebase..."]}):n?p.jsxs("div",{style:{position:"fixed",top:10,right:10,background:"#e74c3c",color:"white",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",zIndex:1e3},children:[p.jsx(l2,{style:{marginRight:6}})," Error: ",n]}):r?p.jsxs("div",{style:{position:"fixed",top:10,right:10,background:"#27ae60",color:"white",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",zIndex:1e3},children:[p.jsx(n2,{style:{marginRight:6}})," Conectado a Firebase"]}):null},o3=()=>{document.documentElement.style.overflowX="hidden",document.body.style.overflowX="hidden",document.querySelectorAll("*").forEach(e=>{const n=window.getComputedStyle(e);(n.position==="absolute"||n.position==="fixed")&&(e.style.maxWidth="100vw")})},P_=()=>{/iPad|iPhone|iPod/.test(navigator.userAgent)&&document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], textarea').forEach(e=>{e.addEventListener("focus",()=>{e.style.fontSize="16px"})}),o3(),document.body.style.touchAction="pan-y"};function l3(){const{isConnected:r,error:e}=Tf(),[n,a]=U.useState(!1),{cart:o,addToCart:u,updateQuantity:d,removeFromCart:h,clearCart:y,total:g,itemCount:b,firebaseManager:E,cartTotal:R,cartCount:D}=r1(Wt,{enabled:!0}),B=g||R||0,L=b||D||0,z=()=>{a(!0)};return U.useEffect(()=>{P_();const F=()=>{P_()};return window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),p.jsxs("div",{className:"App",children:[p.jsx(s3,{}),e&&p.jsxs("div",{style:{background:"#ffebee",color:"#c62828",padding:"1rem",margin:"1rem",borderRadius:"4px",textAlign:"center"},children:["Error de conexión: ",e]}),p.jsx(LC,{}),p.jsx(J6,{cart:o,addToCart:u,updateQuantity:d,removeFromCart:h,clearCart:y,total:B,itemCount:L,firebaseManager:E}),p.jsx(e3,{}),p.jsx(t3,{}),p.jsx(zC,{}),p.jsx(b2,{onCartClick:z,itemCount:L}),n&&p.jsx("div",{className:"cart-overlay",onClick:F=>F.target.classList.contains("cart-overlay")&&a(!1),children:p.jsx(Dp,{cart:o,updateQuantity:d,removeFromCart:h,clearCart:y,total:B,onClose:()=>a(!1),firebaseManager:E})})]})}const u3=()=>{var E;const[r]=io(),[e,n]=U.useState(null),[a,o]=U.useState(!0),[u,d]=U.useState(null),h=r.get("order")||r.get("external_reference"),y=r.get("payment_id"),g=r.get("status"),b=r.get("collection_status");return U.useEffect(()=>{(async()=>{if(console.log("🔍 PaymentSuccess: Starting with params:",{orderId:h,paymentId:y,status:g,collectionStatus:b,allSearchParams:Object.fromEntries(r.entries()),currentURL:window.location.href,currentPath:window.location.pathname,shouldBeOnSuccessPage:"✅ IF YOU SEE THIS, PAYMENT WAS SUPPOSED TO SUCCEED"}),!h){console.error("❌ PaymentSuccess: No orderId found in URL params"),console.log("Available search params:",Object.fromEntries(r.entries())),d("No se encontró el ID del pedido"),o(!1);return}console.log("✅ PaymentSuccess: Processing approved payment"),console.log("Payment verification passed - staying on success page");try{console.log("💳 Processing successful payment for order:",h),console.log("📄 Payment details:",{paymentId:y,status:g,collectionStatus:b}),await It.initializeForPayment();const D=It.getDatabase(),B=gn(D,"orders",h),L=await Xn(B);if(L.exists()){const z={id:L.id,...L.data()};console.log("📋 Order data found:",z),n(z),z.paymentStatus!=="paid"?(console.log("✅ Updating order payment status to paid"),await Ef(B,{paymentStatus:"paid",status:"confirmed",paymentId:y,updatedAt:Js(),mercadopagoData:{payment_id:y,status:g,collection_status:b,processed_at:Js()}}),n(F=>({...F,paymentStatus:"paid",status:"confirmed",paymentId:y}))):console.log("✅ Order already marked as paid")}else console.error("❌ PaymentSuccess: Order not found in Firestore:",h),d("Pedido no encontrado en la base de datos")}catch(D){console.error("❌ Error loading/updating order:",D),d("Error al procesar el pedido")}finally{o(!1)}})()},[h,y,g,b]),a?p.jsx("div",{className:"payment-result",children:p.jsxs("div",{className:"loading",children:[p.jsx("h2",{children:"✅ Procesando Pago Exitoso"}),p.jsx("p",{children:"Verificando el estado de tu pedido..."}),p.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"4px",fontSize:"0.9rem",fontFamily:"monospace"},children:[p.jsx("div",{children:p.jsx("strong",{children:"Debug Info:"})}),p.jsxs("div",{children:["URL: ",window.location.href]}),p.jsxs("div",{children:["Order ID: ",h||"NOT FOUND"]}),p.jsxs("div",{children:["Payment ID: ",y||"NOT FOUND"]}),p.jsxs("div",{children:["Status: ",g||"NOT FOUND"]}),p.jsxs("div",{children:["Collection Status: ",b||"NOT FOUND"]})]})]})}):u?p.jsx("div",{className:"payment-result",children:p.jsxs("div",{className:"error",children:[p.jsx("h2",{children:"❌ Error"}),p.jsx("p",{children:u}),p.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"4px",fontSize:"0.9rem",fontFamily:"monospace"},children:[p.jsx("div",{children:p.jsx("strong",{children:"Debug Info:"})}),p.jsxs("div",{children:["URL: ",window.location.href]}),p.jsxs("div",{children:["Order ID: ",h||"NOT FOUND"]}),p.jsxs("div",{children:["Payment ID: ",y||"NOT FOUND"]}),p.jsxs("div",{children:["Status: ",g||"NOT FOUND"]}),p.jsxs("div",{children:["Collection Status: ",b||"NOT FOUND"]})]}),p.jsx(Ft,{to:"/",className:"btn",children:"Volver al inicio"})]})}):p.jsx("div",{className:"payment-result payment-success",children:p.jsxs("div",{className:"success-content",children:[p.jsx("div",{className:"success-icon",children:"✅"}),p.jsx("h1",{children:"¡Pago Exitoso!"}),p.jsx("p",{children:"Tu pago ha sido procesado correctamente"}),e&&p.jsxs("div",{className:"order-details",children:[p.jsx("h3",{children:"Detalles del Pedido"}),p.jsxs("div",{className:"order-info",children:[p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Número de pedido:"}),p.jsx("span",{children:e.id})]}),p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Total pagado:"}),p.jsxs("span",{children:["$",(E=e.total)==null?void 0:E.toFixed(2)," ARS"]})]}),p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Estado del pago:"}),p.jsx("span",{style:{color:"#28a745",fontWeight:"bold"},children:"✅ Pagado"})]}),p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Estado del pedido:"}),p.jsx("span",{style:{color:"#28a745",fontWeight:"bold"},children:"✅ Confirmado"})]}),y&&p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"ID de pago:"}),p.jsx("span",{children:y})]})]}),e.items&&e.items.length>0&&p.jsxs("div",{className:"order-items",children:[p.jsx("h4",{children:"Items del pedido:"}),e.items.map((R,D)=>p.jsxs("div",{className:"order-info-item",children:[p.jsxs("span",{children:[R.name," x",R.quantity]}),p.jsxs("span",{children:["$",((R.unit_price||R.price)*R.quantity).toFixed(2)]})]},D))]}),e.customer&&p.jsxs("div",{className:"customer-info",children:[p.jsx("h4",{children:"Información de contacto:"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Nombre:"})," ",e.customer.name]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Teléfono:"})," ",e.customer.phone]}),e.customer.email&&p.jsxs("p",{children:[p.jsx("strong",{children:"Email:"})," ",e.customer.email]}),e.customer.address&&p.jsxs("p",{children:[p.jsx("strong",{children:"Dirección:"})," ",e.customer.address]})]})]}),p.jsxs("div",{className:"next-steps",children:[p.jsx("h3",{children:"¿Qué sigue?"}),p.jsx("p",{children:"• Te contactaremos por WhatsApp para coordinar la entrega"}),p.jsx("p",{children:"• Recibirás una confirmación por email"}),p.jsx("p",{children:"• Prepararemos tu pedido lo antes posible"})]}),p.jsxs("div",{className:"action-buttons",children:[p.jsx(Ft,{to:"/",className:"btn btn-primary",children:"Volver al menú"}),h&&p.jsx(Ft,{to:`/estado-pedido?orderId=${h}`,className:"btn btn-secondary",children:"Ver estado del pedido"})]})]})})},c3=()=>{var E;const[r]=io(),[e,n]=U.useState(null),[a,o]=U.useState(!0),[u,d]=U.useState(null),h=r.get("order")||r.get("external_reference"),y=r.get("payment_id"),g=r.get("status"),b=r.get("collection_status");return U.useEffect(()=>{(async()=>{if(console.log("🔍 PaymentPending: Starting with params:",{orderId:h,paymentId:y,status:g,collectionStatus:b,allSearchParams:Object.fromEntries(r.entries())}),!h){console.error("❌ PaymentPending: No orderId found"),d("No se encontró el ID del pedido"),o(!1);return}if(g==="approved"||b==="approved"){console.warn("⚠️ PaymentPending: Payment approved, redirecting to success page"),alert("¡Tu pago fue aprobado! Te redirigiremos a la página de confirmación."),window.location.href=`/restaurant_template/payment/success?order=${h}&payment_id=${y}&status=${g}&collection_status=${b}`;return}if(g==="rejected"||g==="cancelled"||b==="rejected"||b==="cancelled"){console.warn("⚠️ PaymentPending: Payment failed, redirecting to failure page"),window.location.href=`/restaurant_template/payment/failure?order=${h}&payment_id=${y}&status=${g}&collection_status=${b}`;return}try{await It.initializeForPayment();const D=It.getDatabase(),B=gn(D,"orders",h),L=await Xn(B);if(L.exists()){const z=L.data();if(z.paymentStatus==="paid"||z.status==="confirmed"){console.warn("🔄 Payment was actually successful according to Firebase, redirecting..."),alert("¡Tu pago fue procesado exitosamente! Te redirigiremos a la página correcta."),window.location.href=`/restaurant_template/payment/success?order=${h}&payment_id=${y}`;return}if(z.paymentStatus==="failed"||z.status==="payment_failed"){console.warn("🔄 Payment failed according to Firebase, redirecting..."),window.location.href=`/restaurant_template/payment/failure?order=${h}&payment_id=${y}`;return}}}catch(D){console.warn("⚠️ Could not verify payment status from Firebase:",D)}try{console.log("[Pending] Processing pending payment for order:",h),console.log("📄 Payment details:",{paymentId:y,status:g,collectionStatus:b}),await It.initializeForPayment();const D=It.getDatabase(),B=gn(D,"orders",h),L=await Xn(B);if(L.exists()){const z={id:L.id,...L.data()};console.log("📋 Order data found:",z),n(z),y&&z.paymentId!==y?(console.log("⏳ Updating order with pending payment info"),await Ef(B,{paymentStatus:"pending",paymentId:y,updatedAt:Js(),mercadopagoData:{payment_id:y,status:g,collection_status:b,processed_at:Js()}}),n(F=>({...F,paymentStatus:"pending",paymentId:y}))):console.log("⏳ No update needed for pending payment")}else console.error("❌ PaymentPending: Order not found in Firestore:",h),d("Pedido no encontrado")}catch(D){console.error("❌ Error loading/updating order:",D),d("Error al procesar el pedido")}finally{o(!1)}})()},[h,y,g,b]),a?p.jsx("div",{className:"payment-result",children:p.jsx("div",{className:"loading",children:"Cargando..."})}):u?p.jsx("div",{className:"payment-result",children:p.jsxs("div",{className:"error",children:[p.jsx("h2",{children:"❌ Error"}),p.jsx("p",{children:u}),p.jsx(Ft,{to:"/",className:"btn",children:"Volver al inicio"})]})}):p.jsx("div",{className:"payment-result payment-pending",children:p.jsxs("div",{className:"pending-content",children:[p.jsx("div",{className:"pending-icon",children:"⏳"}),p.jsx("h1",{children:"Pago Pendiente"}),p.jsx("p",{children:"Tu pago está siendo procesado"}),e&&p.jsxs("div",{className:"order-details",children:[p.jsx("h3",{children:"Detalles del Pedido"}),p.jsxs("div",{className:"order-info",children:[p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Número de pedido:"}),p.jsx("span",{children:e.id})]}),p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Total:"}),p.jsxs("span",{children:["$",(E=e.total)==null?void 0:E.toFixed(2)," ARS"]})]}),p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Estado del pago:"}),p.jsx("span",{style:{color:"#ffc107",fontWeight:"bold"},children:"⏳ Pendiente"})]}),y&&p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"ID de pago:"}),p.jsx("span",{children:y})]})]})]}),p.jsxs("div",{className:"next-steps",children:[p.jsx("h3",{children:"¿Qué hacer ahora?"}),p.jsx("p",{children:"• Tu pago está siendo verificado"}),p.jsx("p",{children:"• Recibirás una notificación cuando se confirme"}),p.jsx("p",{children:"• Puedes contactarnos si tienes dudas"})]}),p.jsxs("div",{className:"action-buttons",children:[p.jsx(Ft,{to:"/",className:"btn btn-primary",children:"Volver al menú"}),p.jsx(Ft,{to:`/estado-pedido?orderId=${h}`,className:"btn btn-secondary",children:"Ver estado del pedido"})]})]})})},f3=({onClose:r})=>{const[e,n]=U.useState(!1);return U.useEffect(()=>{const a=setTimeout(()=>n(!0),500);return()=>clearTimeout(a)},[]),e?p.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",background:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"8px",padding:"1rem",maxWidth:"400px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3,animation:"slideIn 0.3s ease-out"},children:p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[p.jsxs("div",{children:[p.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#856404"},children:"⚠️ ¿Problema con el pago?"}),p.jsxs("p",{style:{margin:"0",fontSize:"0.9rem",color:"#856404"},children:["Si ves esta página de error pero tu pago fue exitoso, ",p.jsx("strong",{children:"no te preocupes"}),". Tu pedido fue procesado correctamente. Contactanos para confirmar."]}),p.jsx("div",{style:{marginTop:"0.5rem"},children:p.jsx("a",{href:"https://wa.me/1234567890",target:"_blank",rel:"noopener noreferrer",style:{background:"#25d366",color:"white",textDecoration:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",display:"inline-block"},children:"📱 WhatsApp"})})]}),p.jsx("button",{onClick:r,style:{background:"none",border:"none",fontSize:"1.2rem",cursor:"pointer",color:"#856404"},children:"×"})]})}):null},d3=()=>{var D;const[r]=io(),[e,n]=U.useState(null),[a,o]=U.useState(!0),[u,d]=U.useState(null),[h,y]=U.useState(!0),g=r.get("order")||r.get("external_reference"),b=r.get("payment_id"),E=r.get("status"),R=r.get("collection_status");return U.useEffect(()=>{(async()=>{if(console.log("🔍 PaymentFailure: Starting with params:",{orderId:g,paymentId:b,status:E,collectionStatus:R,allSearchParams:Object.fromEntries(r.entries()),currentURL:window.location.href,currentPath:window.location.pathname,shouldBeOnFailurePage:"❌ IF YOU SEE THIS, PAYMENT WAS SUPPOSED TO FAIL"}),E==="approved"||R==="approved"){console.error("🚨 ROUTING ERROR: Successful payment redirected to failure page!"),console.log("This should NOT happen. Payment details:",{status:E,collectionStatus:R}),console.log("Redirecting to correct success page..."),alert("¡Tu pago fue exitoso! Te redirigiremos a la página correcta."),window.location.href=`/restaurant_template/payment/success?order=${g}&payment_id=${b}&status=${E}&collection_status=${R}`;return}try{await It.initializeForPayment();const L=It.getDatabase(),z=gn(L,"orders",g),F=await Xn(z);if(F.exists()){const Y=F.data();if(Y.paymentStatus==="paid"||Y.status==="confirmed"){console.warn("🔄 Payment was actually successful according to Firebase, redirecting..."),alert("¡Tu pago fue procesado exitosamente! Te redirigiremos a la página correcta."),window.location.href=`/restaurant_template/payment/success?order=${g}&payment_id=${b}`;return}}}catch(L){console.warn("⚠️ Could not verify payment status from Firebase:",L)}if(!g){console.error("❌ PaymentFailure: No orderId found in URL params"),console.log("Available search params:",Object.fromEntries(r.entries())),d("No se encontró el ID del pedido"),o(!1);return}console.log("❌ PaymentFailure: Processing failed payment"),console.log("Payment verification passed - staying on failure page");try{console.log("❌ Processing failed payment for order:",g),console.log("📄 Payment details:",{paymentId:b,status:E,collectionStatus:R}),await It.initializeForPayment();const L=It.getDatabase(),z=gn(L,"orders",g),F=await Xn(z);if(F.exists()){const Y={id:F.id,...F.data()};console.log("📋 Order data found:",Y),n(Y),Y.paymentStatus!=="failed"?(console.log("❌ Updating order payment status to failed"),await Ef(z,{paymentStatus:"failed",status:"payment_failed",paymentId:b,updatedAt:Js(),mercadopagoData:{payment_id:b,status:E,collection_status:R,processed_at:Js()}}),n(ne=>({...ne,paymentStatus:"failed",status:"payment_failed",paymentId:b}))):console.log("⚠️ Order already marked as failed")}else console.error("❌ PaymentFailure: Order not found in Firestore:",g),d("Pedido no encontrado")}catch(L){console.error("❌ Error loading/updating order:",L),d("Error al procesar el pedido")}finally{o(!1)}})()},[g,b,E,R]),a?p.jsx("div",{className:"payment-result",children:p.jsxs("div",{className:"loading",children:[p.jsx("h2",{children:"Cargando resultado del pago..."}),p.jsx("p",{children:"Verificando el estado de tu pedido..."}),p.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"4px",fontSize:"0.9rem",fontFamily:"monospace"},children:[p.jsx("strong",{children:"Debug Info:"}),p.jsx("br",{}),"URL: ",window.location.href,p.jsx("br",{}),"Order ID: ",g||"NOT FOUND",p.jsx("br",{}),"Status: ",E||"NOT FOUND",p.jsx("br",{}),"Collection Status: ",R||"NOT FOUND",p.jsx("br",{}),"Payment ID: ",b||"NOT FOUND"]})]})}):u?p.jsx("div",{className:"payment-result",children:p.jsxs("div",{className:"error",children:[p.jsx("h2",{children:"❌ Error"}),p.jsx("p",{children:u}),p.jsx(Ft,{to:"/",className:"btn",children:"Volver al inicio"})]})}):p.jsxs("div",{className:"payment-result payment-failure",children:[h&&p.jsx(f3,{onClose:()=>y(!1)}),p.jsxs("div",{className:"failure-content",children:[p.jsx("div",{className:"failure-icon",children:"❌"}),p.jsx("h1",{children:"Pago No Completado"}),p.jsx("p",{children:"Hubo un problema al procesar tu pago"}),e&&p.jsxs("div",{className:"order-details",children:[p.jsx("h3",{children:"Detalles del Pedido"}),p.jsxs("div",{className:"order-info",children:[p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Número de pedido:"}),p.jsx("span",{children:e.id})]}),p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Total:"}),p.jsxs("span",{children:["$",(D=e.total)==null?void 0:D.toFixed(2)," ARS"]})]}),p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"Estado del pago:"}),p.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:"❌ Falló"})]}),b&&p.jsxs("div",{className:"order-info-item",children:[p.jsx("span",{children:"ID de pago:"}),p.jsx("span",{children:b})]})]})]}),p.jsxs("div",{className:"next-steps",children:[p.jsx("h3",{children:"¿Qué puedes hacer?"}),p.jsxs("div",{style:{background:"#d1ecf1",border:"1px solid #bee5eb",borderRadius:"6px",padding:"1rem",marginBottom:"1rem",color:"#0c5460"},children:[p.jsx("strong",{children:"📝 IMPORTANTE:"})," Si realizaste el pago y recibes esta página de error, tu pago ",p.jsx("strong",{children:"SÍ fue procesado correctamente"}),". Esta es una página de error falsa debido a un problema de redirección. Tu pedido está confirmado y lo prepararemos."]}),p.jsx("p",{children:"• Intentar el pago nuevamente solo si estás seguro de que falló"}),p.jsx("p",{children:"• Verificar los datos de tu tarjeta"}),p.jsx("p",{children:"• Contactarnos para confirmar tu pedido"}),p.jsx("p",{children:"• Pagar en efectivo al retirar"})]}),p.jsxs("div",{className:"action-buttons",children:[p.jsx(Ft,{to:"/",className:"btn btn-primary",children:"Volver al menú"}),p.jsx(Ft,{to:"/",className:"btn btn-warning",children:"Intentar nuevamente"}),p.jsx(Ft,{to:`/estado-pedido?orderId=${g}`,className:"btn btn-secondary",children:"Ver estado del pedido"})]})]})]})},V_=()=>{const[r]=io(),[e,n]=U.useState(null),[a,o]=U.useState(!0),[u,d]=U.useState(null),[h,y]=U.useState(null),[g,b]=U.useState(!1),E=U.useRef(null),R=r.get("orderId")||r.get("order");U.useEffect(()=>{if(!R){d("No se proporcionó ID de pedido"),o(!1),b(!1);return}o(!0),d(null),n(null),b(!1);let z=!1;return(async()=>{try{console.log("🔄 Initializing Firebase for OrderStatus listener..."),await It.initializeForPayment(),z=!0;const Y=It.getDatabase();console.log("👂 Setting up Firestore listener for order:",R);const ne=gn(Y,"orders",R);E.current&&(console.log("🧹 Unsubscribing previous listener."),E.current()),E.current=Vb(ne,re=>{if(re.exists()){const V={id:re.id,...re.data()};console.log("🔔 Real-time update for order:",V),n(V),d(null),y(new Date),b(!0)}else console.error("❌ Order not found with listener:",R),d("Pedido no encontrado"),n(null),b(!1);o(!1)},re=>{console.error("❌ Firestore listener error:",re),d("Error al escuchar cambios del pedido: "+re.message),o(!1),b(!1)})}catch(Y){console.error("❌ Error setting up Firestore listener:",Y),d("Error al inicializar la escucha de pedidos: "+Y.message),o(!1),b(!1)}})(),()=>{console.log("🧹 Cleaning up OrderStatus listener for order:",R),E.current&&(console.log("🔪 Unsubscribing listener."),E.current(),E.current=null),z&&(console.log("🔌 Releasing Firebase manager from OrderStatus."),It.release())}},[R]);const D=(z,F)=>F==="paid"||z==="confirmed"?p.jsx(n2,{className:"status-icon",color:"#28a745"}):F==="pending"||z==="pending"?p.jsx(s2,{className:"status-icon",color:"#ffc107"}):F==="failed"||z==="payment_failed"?p.jsx(l2,{className:"status-icon",color:"#dc3545"}):p.jsx(_C,{className:"status-icon",color:"#6c757d"}),B=(z,F)=>F==="paid"||z==="confirmed"?"Confirmado":F==="pending"||z==="pending"?"Pendiente":F==="failed"||z==="payment_failed"?"Falló":"En proceso",L=(z,F)=>F==="paid"||z==="confirmed"?"#28a745":F==="pending"||z==="pending"?"#ffc107":F==="failed"||z==="payment_failed"?"#dc3545":"#6c757d";return a?p.jsx("div",{className:"order-status-page",children:p.jsx("div",{className:"order-status-container",children:p.jsxs("div",{className:"loading-state",children:[p.jsx("div",{className:"loading-icon",children:"🔄"}),p.jsx("h2",{children:"Cargando estado del pedido..."}),p.jsx("p",{children:"Obteniendo información de tu pedido en tiempo real..."})]})})}):u?p.jsx("div",{className:"order-status-page",children:p.jsx("div",{className:"order-status-container",children:p.jsxs("div",{className:"error-state",children:[p.jsx("div",{className:"error-icon",children:"❌"}),p.jsx("h2",{children:"Error"}),p.jsx("p",{children:u}),p.jsx("div",{className:"error-actions",children:p.jsx(Ft,{to:"/",className:"btn btn-secondary",children:"Volver al menú"})})]})})}):e?p.jsx("div",{className:"order-status-page",children:p.jsxs("div",{className:"order-status-container",children:[p.jsxs("div",{className:"order-header",children:[p.jsx("div",{className:"status-icon",children:D(e.status,e.paymentStatus)}),p.jsx("h1",{children:"Estado del Pedido"}),p.jsxs("div",{className:"order-id",children:[p.jsxs("span",{children:["Pedido #",e.id]}),g&&p.jsx("span",{className:"real-time-badge",children:"En tiempo real"})]})]}),p.jsxs("div",{className:"status-card",children:[p.jsxs("div",{className:"status-info",children:[p.jsx("div",{className:"status-badge",style:{backgroundColor:L(e.status,e.paymentStatus)},children:B(e.status,e.paymentStatus)}),p.jsxs("div",{className:"status-details",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Estado del pedido:"})," ",e.status||"No definido"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Estado del pago:"})," ",e.paymentStatus||"No definido"]}),e.paymentMethod&&p.jsxs("p",{children:[p.jsx("strong",{children:"Método de pago:"})," ",e.paymentMethod==="mercadopago"?"MercadoPago":"Efectivo"]})]})]}),p.jsxs("div",{className:"refresh-section",children:[h&&p.jsxs("p",{className:"last-updated",children:["Última actualización: ",h.toLocaleTimeString("es-AR")]}),!g&&!a&&p.jsx("p",{className:"real-time-badge-error",children:"Actualizaciones en tiempo real no activas"})]})]}),e.total&&p.jsxs("div",{className:"order-summary",children:[p.jsx("h3",{children:"Resumen del Pedido"}),p.jsxs("div",{className:"summary-info",children:[p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{children:"Total:"}),p.jsxs("span",{className:"total-amount",children:["$",e.total.toFixed(2)," ARS"]})]}),e.createdAt&&p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{children:"Fecha:"}),p.jsx("span",{children:new Date(e.createdAt.seconds*1e3).toLocaleString("es-AR")})]})]})]}),e.items&&e.items.length>0&&p.jsxs("div",{className:"order-items",children:[p.jsx("h3",{children:"Productos"}),p.jsx("div",{className:"items-list",children:e.items.map((z,F)=>p.jsxs("div",{className:"order-item",children:[p.jsxs("div",{className:"item-info",children:[p.jsx("span",{className:"item-name",children:z.name||z.title}),p.jsxs("span",{className:"item-quantity",children:["x",z.quantity]})]}),p.jsxs("div",{className:"item-price",children:["$",((z.unit_price||z.price)*z.quantity).toFixed(2)]})]},F))})]}),e.customer&&p.jsxs("div",{className:"customer-info",children:[p.jsx("h3",{children:"Información de Contacto"}),p.jsxs("div",{className:"contact-details",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Nombre:"})," ",e.customer.name]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Teléfono:"})," ",e.customer.phone]}),e.customer.email&&p.jsxs("p",{children:[p.jsx("strong",{children:"Email:"})," ",e.customer.email]}),e.customer.address&&p.jsxs("p",{children:[p.jsx("strong",{children:"Dirección:"})," ",e.customer.address]})]})]}),e.notes&&p.jsxs("div",{className:"order-notes",children:[p.jsx("h3",{children:"Notas Adicionales"}),p.jsx("p",{children:e.notes})]}),p.jsxs("div",{className:"next-steps",children:[p.jsx("h3",{children:"¿Qué sigue?"}),e.paymentStatus==="paid"||e.status==="confirmed"?p.jsxs("div",{className:"success-steps",children:[p.jsx("p",{children:"✅ Tu pedido ha sido confirmado"}),p.jsx("p",{children:"📞 Te contactaremos por WhatsApp para coordinar la entrega"}),p.jsx("p",{children:"🍽️ Estamos preparando tu pedido"}),p.jsxs("p",{children:[p.jsx(Rp,{})," Estamos preparando tu pedido"]})]}):e.paymentStatus==="pending"?p.jsxs("div",{className:"pending-steps",children:[p.jsx("p",{children:"⏳ Tu pago está siendo procesado"}),p.jsx("p",{children:"📧 Recibirás una confirmación cuando se apruebe"}),p.jsx("p",{children:"💬 Puedes contactarnos si tienes dudas"})]}):p.jsxs("div",{className:"failed-steps",children:[p.jsx("p",{children:"❌ Hubo un problema con el pago"}),p.jsx("p",{children:"💳 Puedes intentar nuevamente"}),p.jsx("p",{children:"📞 O contactarnos para ayuda"})]})]}),p.jsxs("div",{className:"action-buttons",children:[p.jsx(Ft,{to:"/",className:"btn btn-primary",children:"Volver al menú"}),(e.paymentStatus==="failed"||e.status==="payment_failed")&&p.jsx(Ft,{to:"/",className:"btn btn-warning",children:"Intentar de nuevo"})]})]})}):p.jsx("div",{className:"order-status-page",children:p.jsx("div",{className:"order-status-container",children:p.jsxs("div",{className:"not-found-state",children:[p.jsx("div",{className:"not-found-icon",children:"🔍"}),p.jsx("h2",{children:"Pedido no encontrado"}),p.jsxs("p",{children:["Verificando el pedido con ID: ",p.jsx("code",{children:R}),". Si existe, aparecerá en breve."]}),p.jsx(Ft,{to:"/",className:"btn btn-primary",children:"Volver al menú"})]})})})},h3=()=>{const[r]=io();return U.useEffect(()=>{const e=r.get("collection_id"),n=r.get("collection_status"),a=r.get("payment_id"),o=r.get("status"),u=r.get("external_reference"),d=r.get("payment_type"),h=r.get("merchant_order_id"),y=r.get("preference_id"),g=r.get("site_id"),b=r.get("processing_mode"),E=r.get("merchant_account_id");console.log("🔔 MercadoPago webhook parameters received:",{collection_id:e,collection_status:n,payment_id:a,status:o,external_reference:u,payment_type:d,merchant_order_id:h,preference_id:y,site_id:g,processing_mode:b,merchant_account_id:E}),console.log("📍 WebhookHandler: Current URL:",window.location.href),console.log("📍 WebhookHandler: All search params:",Object.fromEntries(r.entries()));const R=u,D="/restaurant_template",B=`&payment_id=${a||"none"}&status=${o||"none"}&collection_status=${n||"none"}&source=webhook`;o==="approved"||n==="approved"?(console.log("✅ WebhookHandler: Redirecting to SUCCESS page"),window.location.href=`${D}/payment/success?order=${R}${B}`):o==="pending"||n==="pending"?(console.log("⏳ WebhookHandler: Redirecting to PENDING page"),window.location.href=`${D}/payment/pending?order=${R}${B}`):o==="rejected"||o==="cancelled"||n==="rejected"?(console.log("❌ WebhookHandler: Redirecting to FAILURE page"),window.location.href=`${D}/payment/failure?order=${R}${B}`):(console.log("❓ WebhookHandler: Unclear status, redirecting to DEBUG page"),window.location.href=`${D}/payment/debug?order=${R}${B}`)},[r]),p.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:[p.jsx("div",{style:{fontSize:"2rem"},children:p.jsx(s2,{})}),p.jsx("p",{children:"Procesando resultado del pago..."}),p.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:"Serás redirigido automáticamente"})]})},m3=()=>{var u,d;const[r]=io(),[e,n]=U.useState({}),[a,o]=U.useState(null);return U.useEffect(()=>{(async()=>{const y=Object.fromEntries(r.entries()),g=r.get("order")||r.get("external_reference"),b={url:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,allParams:y,orderId:g,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,referrer:document.referrer};if(n(b),g)try{await It.initialize();const E=It.getDatabase(),R=gn(E,"orders",g),D=await Xn(R);D.exists()&&o({id:D.id,...D.data()})}catch(E){console.error("Error loading order:",E)}})()},[r]),p.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"monospace",fontSize:"0.9rem"},children:[p.jsx("h1",{children:"🔍 MercadoPago Payment Debug Info"}),p.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"6px",marginBottom:"2rem"},children:[p.jsx("h2",{children:"URL Information"}),p.jsx("pre",{children:JSON.stringify(e,null,2)})]}),a&&p.jsxs("div",{style:{background:"#e8f5e8",padding:"1rem",borderRadius:"6px",marginBottom:"2rem"},children:[p.jsx("h2",{children:"Order Data from Firebase"}),p.jsx("pre",{children:JSON.stringify(a,null,2)})]}),p.jsxs("div",{style:{background:"#fff3cd",padding:"1rem",borderRadius:"6px",marginBottom:"2rem"},children:[p.jsx("h2",{children:"Recommended Action"}),((u=e.allParams)==null?void 0:u.status)==="approved"||((d=e.allParams)==null?void 0:d.collection_status)==="approved"?p.jsxs("p",{style:{color:"#155724"},children:["✅ ",p.jsx("strong",{children:"Payment appears to be SUCCESSFUL"})," - should redirect to success page"]}):(a==null?void 0:a.paymentStatus)==="paid"?p.jsxs("p",{style:{color:"#155724"},children:["✅ ",p.jsx("strong",{children:"Payment is SUCCESSFUL in Firebase"})," - should redirect to success page"]}):p.jsx("p",{style:{color:"#721c24"},children:"❌ Payment appears to have failed or is pending"})]}),p.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[p.jsx("button",{onClick:()=>window.location.href="/restaurant_template/payment/success?order="+e.orderId,style:{background:"#28a745",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px"},children:"Go to Success Page"}),p.jsx("button",{onClick:()=>window.location.href="/restaurant_template/payment/failure?order="+e.orderId,style:{background:"#dc3545",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px"},children:"Go to Failure Page"}),p.jsx("button",{onClick:()=>window.location.href="/restaurant_template/",style:{background:"#007bff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"6px"},children:"Go to Menu"})]})]})};function p3({images:r,itemName:e,className:n="item-image"}){const[a,o]=U.useState(0);if(!r||!Array.isArray(r)||r.length===0)return p.jsx("div",{className:`${n} item-placeholder`,children:"🍽️"});const u=r[a],d=r.length>1,h=()=>{o(b=>(b+1)%r.length)},y=()=>{o(b=>(b-1+r.length)%r.length)},g=b=>{o(b)};return p.jsxs("div",{className:`${n} product-gallery`,children:[p.jsx(g3,{src:u.url||u||u.src||u.imageUrl,alt:`${e} - Imagen ${a+1}`,className:"gallery-main-image"}),d&&p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"gallery-nav-btn gallery-prev",onClick:y,"aria-label":"Imagen anterior",children:"‹"}),p.jsx("button",{className:"gallery-nav-btn gallery-next",onClick:h,"aria-label":"Siguiente imagen",children:"›"}),p.jsx("div",{className:"gallery-indicator",children:p.jsxs("span",{className:"gallery-count",children:[a+1,"/",r.length]})}),p.jsx("div",{className:"gallery-dots",children:r.map((b,E)=>p.jsx("button",{className:`gallery-dot ${E===a?"active":""}`,onClick:()=>g(E),"aria-label":`Ver imagen ${E+1}`},E))})]})]})}function g3({src:r,alt:e,className:n,placeholder:a="🍽️"}){const[o,u]=U.useState(!0),[d,h]=U.useState(!1),y=()=>{u(!1),h(!1)},g=()=>{console.warn(`Error cargando imagen: ${r}`),u(!1),h(!0)};return r?d?p.jsx("div",{className:`${n} item-placeholder`,children:a}):p.jsxs("div",{className:n,style:{position:"relative",width:"100%",height:"100%"},children:[o&&p.jsx("div",{className:"item-placeholder",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#f8f9fa",zIndex:1},children:"🔄"}),p.jsx("img",{src:r,alt:e,onLoad:y,onError:g,loading:"lazy",decoding:"async",crossOrigin:"anonymous",referrerPolicy:"no-referrer",style:{display:"block",width:"100%",height:"100%",objectFit:"contain",opacity:o?0:1,transition:"opacity 0.3s ease"},sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})]}):p.jsx("div",{className:`${n} item-placeholder`,children:a})}const y3=({currentProduct:r,menu:e,onProductClick:n})=>{const[a,o]=U.useState([]);return U.useEffect(()=>{if(!r||!e)return;let u=[];for(const[d,h]of Object.entries(e))if(h.items&&h.items.find(g=>g.id===r.id)){u=h.items.filter(g=>g.id!==r.id&&!g.isHidden&&g.isAvailable!==!1).slice(0,8);break}o(u)},[r,e]),a.length===0?null:p.jsxs("div",{className:"suggested-products-section",children:[p.jsx("h2",{children:"Productos relacionados"}),p.jsx("div",{className:"suggested-products-grid",children:a.map(u=>{var d,h;return p.jsxs("div",{className:"suggested-product-card",onClick:()=>n(u.id),children:[p.jsx("div",{className:"suggested-product-image",children:(d=u.images)!=null&&d[0]||u.imageUrl||u.image?p.jsx("img",{src:((h=u.images)==null?void 0:h[0])||u.imageUrl||u.image,alt:u.name}):p.jsx("div",{className:"suggested-product-placeholder",children:p.jsx(Rp,{})})}),p.jsxs("div",{className:"suggested-product-info",children:[p.jsx("h3",{className:"suggested-product-name",children:u.name}),p.jsxs("div",{className:"suggested-product-price",children:[p.jsx("span",{className:"price-symbol",children:"$"}),p.jsx("span",{className:"price-amount",children:u.price})]}),u.trackStock&&u.stock<=5&&u.stock>0&&p.jsxs("div",{className:"suggested-stock-warning",children:[p.jsx(a2,{style:{color:"#ffc107",marginRight:4}})," Últimas ",u.stock," unidades"]}),u.trackStock&&u.stock<=0&&p.jsxs("div",{className:"suggested-out-of-stock",children:[p.jsx(xm,{style:{color:"#dc3545",marginRight:4}})," Sin stock"]})]})]},u.id)})})]})},v3=()=>{const{productId:r}=DS(),e=Kl(),{menu:n,isLoading:a,error:o}=Tf(),{addToCart:u,cartCount:d,cart:h,updateQuantity:y,removeFromCart:g,clearCart:b}=t1(),[E,R]=U.useState(null),[D,B]=U.useState(1),[L,z]=U.useState(!1),[F,Y]=U.useState(!1),[ne,re]=U.useState(!1);U.useEffect(()=>{if(n&&!a){let k=null;for(const C of Object.values(n))if(C.items&&(k=C.items.find(Z=>Z.id===r),k))break;R(k||null)}},[n,a,r]),U.useEffect(()=>{Y(!0),B(1),z(!1),window.scrollTo(0,0);const k=setTimeout(()=>{Y(!1)},300);return()=>clearTimeout(k)},[r]);const V=()=>{if(E)try{u(E,D),z(!0),setTimeout(()=>z(!1),3e3)}catch(k){console.error("Error adding to cart:",k),alert("Error al agregar al carrito")}},q=()=>E.trackStock?E.stock<=0?{status:"out",text:"Sin stock",color:"#dc3545"}:E.stock<=5?{status:"low",text:`Últimas ${E.stock} unidades`,color:"#ffc107"}:{status:"available",text:"Disponible",color:"#28a745"}:{status:"unlimited",text:"Disponible",color:"#28a745"},N=()=>!(E.isHidden||E.isAvailable===!1||E.trackStock&&E.stock<=0),O=()=>re(!0);if(o||!E)return p.jsxs("div",{className:"product-detail-error",children:[p.jsx("div",{className:"error-icon",children:p.jsx(xm,{})}),p.jsx("h2",{children:"Producto no encontrado"}),p.jsx("p",{children:"El producto que buscas no existe o no está disponible."}),p.jsx(Ft,{to:"/",className:"btn btn-primary",children:"Volver al catálogo"})]});const A=q(),S=k=>typeof k=="string"?k:typeof k=="object"&&k&&(k.url||k.src||k.imageUrl||k.image)||"",j=E.images&&Array.isArray(E.images)&&E.images.length>0?E.images.map((C,Z)=>({url:S(C),id:`image-${Z}`,original:C})).filter(C=>C.url):E.imageUrl||E.image?[{url:E.imageUrl||E.image,id:"main-image",original:E.imageUrl||E.image}]:[];return p.jsxs("div",{className:"product-detail-page",style:{paddingTop:"80px"},children:[p.jsx(b2,{onCartClick:O,itemCount:d||0,hideNavLinks:!0}),ne&&p.jsx("div",{className:"cart-overlay",onClick:k=>k.target.classList.contains("cart-overlay")&&re(!1),children:p.jsx(Dp,{cart:h,updateQuantity:y,removeFromCart:g,clearCart:b,total:h.reduce((k,C)=>k+C.price*(C.quantity||1),0),onClose:()=>re(!1)})}),p.jsxs("div",{className:"breadcrumb",children:[p.jsx(Ft,{to:"/",children:"Inicio"}),p.jsx("span",{children:" › "}),p.jsx("span",{children:E.name})]}),L&&p.jsxs("div",{className:"add-to-cart-notification",children:[p.jsx(c_,{style:{color:"#28a745",marginRight:4}})," Producto agregado al carrito"]}),p.jsxs("div",{className:"product-detail-container",children:[p.jsxs("div",{className:"product-gallery-container",children:[p.jsx(p3,{images:j,itemName:E.name,className:"product-detail-gallery"}),E.isFeatured&&p.jsxs("div",{className:"featured-badge",children:[p.jsx(CC,{style:{color:"#ffc107",marginRight:4}})," Destacado"]})]}),p.jsxs("div",{className:"product-info",children:[p.jsxs("div",{className:"product-header",children:[p.jsx("h1",{className:"product-title",children:E.name}),p.jsxs("div",{className:"stock-status",style:{color:A.color},children:[p.jsxs("span",{className:"stock-icon",children:[A.status==="available"&&p.jsx(c_,{style:{color:"#28a745"}}),A.status==="low"&&p.jsx(a2,{style:{color:"#ffc107"}}),A.status==="out"&&p.jsx(xm,{style:{color:"#dc3545"}}),A.status==="unlimited"&&p.jsx(SC,{style:{color:"#28a745"}})]}),A.text]})]}),p.jsxs("div",{className:"product-price",children:[p.jsx("span",{className:"price-symbol",children:"$"}),p.jsx("span",{className:"price-amount",children:E.price}),p.jsx("span",{className:"price-currency",children:"ARS"})]}),N()&&p.jsxs("div",{className:"quantity-section",children:[p.jsx("label",{htmlFor:"quantity",children:"Cantidad:"}),p.jsxs("div",{className:"quantity-controls",children:[p.jsx("button",{className:"quantity-btn",onClick:()=>B(Math.max(1,D-1)),disabled:D<=1,children:"-"}),p.jsx("input",{id:"quantity",type:"number",min:"1",max:E.trackStock?E.stock:999,value:D,onChange:k=>{const C=parseInt(k.target.value)||1,Z=E.trackStock?E.stock:999;B(Math.min(Math.max(1,C),Z))},className:"quantity-input"}),p.jsx("button",{className:"quantity-btn",onClick:()=>{const k=E.trackStock?E.stock:D+1;B(Math.min(D+1,k))},disabled:E.trackStock&&D>=E.stock,children:"+"})]}),E.trackStock&&p.jsxs("small",{className:"stock-info",children:[E.stock," unidades disponibles"]})]}),p.jsx("div",{className:"product-actions",children:N()?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"btn btn-primary add-to-cart-btn",onClick:V,children:"Agregar al carrito"}),p.jsx("button",{className:"btn btn-secondary buy-now-btn",onClick:()=>{V(),setTimeout(()=>e("/"),500)},children:"Comprar ahora"})]}):p.jsx("button",{className:"btn btn-disabled",disabled:!0,children:E.isHidden?"Producto oculto":E.isAvailable===!1?"No disponible":"Sin stock"})}),p.jsxs("div",{className:"product-features",children:[p.jsxs("div",{className:"feature",children:[p.jsx("span",{className:"feature-icon",children:p.jsx(u2,{})}),p.jsx("span",{children:"Envío a todo el país"})]}),p.jsxs("div",{className:"feature",children:[p.jsx("span",{className:"feature-icon",children:p.jsx(o2,{})}),p.jsx("span",{children:"Compra protegida"})]}),p.jsxs("div",{className:"feature",children:[p.jsx("span",{className:"feature-icon",children:p.jsx(r2,{})}),p.jsx("span",{children:"Múltiples medios de pago"})]})]})]})]}),E.description&&p.jsxs("div",{className:"product-description-section",children:[p.jsx("h2",{children:"Descripción del producto"}),p.jsx("div",{className:"product-description",children:p.jsx("p",{children:E.description})})]}),p.jsx(y3,{currentProduct:E,menu:n,onProductClick:k=>{e(`/producto/${k}`)}})]})},_3=()=>p.jsx(vw,{basename:"/shop_template",children:p.jsxs(QS,{children:[p.jsx(Tr,{path:"/",element:p.jsx(l3,{})}),p.jsx(Tr,{path:"/producto/:productId",element:p.jsx(v3,{})}),p.jsx(Tr,{path:"/payment/success",element:p.jsx(u3,{})}),p.jsx(Tr,{path:"/payment/pending",element:p.jsx(c3,{})}),p.jsx(Tr,{path:"/payment/failure",element:p.jsx(d3,{})}),p.jsx(Tr,{path:"/payment/debug",element:p.jsx(m3,{})}),p.jsx(Tr,{path:"/webhook/mercadopago",element:p.jsx(h3,{})}),p.jsx(Tr,{path:"/estado-pedido",element:p.jsx(V_,{})}),p.jsx(Tr,{path:"/order-status",element:p.jsx(V_,{})})]})});tS.createRoot(document.getElementById("root")).render(p.jsx(U.StrictMode,{children:p.jsx(r3,{children:p.jsx(_3,{})})}));
